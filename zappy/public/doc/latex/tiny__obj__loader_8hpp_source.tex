\doxysection{tiny\+\_\+obj\+\_\+loader.\+hpp}
\hypertarget{tiny__obj__loader_8hpp_source}{}\label{tiny__obj__loader_8hpp_source}\index{gui/ege/include/external/tiny\_obj\_loader.hpp@{gui/ege/include/external/tiny\_obj\_loader.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{The\ MIT\ License\ (MIT)}}
\DoxyCodeLine{00003\ \textcolor{comment}{}}
\DoxyCodeLine{00004\ \textcolor{comment}{Copyright\ (c)\ 2012-\/Present,\ Syoyo\ Fujita\ and\ many\ contributors.}}
\DoxyCodeLine{00005\ \textcolor{comment}{}}
\DoxyCodeLine{00006\ \textcolor{comment}{Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining\ a\ copy}}
\DoxyCodeLine{00007\ \textcolor{comment}{of\ this\ software\ and\ associated\ documentation\ files\ (the\ "{}Software"{}),\ to\ deal}}
\DoxyCodeLine{00008\ \textcolor{comment}{in\ the\ Software\ without\ restriction,\ including\ without\ limitation\ the\ rights}}
\DoxyCodeLine{00009\ \textcolor{comment}{to\ use,\ copy,\ modify,\ merge,\ publish,\ distribute,\ sublicense,\ and/or\ sell}}
\DoxyCodeLine{00010\ \textcolor{comment}{copies\ of\ the\ Software,\ and\ to\ permit\ persons\ to\ whom\ the\ Software\ is}}
\DoxyCodeLine{00011\ \textcolor{comment}{furnished\ to\ do\ so,\ subject\ to\ the\ following\ conditions:}}
\DoxyCodeLine{00012\ \textcolor{comment}{}}
\DoxyCodeLine{00013\ \textcolor{comment}{The\ above\ copyright\ notice\ and\ this\ permission\ notice\ shall\ be\ included\ in}}
\DoxyCodeLine{00014\ \textcolor{comment}{all\ copies\ or\ substantial\ portions\ of\ the\ Software.}}
\DoxyCodeLine{00015\ \textcolor{comment}{}}
\DoxyCodeLine{00016\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{00017\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{00018\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{00019\ \textcolor{comment}{AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER}}
\DoxyCodeLine{00020\ \textcolor{comment}{LIABILITY,\ WHETHER\ IN\ AN\ ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,}}
\DoxyCodeLine{00021\ \textcolor{comment}{OUT\ OF\ OR\ IN\ CONNECTION\ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN}}
\DoxyCodeLine{00022\ \textcolor{comment}{THE\ SOFTWARE.}}
\DoxyCodeLine{00023\ \textcolor{comment}{*/}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{//}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ version\ 2.0.0\ :\ Add\ new\ object\ oriented\ API.\ 1.x\ API\ is\ still\ provided.}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Add\ python\ binding.}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Support\ line\ primitive.}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Support\ points\ primitive.}}
\DoxyCodeLine{00030\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Support\ multiple\ search\ path\ for\ .mtl(v1\ API).}}
\DoxyCodeLine{00031\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Support\ vertex\ skinning\ weight\ \`{}vw`(as\ an\ tinyobj}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ extension).\ Note\ that\ this\ differs\ vertex\ weight([w]}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ component\ in\ \`{}v`\ line)}}
\DoxyCodeLine{00034\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Support\ escaped\ whitespece\ in\ mtllib}}
\DoxyCodeLine{00035\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Add\ robust\ triangulation\ using\ Mapbox}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ earcut(TINYOBJLOADER\_USE\_MAPBOX\_EARCUT).}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ version\ 1.4.0\ :\ Modifed\ ParseTextureNameAndOption\ API}}
\DoxyCodeLine{00038\ \textcolor{comment}{//\ version\ 1.3.1\ :\ Make\ ParseTextureNameAndOption\ API\ public}}
\DoxyCodeLine{00039\ \textcolor{comment}{//\ version\ 1.3.0\ :\ Separate\ warning\ and\ error\ message(breaking\ API\ of\ LoadObj)}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ version\ 1.2.3\ :\ Added\ color\ space\ extension('-\/colorspace')\ to\ tex\ opts.}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\ version\ 1.2.2\ :\ Parse\ multiple\ group\ names.}}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ version\ 1.2.1\ :\ Added\ initial\ support\ for\ line('l')\ primitive(PR\ \#178)}}
\DoxyCodeLine{00043\ \textcolor{comment}{//\ version\ 1.2.0\ :\ Hardened\ implementation(\#175)}}
\DoxyCodeLine{00044\ \textcolor{comment}{//\ version\ 1.1.1\ :\ Support\ smoothing\ groups(\#162)}}
\DoxyCodeLine{00045\ \textcolor{comment}{//\ version\ 1.1.0\ :\ Support\ parsing\ vertex\ color(\#144)}}
\DoxyCodeLine{00046\ \textcolor{comment}{//\ version\ 1.0.8\ :\ Fix\ parsing\ \`{}g`\ tag\ just\ after\ \`{}usemtl`(\#138)}}
\DoxyCodeLine{00047\ \textcolor{comment}{//\ version\ 1.0.7\ :\ Support\ multiple\ tex\ options(\#126)}}
\DoxyCodeLine{00048\ \textcolor{comment}{//\ version\ 1.0.6\ :\ Add\ TINYOBJLOADER\_USE\_DOUBLE\ option(\#124)}}
\DoxyCodeLine{00049\ \textcolor{comment}{//\ version\ 1.0.5\ :\ Ignore\ \`{}Tr`\ when\ \`{}d`\ exists\ in\ MTL(\#43)}}
\DoxyCodeLine{00050\ \textcolor{comment}{//\ version\ 1.0.4\ :\ Support\ multiple\ filenames\ for\ 'mtllib'(\#112)}}
\DoxyCodeLine{00051\ \textcolor{comment}{//\ version\ 1.0.3\ :\ Support\ parsing\ texture\ options(\#85)}}
\DoxyCodeLine{00052\ \textcolor{comment}{//\ version\ 1.0.2\ :\ Improve\ parsing\ speed\ by\ about\ a\ factor\ of\ 2\ for\ large}}
\DoxyCodeLine{00053\ \textcolor{comment}{//\ files(\#105)}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ version\ 1.0.1\ :\ Fixes\ a\ shape\ is\ lost\ if\ obj\ ends\ with\ a\ 'usemtl'(\#104)}}
\DoxyCodeLine{00055\ \textcolor{comment}{//\ version\ 1.0.0\ :\ Change\ data\ structure.\ Change\ license\ from\ BSD\ to\ MIT.}}
\DoxyCodeLine{00056\ \textcolor{comment}{//}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{comment}{//}}
\DoxyCodeLine{00059\ \textcolor{comment}{//\ Use\ this\ in\ *one*\ .cc}}
\DoxyCodeLine{00060\ \textcolor{comment}{//\ \ \ \#define\ TINYOBJLOADER\_IMPLEMENTATION}}
\DoxyCodeLine{00061\ \textcolor{comment}{//\ \ \ \#include\ "{}tiny\_obj\_loader.h"{}}}
\DoxyCodeLine{00062\ \textcolor{comment}{//}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#ifndef\ TINY\_OBJ\_LOADER\_H\_}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#define\ TINY\_OBJ\_LOADER\_H\_}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{keyword}{namespace\ }tinyobj\ \{}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{comment}{//\ TODO(syoyo):\ Better\ C++11\ detection\ for\ older\ compiler}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#if\ \_\_cplusplus\ >\ 199711L}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#define\ TINYOBJ\_OVERRIDE\ override}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#define\ TINYOBJ\_OVERRIDE}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ push}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#if\ \_\_has\_warning("{}-\/Wzero-\/as-\/null-\/pointer-\/constant"{}})}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ ignored\ "{}-\/Wzero-\/as-\/null-\/pointer-\/constant"{}}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ ignored\ "{}-\/Wpadded"{}}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{comment}{//\ https://en.wikipedia.org/wiki/Wavefront\_.obj\_file\ says\ ...}}
\DoxyCodeLine{00091\ \textcolor{comment}{//}}
\DoxyCodeLine{00092\ \textcolor{comment}{//\ \ -\/blendu\ on\ |\ off\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ set\ horizontal\ texture\ blending}}
\DoxyCodeLine{00093\ \textcolor{comment}{//\ \ (default\ on)}}
\DoxyCodeLine{00094\ \textcolor{comment}{//\ \ -\/blendv\ on\ |\ off\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ set\ vertical\ texture\ blending}}
\DoxyCodeLine{00095\ \textcolor{comment}{//\ \ (default\ on)}}
\DoxyCodeLine{00096\ \textcolor{comment}{//\ \ -\/boost\ real\_value\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ boost\ mip-\/map\ sharpness}}
\DoxyCodeLine{00097\ \textcolor{comment}{//\ \ -\/mm\ base\_value\ gain\_value\ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ modify\ texture\ map\ values\ (default}}
\DoxyCodeLine{00098\ \textcolor{comment}{//\ \ 0\ 1)}}
\DoxyCodeLine{00099\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ \ \ \ \ base\_value\ =\ brightness,}}
\DoxyCodeLine{00100\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gain\_value\ =\ contrast}}
\DoxyCodeLine{00101\ \textcolor{comment}{//\ \ -\/o\ u\ [v\ [w]]\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Origin\ offset\ \ \ \ \ \ \ \ \ \ \ \ \ (default}}
\DoxyCodeLine{00102\ \textcolor{comment}{//\ \ 0\ 0\ 0)}}
\DoxyCodeLine{00103\ \textcolor{comment}{//\ \ -\/s\ u\ [v\ [w]]\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Scale\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (default}}
\DoxyCodeLine{00104\ \textcolor{comment}{//\ \ 1\ 1\ 1)}}
\DoxyCodeLine{00105\ \textcolor{comment}{//\ \ -\/t\ u\ [v\ [w]]\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Turbulence\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (default}}
\DoxyCodeLine{00106\ \textcolor{comment}{//\ \ 0\ 0\ 0)}}
\DoxyCodeLine{00107\ \textcolor{comment}{//\ \ -\/texres\ resolution\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ texture\ resolution\ to\ create}}
\DoxyCodeLine{00108\ \textcolor{comment}{//\ \ -\/clamp\ on\ |\ off\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ only\ render\ texels\ in\ the\ clamped}}
\DoxyCodeLine{00109\ \textcolor{comment}{//\ \ 0-\/1\ range\ (default\ off)}}
\DoxyCodeLine{00110\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ \ \ When\ unclamped,\ textures\ are}}
\DoxyCodeLine{00111\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ repeated\ across\ a\ surface,}}
\DoxyCodeLine{00112\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ \ \ when\ clamped,\ only\ texels\ which}}
\DoxyCodeLine{00113\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fall\ within\ the\ 0-\/1}}
\DoxyCodeLine{00114\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ \ \ range\ are\ rendered.}}
\DoxyCodeLine{00115\ \textcolor{comment}{//\ \ -\/bm\ mult\_value\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ bump\ multiplier\ (for\ bump\ maps}}
\DoxyCodeLine{00116\ \textcolor{comment}{//\ \ only)}}
\DoxyCodeLine{00117\ \textcolor{comment}{//}}
\DoxyCodeLine{00118\ \textcolor{comment}{//\ \ -\/imfchan\ r\ |\ g\ |\ b\ |\ m\ |\ l\ |\ z\ \ \ \ \ \ \ \ \ \#\ specifies\ which\ channel\ of\ the\ file}}
\DoxyCodeLine{00119\ \textcolor{comment}{//\ \ is\ used\ to}}
\DoxyCodeLine{00120\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ create\ a\ scalar\ or\ bump\ texture.}}
\DoxyCodeLine{00121\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r:red,\ g:green,}}
\DoxyCodeLine{00122\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ b:blue,\ m:matte,\ l:luminance,}}
\DoxyCodeLine{00123\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ z:z-\/depth..}}
\DoxyCodeLine{00124\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ (the\ default\ for\ bump\ is\ 'l'\ and}}
\DoxyCodeLine{00125\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ for\ decal\ is\ 'm')}}
\DoxyCodeLine{00126\ \textcolor{comment}{//\ \ bump\ -\/imfchan\ r\ bumpmap.tga\ \ \ \ \ \ \ \ \ \ \ \ \#\ says\ to\ use\ the\ red\ channel\ of}}
\DoxyCodeLine{00127\ \textcolor{comment}{//\ \ bumpmap.tga\ as\ the\ bumpmap}}
\DoxyCodeLine{00128\ \textcolor{comment}{//}}
\DoxyCodeLine{00129\ \textcolor{comment}{//\ For\ reflection\ maps...}}
\DoxyCodeLine{00130\ \textcolor{comment}{//}}
\DoxyCodeLine{00131\ \textcolor{comment}{//\ \ \ -\/type\ sphere\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ specifies\ a\ sphere\ for\ a\ "{}refl"{}}}
\DoxyCodeLine{00132\ \textcolor{comment}{//\ \ \ reflection\ map}}
\DoxyCodeLine{00133\ \textcolor{comment}{//\ \ \ -\/type\ cube\_top\ \ \ \ |\ cube\_bottom\ |\ \ \ \ \ \ \#\ when\ using\ a\ cube\ map,\ the\ texture}}
\DoxyCodeLine{00134\ \textcolor{comment}{//\ \ \ file\ for\ each}}
\DoxyCodeLine{00135\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ cube\_front\ \ |\ cube\_back\ \ \ |\ \ \ \ \ \ \#\ side\ of\ the\ cube\ is\ specified}}
\DoxyCodeLine{00136\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ separately}}
\DoxyCodeLine{00137\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ cube\_left\ \ \ |\ cube\_right}}
\DoxyCodeLine{00138\ \textcolor{comment}{//}}
\DoxyCodeLine{00139\ \textcolor{comment}{//\ TinyObjLoader\ extension.}}
\DoxyCodeLine{00140\ \textcolor{comment}{//}}
\DoxyCodeLine{00141\ \textcolor{comment}{//\ \ \ -\/colorspace\ SPACE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\ Color\ space\ of\ the\ texture.\ e.g.}}
\DoxyCodeLine{00142\ \textcolor{comment}{//\ \ \ 'sRGB`\ or\ 'linear'}}
\DoxyCodeLine{00143\ \textcolor{comment}{//}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#ifdef\ TINYOBJLOADER\_USE\_DOUBLE}}
\DoxyCodeLine{00146\ \textcolor{comment}{//\#pragma\ message\ "{}using\ double"{}}}
\DoxyCodeLine{00147\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{double}\ real\_t;}
\DoxyCodeLine{00148\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00149\ \textcolor{comment}{//\#pragma\ message\ "{}using\ float"{}}}
\DoxyCodeLine{00150\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{float}\ real\_t;}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00154\ \ \ TEXTURE\_TYPE\_NONE,\ \ \textcolor{comment}{//\ default}}
\DoxyCodeLine{00155\ \ \ TEXTURE\_TYPE\_SPHERE,}
\DoxyCodeLine{00156\ \ \ TEXTURE\_TYPE\_CUBE\_TOP,}
\DoxyCodeLine{00157\ \ \ TEXTURE\_TYPE\_CUBE\_BOTTOM,}
\DoxyCodeLine{00158\ \ \ TEXTURE\_TYPE\_CUBE\_FRONT,}
\DoxyCodeLine{00159\ \ \ TEXTURE\_TYPE\_CUBE\_BACK,}
\DoxyCodeLine{00160\ \ \ TEXTURE\_TYPE\_CUBE\_LEFT,}
\DoxyCodeLine{00161\ \ \ TEXTURE\_TYPE\_CUBE\_RIGHT}
\DoxyCodeLine{00162\ \}\ texture\_type\_t;}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ \{}
\DoxyCodeLine{00165\ \ \ texture\_type\_t\ type;\ \ \ \ \ \ \textcolor{comment}{//\ -\/type\ (default\ TEXTURE\_TYPE\_NONE)}}
\DoxyCodeLine{00166\ \ \ real\_t\ sharpness;\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/boost\ (default\ 1.0?)}}
\DoxyCodeLine{00167\ \ \ real\_t\ brightness;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ base\_value\ in\ -\/mm\ option\ (default\ 0)}}
\DoxyCodeLine{00168\ \ \ real\_t\ contrast;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ gain\_value\ in\ -\/mm\ option\ (default\ 1)}}
\DoxyCodeLine{00169\ \ \ real\_t\ origin\_offset[3];\ \ \textcolor{comment}{//\ -\/o\ u\ [v\ [w]]\ (default\ 0\ 0\ 0)}}
\DoxyCodeLine{00170\ \ \ real\_t\ scale[3];\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/s\ u\ [v\ [w]]\ (default\ 1\ 1\ 1)}}
\DoxyCodeLine{00171\ \ \ real\_t\ turbulence[3];\ \ \ \ \ \textcolor{comment}{//\ -\/t\ u\ [v\ [w]]\ (default\ 0\ 0\ 0)}}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{int}\ texture\_resolution;\ \ \ \textcolor{comment}{//\ -\/texres\ resolution\ (No\ default\ value\ in\ the\ spec.}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We'll\ use\ -\/1)}}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{bool}\ clamp;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/clamp\ (default\ false)}}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordtype}{char}\ imfchan;\ \ \textcolor{comment}{//\ -\/imfchan\ (the\ default\ for\ bump\ is\ 'l'\ and\ for\ decal\ is\ 'm')}}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordtype}{bool}\ blendu;\ \ \ \textcolor{comment}{//\ -\/blendu\ (default\ on)}}
\DoxyCodeLine{00177\ \ \ \textcolor{keywordtype}{bool}\ blendv;\ \ \ \textcolor{comment}{//\ -\/blendv\ (default\ on)}}
\DoxyCodeLine{00178\ \ \ real\_t\ bump\_multiplier;\ \ \textcolor{comment}{//\ -\/bm\ (for\ bump\ maps\ only,\ default\ 1.0)}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{//\ extension}}
\DoxyCodeLine{00181\ \ \ std::string\ colorspace;\ \ \textcolor{comment}{//\ Explicitly\ specify\ color\ space\ of\ stored\ texel}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ value.\ Usually\ \`{}sRGB`\ or\ \`{}linear`\ (default\ empty).}}
\DoxyCodeLine{00183\ \};}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1material__t}{material\_t}}\ \{}
\DoxyCodeLine{00186\ \ \ std::string\ name;}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ real\_t\ ambient[3];}
\DoxyCodeLine{00189\ \ \ real\_t\ diffuse[3];}
\DoxyCodeLine{00190\ \ \ real\_t\ specular[3];}
\DoxyCodeLine{00191\ \ \ real\_t\ transmittance[3];}
\DoxyCodeLine{00192\ \ \ real\_t\ emission[3];}
\DoxyCodeLine{00193\ \ \ real\_t\ shininess;}
\DoxyCodeLine{00194\ \ \ real\_t\ ior;\ \ \ \ \ \ \ \textcolor{comment}{//\ index\ of\ refraction}}
\DoxyCodeLine{00195\ \ \ real\_t\ dissolve;\ \ \textcolor{comment}{//\ 1\ ==\ opaque;\ 0\ ==\ fully\ transparent}}
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//\ illumination\ model\ (see\ http://www.fileformat.info/format/material/)}}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{int}\ illum;}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{keywordtype}{int}\ dummy;\ \ \textcolor{comment}{//\ Suppress\ padding\ warning.}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ std::string\ ambient\_texname;\ \ \ \textcolor{comment}{//\ map\_Ka.\ For\ ambient\ or\ ambient\ occlusion.}}
\DoxyCodeLine{00202\ \ \ std::string\ diffuse\_texname;\ \ \ \textcolor{comment}{//\ map\_Kd}}
\DoxyCodeLine{00203\ \ \ std::string\ specular\_texname;\ \ \textcolor{comment}{//\ map\_Ks}}
\DoxyCodeLine{00204\ \ \ std::string\ specular\_highlight\_texname;\ \ \textcolor{comment}{//\ map\_Ns}}
\DoxyCodeLine{00205\ \ \ std::string\ bump\_texname;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ map\_bump,\ map\_Bump,\ bump}}
\DoxyCodeLine{00206\ \ \ std::string\ displacement\_texname;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ disp}}
\DoxyCodeLine{00207\ \ \ std::string\ alpha\_texname;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ map\_d}}
\DoxyCodeLine{00208\ \ \ std::string\ reflection\_texname;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ refl}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ ambient\_texopt;}
\DoxyCodeLine{00211\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ diffuse\_texopt;}
\DoxyCodeLine{00212\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ specular\_texopt;}
\DoxyCodeLine{00213\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ specular\_highlight\_texopt;}
\DoxyCodeLine{00214\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ bump\_texopt;}
\DoxyCodeLine{00215\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ displacement\_texopt;}
\DoxyCodeLine{00216\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ alpha\_texopt;}
\DoxyCodeLine{00217\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ reflection\_texopt;}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \textcolor{comment}{//\ PBR\ extension}}
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ http://exocortex.com/blog/extending\_wavefront\_mtl\_to\_support\_pbr}}
\DoxyCodeLine{00221\ \ \ real\_t\ roughness;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00222\ \ \ real\_t\ metallic;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00223\ \ \ real\_t\ sheen;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00224\ \ \ real\_t\ clearcoat\_thickness;\ \ \textcolor{comment}{//\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00225\ \ \ real\_t\ clearcoat\_roughness;\ \ \textcolor{comment}{//\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00226\ \ \ real\_t\ anisotropy;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ aniso.\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00227\ \ \ real\_t\ anisotropy\_rotation;\ \ \textcolor{comment}{//\ anisor.\ [0,\ 1]\ default\ 0}}
\DoxyCodeLine{00228\ \ \ real\_t\ pad0;}
\DoxyCodeLine{00229\ \ \ std::string\ roughness\_texname;\ \ \textcolor{comment}{//\ map\_Pr}}
\DoxyCodeLine{00230\ \ \ std::string\ metallic\_texname;\ \ \ \textcolor{comment}{//\ map\_Pm}}
\DoxyCodeLine{00231\ \ \ std::string\ sheen\_texname;\ \ \ \ \ \ \textcolor{comment}{//\ map\_Ps}}
\DoxyCodeLine{00232\ \ \ std::string\ emissive\_texname;\ \ \ \textcolor{comment}{//\ map\_Ke}}
\DoxyCodeLine{00233\ \ \ std::string\ normal\_texname;\ \ \ \ \ \textcolor{comment}{//\ norm.\ For\ normal\ mapping.}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ roughness\_texopt;}
\DoxyCodeLine{00236\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ metallic\_texopt;}
\DoxyCodeLine{00237\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ sheen\_texopt;}
\DoxyCodeLine{00238\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ emissive\_texopt;}
\DoxyCodeLine{00239\ \ \ \mbox{\hyperlink{structtinyobj_1_1texture__option__t}{texture\_option\_t}}\ normal\_texopt;}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \textcolor{keywordtype}{int}\ pad2;}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ std::map<std::string,\ std::string>\ unknown\_parameter;}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\#ifdef\ TINY\_OBJ\_LOADER\_PYTHON\_BINDING}}
\DoxyCodeLine{00246\ \ \ \textcolor{comment}{//\ For\ pybind11}}
\DoxyCodeLine{00247\ \ \ std::array<double,\ 3>\ GetDiffuse()\ \{}
\DoxyCodeLine{00248\ \ \ \ \ std::array<double,\ 3>\ values;}
\DoxyCodeLine{00249\ \ \ \ \ values[0]\ =\ double(diffuse[0]);}
\DoxyCodeLine{00250\ \ \ \ \ values[1]\ =\ double(diffuse[1]);}
\DoxyCodeLine{00251\ \ \ \ \ values[2]\ =\ double(diffuse[2]);}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{return}\ values;}
\DoxyCodeLine{00254\ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ std::array<double,\ 3>\ GetSpecular()\ \{}
\DoxyCodeLine{00257\ \ \ \ \ std::array<double,\ 3>\ values;}
\DoxyCodeLine{00258\ \ \ \ \ values[0]\ =\ double(specular[0]);}
\DoxyCodeLine{00259\ \ \ \ \ values[1]\ =\ double(specular[1]);}
\DoxyCodeLine{00260\ \ \ \ \ values[2]\ =\ double(specular[2]);}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{return}\ values;}
\DoxyCodeLine{00263\ \ \ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ std::array<double,\ 3>\ GetTransmittance()\ \{}
\DoxyCodeLine{00266\ \ \ \ \ std::array<double,\ 3>\ values;}
\DoxyCodeLine{00267\ \ \ \ \ values[0]\ =\ double(transmittance[0]);}
\DoxyCodeLine{00268\ \ \ \ \ values[1]\ =\ double(transmittance[1]);}
\DoxyCodeLine{00269\ \ \ \ \ values[2]\ =\ double(transmittance[2]);}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordflow}{return}\ values;}
\DoxyCodeLine{00272\ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ std::array<double,\ 3>\ GetEmission()\ \{}
\DoxyCodeLine{00275\ \ \ \ \ std::array<double,\ 3>\ values;}
\DoxyCodeLine{00276\ \ \ \ \ values[0]\ =\ double(emission[0]);}
\DoxyCodeLine{00277\ \ \ \ \ values[1]\ =\ double(emission[1]);}
\DoxyCodeLine{00278\ \ \ \ \ values[2]\ =\ double(emission[2]);}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordflow}{return}\ values;}
\DoxyCodeLine{00281\ \ \ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ std::array<double,\ 3>\ GetAmbient()\ \{}
\DoxyCodeLine{00284\ \ \ \ \ std::array<double,\ 3>\ values;}
\DoxyCodeLine{00285\ \ \ \ \ values[0]\ =\ double(ambient[0]);}
\DoxyCodeLine{00286\ \ \ \ \ values[1]\ =\ double(ambient[1]);}
\DoxyCodeLine{00287\ \ \ \ \ values[2]\ =\ double(ambient[2]);}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordflow}{return}\ values;}
\DoxyCodeLine{00290\ \ \ \}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \textcolor{keywordtype}{void}\ SetDiffuse(std::array<double,\ 3>\ \&a)\ \{}
\DoxyCodeLine{00293\ \ \ \ \ diffuse[0]\ =\ real\_t(a[0]);}
\DoxyCodeLine{00294\ \ \ \ \ diffuse[1]\ =\ real\_t(a[1]);}
\DoxyCodeLine{00295\ \ \ \ \ diffuse[2]\ =\ real\_t(a[2]);}
\DoxyCodeLine{00296\ \ \ \}}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \textcolor{keywordtype}{void}\ SetAmbient(std::array<double,\ 3>\ \&a)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ ambient[0]\ =\ real\_t(a[0]);}
\DoxyCodeLine{00300\ \ \ \ \ ambient[1]\ =\ real\_t(a[1]);}
\DoxyCodeLine{00301\ \ \ \ \ ambient[2]\ =\ real\_t(a[2]);}
\DoxyCodeLine{00302\ \ \ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \textcolor{keywordtype}{void}\ SetSpecular(std::array<double,\ 3>\ \&a)\ \{}
\DoxyCodeLine{00305\ \ \ \ \ specular[0]\ =\ real\_t(a[0]);}
\DoxyCodeLine{00306\ \ \ \ \ specular[1]\ =\ real\_t(a[1]);}
\DoxyCodeLine{00307\ \ \ \ \ specular[2]\ =\ real\_t(a[2]);}
\DoxyCodeLine{00308\ \ \ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{keywordtype}{void}\ SetTransmittance(std::array<double,\ 3>\ \&a)\ \{}
\DoxyCodeLine{00311\ \ \ \ \ transmittance[0]\ =\ real\_t(a[0]);}
\DoxyCodeLine{00312\ \ \ \ \ transmittance[1]\ =\ real\_t(a[1]);}
\DoxyCodeLine{00313\ \ \ \ \ transmittance[2]\ =\ real\_t(a[2]);}
\DoxyCodeLine{00314\ \ \ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ std::string\ GetCustomParameter(\textcolor{keyword}{const}\ std::string\ \&key)\ \{}
\DoxyCodeLine{00317\ \ \ \ \ std::map<std::string,\ std::string>::const\_iterator\ it\ =}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ unknown\_parameter.find(key);}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ unknown\_parameter.end())\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ it-\/>second;}
\DoxyCodeLine{00322\ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00324\ \ \ \}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00327\ \};}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1tag__t}{tag\_t}}\ \{}
\DoxyCodeLine{00330\ \ \ std::string\ name;}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ std::vector<int>\ intValues;}
\DoxyCodeLine{00333\ \ \ std::vector<real\_t>\ floatValues;}
\DoxyCodeLine{00334\ \ \ std::vector<std::string>\ stringValues;}
\DoxyCodeLine{00335\ \};}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1joint__and__weight__t}{joint\_and\_weight\_t}}\ \{}
\DoxyCodeLine{00338\ \ \ \textcolor{keywordtype}{int}\ joint\_id;}
\DoxyCodeLine{00339\ \ \ real\_t\ weight;}
\DoxyCodeLine{00340\ \};}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1skin__weight__t}{skin\_weight\_t}}\ \{}
\DoxyCodeLine{00343\ \ \ \textcolor{keywordtype}{int}\ vertex\_id;\ \ \textcolor{comment}{//\ Corresponding\ vertex\ index\ in\ \`{}attrib\_t::vertices`.}}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compared\ to\ \`{}index\_t`,\ this\ index\ must\ be\ positive\ and}}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ start\ with\ 0(does\ not\ allow\ relative\ indexing)}}
\DoxyCodeLine{00346\ \ \ std::vector<joint\_and\_weight\_t>\ weightValues;}
\DoxyCodeLine{00347\ \};}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \textcolor{comment}{//\ Index\ struct\ to\ support\ different\ indices\ for\ vtx/normal/texcoord.}}
\DoxyCodeLine{00350\ \textcolor{comment}{//\ -\/1\ means\ not\ used.}}
\DoxyCodeLine{00351\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1index__t}{index\_t}}\ \{}
\DoxyCodeLine{00352\ \ \ \textcolor{keywordtype}{int}\ vertex\_index;}
\DoxyCodeLine{00353\ \ \ \textcolor{keywordtype}{int}\ normal\_index;}
\DoxyCodeLine{00354\ \ \ \textcolor{keywordtype}{int}\ texcoord\_index;}
\DoxyCodeLine{00355\ \};}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1mesh__t}{mesh\_t}}\ \{}
\DoxyCodeLine{00358\ \ \ std::vector<index\_t>\ indices;}
\DoxyCodeLine{00359\ \ \ std::vector<unsigned\ int>}
\DoxyCodeLine{00360\ \ \ \ \ \ \ num\_face\_vertices;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ number\ of\ vertices\ per}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ face.\ 3\ =\ triangle,\ 4\ =\ quad,\ ...}}
\DoxyCodeLine{00362\ \ \ std::vector<int>\ material\_ids;\ \ \textcolor{comment}{//\ per-\/face\ material\ ID}}
\DoxyCodeLine{00363\ \ \ std::vector<unsigned\ int>\ smoothing\_group\_ids;\ \ \textcolor{comment}{//\ per-\/face\ smoothing\ group}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ID(0\ =\ off.\ positive\ value}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ =\ group\ id)}}
\DoxyCodeLine{00366\ \ \ std::vector<tag\_t>\ tags;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ SubD\ tag}}
\DoxyCodeLine{00367\ \};}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \textcolor{comment}{//\ struct\ path\_t\ \{}}
\DoxyCodeLine{00370\ \textcolor{comment}{//\ \ std::vector<int>\ indices;\ \ //\ pairs\ of\ indices\ for\ lines}}
\DoxyCodeLine{00371\ \textcolor{comment}{//\};}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1lines__t}{lines\_t}}\ \{}
\DoxyCodeLine{00374\ \ \ \textcolor{comment}{//\ Linear\ flattened\ indices.}}
\DoxyCodeLine{00375\ \ \ std::vector<index\_t>\ indices;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ indices\ for\ vertices(poly\ lines)}}
\DoxyCodeLine{00376\ \ \ std::vector<int>\ num\_line\_vertices;\ \ \textcolor{comment}{//\ The\ number\ of\ vertices\ per\ line.}}
\DoxyCodeLine{00377\ \};}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1points__t}{points\_t}}\ \{}
\DoxyCodeLine{00380\ \ \ std::vector<index\_t>\ indices;\ \ \textcolor{comment}{//\ indices\ for\ points}}
\DoxyCodeLine{00381\ \};}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1shape__t}{shape\_t}}\ \{}
\DoxyCodeLine{00384\ \ \ std::string\ name;}
\DoxyCodeLine{00385\ \ \ \mbox{\hyperlink{structtinyobj_1_1mesh__t}{mesh\_t}}\ mesh;}
\DoxyCodeLine{00386\ \ \ \mbox{\hyperlink{structtinyobj_1_1lines__t}{lines\_t}}\ lines;}
\DoxyCodeLine{00387\ \ \ \mbox{\hyperlink{structtinyobj_1_1points__t}{points\_t}}\ points;}
\DoxyCodeLine{00388\ \};}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \textcolor{comment}{//\ Vertex\ attributes}}
\DoxyCodeLine{00391\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1attrib__t}{attrib\_t}}\ \{}
\DoxyCodeLine{00392\ \ \ std::vector<real\_t>\ vertices;\ \ \textcolor{comment}{//\ 'v'(xyz)}}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \textcolor{comment}{//\ For\ backward\ compatibility,\ we\ store\ vertex\ weight\ in\ separate\ array.}}
\DoxyCodeLine{00395\ \ \ std::vector<real\_t>\ vertex\_weights;\ \ \textcolor{comment}{//\ 'v'(w)}}
\DoxyCodeLine{00396\ \ \ std::vector<real\_t>\ normals;\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 'vn'}}
\DoxyCodeLine{00397\ \ \ std::vector<real\_t>\ texcoords;\ \ \ \ \ \ \ \textcolor{comment}{//\ 'vt'(uv)}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \textcolor{comment}{//\ For\ backward\ compatibility,\ we\ store\ texture\ coordinate\ 'w'\ in\ separate}}
\DoxyCodeLine{00400\ \ \ \textcolor{comment}{//\ array.}}
\DoxyCodeLine{00401\ \ \ std::vector<real\_t>\ texcoord\_ws;\ \ \textcolor{comment}{//\ 'vt'(w)}}
\DoxyCodeLine{00402\ \ \ std::vector<real\_t>\ colors;\ \ \ \ \ \ \ \textcolor{comment}{//\ extension:\ vertex\ colors}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00405\ \ \ \textcolor{comment}{//\ TinyObj\ extension.}}
\DoxyCodeLine{00406\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \textcolor{comment}{//\ NOTE(syoyo):\ array\ index\ is\ based\ on\ the\ appearance\ order.}}
\DoxyCodeLine{00409\ \ \ \textcolor{comment}{//\ To\ get\ a\ corresponding\ skin\ weight\ for\ a\ specific\ vertex\ id\ \`{}vid`,}}
\DoxyCodeLine{00410\ \ \ \textcolor{comment}{//\ Need\ to\ reconstruct\ a\ look\ up\ table:\ \`{}skin\_weight\_t::vertex\_id`\ ==\ \`{}vid`}}
\DoxyCodeLine{00411\ \ \ \textcolor{comment}{//\ (e.g.\ using\ std::map,\ std::unordered\_map)}}
\DoxyCodeLine{00412\ \ \ std::vector<skin\_weight\_t>\ skin\_weights;}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \mbox{\hyperlink{structtinyobj_1_1attrib__t}{attrib\_t}}()\ \{\}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00417\ \ \ \textcolor{comment}{//\ For\ pybind11}}
\DoxyCodeLine{00418\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00419\ \ \ \textcolor{keyword}{const}\ std::vector<real\_t>\ \&GetVertices()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ vertices;\ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \textcolor{keyword}{const}\ std::vector<real\_t>\ \&GetVertexWeights()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ vertex\_weights;\ \}}
\DoxyCodeLine{00422\ \};}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1callback__t}{callback\_t}}\ \{}
\DoxyCodeLine{00425\ \ \ \textcolor{comment}{//\ W\ is\ optional\ and\ set\ to\ 1\ if\ there\ is\ no\ \`{}w`\ item\ in\ \`{}v`\ line}}
\DoxyCodeLine{00426\ \ \ void\ (*vertex\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ real\_t\ x,\ real\_t\ y,\ real\_t\ z,\ real\_t\ w);}
\DoxyCodeLine{00427\ \ \ void\ (*vertex\_color\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ real\_t\ x,\ real\_t\ y,\ real\_t\ z,}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ r,\ real\_t\ g,\ real\_t\ b,\ \textcolor{keywordtype}{bool}\ has\_color);}
\DoxyCodeLine{00429\ \ \ void\ (*normal\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ real\_t\ x,\ real\_t\ y,\ real\_t\ z);}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \textcolor{comment}{//\ y\ and\ z\ are\ optional\ and\ set\ to\ 0\ if\ there\ is\ no\ \`{}y`\ and/or\ \`{}z`\ item(s)\ in}}
\DoxyCodeLine{00432\ \ \ \textcolor{comment}{//\ \`{}vt`\ line.}}
\DoxyCodeLine{00433\ \ \ void\ (*texcoord\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ real\_t\ x,\ real\_t\ y,\ real\_t\ z);}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \textcolor{comment}{//\ called\ per\ 'f'\ line.\ num\_indices\ is\ the\ number\ of\ face\ indices(e.g.\ 3\ for}}
\DoxyCodeLine{00436\ \ \ \textcolor{comment}{//\ triangle,\ 4\ for\ quad)}}
\DoxyCodeLine{00437\ \ \ \textcolor{comment}{//\ 0\ will\ be\ passed\ for\ undefined\ index\ in\ index\_t\ members.}}
\DoxyCodeLine{00438\ \ \ void\ (*index\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ \mbox{\hyperlink{structtinyobj_1_1index__t}{index\_t}}\ *indices,\ \textcolor{keywordtype}{int}\ num\_indices);}
\DoxyCodeLine{00439\ \ \ \textcolor{comment}{//\ \`{}name`\ material\ name,\ \`{}material\_id`\ =\ the\ array\ index\ of\ material\_t[].\ -\/1}}
\DoxyCodeLine{00440\ \ \ \textcolor{comment}{//\ if}}
\DoxyCodeLine{00441\ \ \ \textcolor{comment}{//\ a\ material\ not\ found\ in\ .mtl}}
\DoxyCodeLine{00442\ \ \ void\ (*usemtl\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name,\ \textcolor{keywordtype}{int}\ material\_id);}
\DoxyCodeLine{00443\ \ \ \textcolor{comment}{//\ \`{}materials`\ =\ parsed\ material\ data.}}
\DoxyCodeLine{00444\ \ \ void\ (*mtllib\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtinyobj_1_1material__t}{material\_t}}\ *materials,}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_materials);}
\DoxyCodeLine{00446\ \ \ \textcolor{comment}{//\ There\ may\ be\ multiple\ group\ names}}
\DoxyCodeLine{00447\ \ \ void\ (*group\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **names,\ \textcolor{keywordtype}{int}\ num\_names);}
\DoxyCodeLine{00448\ \ \ void\ (*object\_cb)(\textcolor{keywordtype}{void}\ *user\_data,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name);}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \mbox{\hyperlink{structtinyobj_1_1callback__t}{callback\_t}}()}
\DoxyCodeLine{00451\ \ \ \ \ \ \ :\ vertex\_cb(NULL),}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ vertex\_color\_cb(NULL),}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ normal\_cb(NULL),}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ texcoord\_cb(NULL),}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ index\_cb(NULL),}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ usemtl\_cb(NULL),}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ mtllib\_cb(NULL),}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ group\_cb(NULL),}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ object\_cb(NULL)\ \{\}}
\DoxyCodeLine{00460\ \};}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtinyobj_1_1MaterialReader}{MaterialReader}}\ \{}
\DoxyCodeLine{00463\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00464\ \ \ \mbox{\hyperlink{classtinyobj_1_1MaterialReader}{MaterialReader}}()\ \{\}}
\DoxyCodeLine{00465\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classtinyobj_1_1MaterialReader}{\string~MaterialReader}}();}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ operator()(\textcolor{keyword}{const}\ std::string\ \&matId,}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::map<std::string,\ int>\ *matMap,\ std::string\ *warn,}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err)\ =\ 0;}
\DoxyCodeLine{00471\ \};}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00476\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtinyobj_1_1MaterialFileReader}{MaterialFileReader}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtinyobj_1_1MaterialReader}{MaterialReader}}\ \{}
\DoxyCodeLine{00477\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00478\ \ \ \textcolor{comment}{//\ Path\ could\ contain\ separator(';'\ in\ Windows,\ ':'\ in\ Posix)}}
\DoxyCodeLine{00479\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classtinyobj_1_1MaterialFileReader}{MaterialFileReader}}(\textcolor{keyword}{const}\ std::string\ \&mtl\_basedir)}
\DoxyCodeLine{00480\ \ \ \ \ \ \ :\ m\_mtlBaseDir(mtl\_basedir)\ \{\}}
\DoxyCodeLine{00481\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classtinyobj_1_1MaterialFileReader}{\string~MaterialFileReader}}()\ TINYOBJ\_OVERRIDE\ \{\}}
\DoxyCodeLine{00482\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ operator()(\textcolor{keyword}{const}\ std::string\ \&matId,}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::map<std::string,\ int>\ *matMap,\ std::string\ *warn,}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err)\ TINYOBJ\_OVERRIDE;}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00487\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00488\ \ \ std::string\ m\_mtlBaseDir;}
\DoxyCodeLine{00489\ \};}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00494\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtinyobj_1_1MaterialStreamReader}{MaterialStreamReader}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classtinyobj_1_1MaterialReader}{MaterialReader}}\ \{}
\DoxyCodeLine{00495\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00496\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classtinyobj_1_1MaterialStreamReader}{MaterialStreamReader}}(std::istream\ \&inStream)}
\DoxyCodeLine{00497\ \ \ \ \ \ \ :\ m\_inStream(inStream)\ \{\}}
\DoxyCodeLine{00498\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classtinyobj_1_1MaterialStreamReader}{\string~MaterialStreamReader}}()\ TINYOBJ\_OVERRIDE\ \{\}}
\DoxyCodeLine{00499\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ operator()(\textcolor{keyword}{const}\ std::string\ \&matId,}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::map<std::string,\ int>\ *matMap,\ std::string\ *warn,}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err)\ TINYOBJ\_OVERRIDE;}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00505\ \ \ std::istream\ \&m\_inStream;}
\DoxyCodeLine{00506\ \};}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \textcolor{comment}{//\ v2\ API}}
\DoxyCodeLine{00509\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig}{ObjReaderConfig}}\ \{}
\DoxyCodeLine{00510\ \ \ \textcolor{keywordtype}{bool}\ triangulate;\ \ \textcolor{comment}{//\ triangulate\ polygon?}}
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00512\ \ \ \textcolor{comment}{//\ Currently\ not\ used.}}
\DoxyCodeLine{00513\ \ \ \textcolor{comment}{//\ "{}simple"{}\ or\ empty:\ Create\ triangle\ fan}}
\DoxyCodeLine{00514\ \ \ \textcolor{comment}{//\ "{}earcut"{}:\ Use\ the\ algorithm\ based\ on\ Ear\ clipping}}
\DoxyCodeLine{00515\ \ \ std::string\ triangulation\_method;}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00521\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig_af89582372bda5ec5d45d7a20e7daf127}{vertex\_color}};}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00528\ \ \ std::string\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig_aff3620e91b88583d1eb7747079941b65}{mtl\_search\_path}};}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig}{ObjReaderConfig}}()}
\DoxyCodeLine{00531\ \ \ \ \ \ \ :\ triangulate(true),\ triangulation\_method(\textcolor{stringliteral}{"{}simple"{}}),\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig_af89582372bda5ec5d45d7a20e7daf127}{vertex\_color}}(true)\ \{\}}
\DoxyCodeLine{00532\ \};}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00537\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtinyobj_1_1ObjReader}{ObjReader}}\ \{}
\DoxyCodeLine{00538\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00539\ \ \ \mbox{\hyperlink{classtinyobj_1_1ObjReader}{ObjReader}}()\ :\ valid\_(\textcolor{keyword}{false})\ \{\}}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00547\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtinyobj_1_1ObjReader_a2aff0b5142ad265dc9fa276064f69700}{ParseFromFile}}(\textcolor{keyword}{const}\ std::string\ \&filename,}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig}{ObjReaderConfig}}\ \&config\ =\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig}{ObjReaderConfig}}());}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00559\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtinyobj_1_1ObjReader_a89a253a20fdf22305b068143cc58dfce}{ParseFromString}}(\textcolor{keyword}{const}\ std::string\ \&obj\_text,\ \textcolor{keyword}{const}\ std::string\ \&mtl\_text,}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig}{ObjReaderConfig}}\ \&config\ =\ \mbox{\hyperlink{structtinyobj_1_1ObjReaderConfig}{ObjReaderConfig}}());}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00565\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtinyobj_1_1ObjReader_ac4c689535db68c233dd063e7c726139d}{Valid}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ valid\_;\ \}}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtinyobj_1_1attrib__t}{attrib\_t}}\ \&GetAttrib()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ attrib\_;\ \}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \textcolor{keyword}{const}\ std::vector<shape\_t>\ \&GetShapes()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ shapes\_;\ \}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ \textcolor{keyword}{const}\ std::vector<material\_t>\ \&GetMaterials()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ materials\_;\ \}}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00576\ \ \ \textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classtinyobj_1_1ObjReader_a74f64d9964657f297b12c51110745a38}{Warning}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ warning\_;\ \}}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00581\ \ \ \textcolor{keyword}{const}\ std::string\ \&\mbox{\hyperlink{classtinyobj_1_1ObjReader_a7f1029f8dfac167a65dae98e7837b611}{Error}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ error\_;\ \}}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00584\ \ \ \textcolor{keywordtype}{bool}\ valid\_;}
\DoxyCodeLine{00585\ }
\DoxyCodeLine{00586\ \ \ \mbox{\hyperlink{structtinyobj_1_1attrib__t}{attrib\_t}}\ attrib\_;}
\DoxyCodeLine{00587\ \ \ std::vector<shape\_t>\ shapes\_;}
\DoxyCodeLine{00588\ \ \ std::vector<material\_t>\ materials\_;}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ std::string\ warning\_;}
\DoxyCodeLine{00591\ \ \ std::string\ error\_;}
\DoxyCodeLine{00592\ \};}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00608\ \textcolor{keywordtype}{bool}\ LoadObj(attrib\_t\ *attrib,\ std::vector<shape\_t>\ *shapes,}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,\ std::string\ *warn,}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *filename,}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *mtl\_basedir\ =\ NULL,\ \textcolor{keywordtype}{bool}\ triangulate\ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ default\_vcols\_fallback\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00620\ \textcolor{keywordtype}{bool}\ LoadObjWithCallback(std::istream\ \&inStream,\ \textcolor{keyword}{const}\ callback\_t\ \&callback,}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *user\_data\ =\ NULL,}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MaterialReader\ *readMatFn\ =\ NULL,}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warn\ =\ NULL,\ std::string\ *err\ =\ NULL);}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00629\ \textcolor{keywordtype}{bool}\ LoadObj(attrib\_t\ *attrib,\ std::vector<shape\_t>\ *shapes,}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,\ std::string\ *warn,}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err,\ std::istream\ *inStream,}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ MaterialReader\ *readMatFn\ =\ NULL,\ \textcolor{keywordtype}{bool}\ triangulate\ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ default\_vcols\_fallback\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00636\ \textcolor{keywordtype}{void}\ LoadMtl(std::map<std::string,\ int>\ *material\_map,}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,\ std::istream\ *inStream,}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warning,\ std::string\ *err);}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00648\ \textcolor{keywordtype}{bool}\ ParseTextureNameAndOption(std::string\ *texname,\ texture\_option\_t\ *texopt,}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *linebuf);}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \}\ \ \textcolor{comment}{//\ namespace\ tinyobj}}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ TINY\_OBJ\_LOADER\_H\_}}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \textcolor{preprocessor}{\#ifdef\ TINYOBJLOADER\_IMPLEMENTATION}}
\DoxyCodeLine{00658\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00659\ \textcolor{preprocessor}{\#include\ <cctype>}}
\DoxyCodeLine{00660\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00661\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00662\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00663\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{00664\ \textcolor{preprocessor}{\#include\ <fstream>}}
\DoxyCodeLine{00665\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00666\ \textcolor{preprocessor}{\#include\ <set>}}
\DoxyCodeLine{00667\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00668\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00669\ }
\DoxyCodeLine{00670\ \textcolor{preprocessor}{\#ifdef\ TINYOBJLOADER\_USE\_MAPBOX\_EARCUT}}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \textcolor{preprocessor}{\#ifdef\ TINYOBJLOADER\_DONOT\_INCLUDE\_MAPBOX\_EARCUT}}
\DoxyCodeLine{00673\ \textcolor{comment}{//\ Assume\ earcut.hpp\ is\ included\ outside\ of\ tiny\_obj\_loader.h}}
\DoxyCodeLine{00674\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00675\ }
\DoxyCodeLine{00676\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00677\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ push}}
\DoxyCodeLine{00678\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ ignored\ "{}-\/Weverything"{}}}
\DoxyCodeLine{00679\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \textcolor{preprocessor}{\#include\ <array>}}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \textcolor{preprocessor}{\#include\ "{}mapbox/earcut.hpp"{}}}
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00685\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00686\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ pop}}
\DoxyCodeLine{00687\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00690\ }
\DoxyCodeLine{00691\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ TINYOBJLOADER\_USE\_MAPBOX\_EARCUT}}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ \textcolor{keyword}{namespace\ }tinyobj\ \{}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ MaterialReader::\string~MaterialReader()\ \{\}}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00697\ \textcolor{keyword}{struct\ }vertex\_index\_t\ \{}
\DoxyCodeLine{00698\ \ \ \textcolor{keywordtype}{int}\ v\_idx,\ vt\_idx,\ vn\_idx;}
\DoxyCodeLine{00699\ \ \ vertex\_index\_t()\ :\ v\_idx(-\/1),\ vt\_idx(-\/1),\ vn\_idx(-\/1)\ \{\}}
\DoxyCodeLine{00700\ \ \ \textcolor{keyword}{explicit}\ vertex\_index\_t(\textcolor{keywordtype}{int}\ idx)\ :\ v\_idx(idx),\ vt\_idx(idx),\ vn\_idx(idx)\ \{\}}
\DoxyCodeLine{00701\ \ \ vertex\_index\_t(\textcolor{keywordtype}{int}\ vidx,\ \textcolor{keywordtype}{int}\ vtidx,\ \textcolor{keywordtype}{int}\ vnidx)}
\DoxyCodeLine{00702\ \ \ \ \ \ \ :\ v\_idx(vidx),\ vt\_idx(vtidx),\ vn\_idx(vnidx)\ \{\}}
\DoxyCodeLine{00703\ \};}
\DoxyCodeLine{00704\ }
\DoxyCodeLine{00705\ \textcolor{comment}{//\ Internal\ data\ structure\ for\ face\ representation}}
\DoxyCodeLine{00706\ \textcolor{comment}{//\ index\ +\ smoothing\ group.}}
\DoxyCodeLine{00707\ \textcolor{keyword}{struct\ }face\_t\ \{}
\DoxyCodeLine{00708\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}}
\DoxyCodeLine{00709\ \ \ \ \ \ \ smoothing\_group\_id;\ \ \textcolor{comment}{//\ smoothing\ group\ id.\ 0\ =\ smoothing\ groupd\ is\ off.}}
\DoxyCodeLine{00710\ \ \ \textcolor{keywordtype}{int}\ pad\_;}
\DoxyCodeLine{00711\ \ \ std::vector<vertex\_index\_t>\ vertex\_indices;\ \ \textcolor{comment}{//\ face\ vertex\ indices.}}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ face\_t()\ :\ smoothing\_group\_id(0),\ pad\_(0)\ \{\}}
\DoxyCodeLine{00714\ \};}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00716\ \textcolor{comment}{//\ Internal\ data\ structure\ for\ line\ representation}}
\DoxyCodeLine{00717\ \textcolor{keyword}{struct\ }\_\_line\_t\ \{}
\DoxyCodeLine{00718\ \ \ \textcolor{comment}{//\ l\ v1/vt1\ v2/vt2\ ...}}
\DoxyCodeLine{00719\ \ \ \textcolor{comment}{//\ In\ the\ specification,\ line\ primitrive\ does\ not\ have\ normal\ index,\ but}}
\DoxyCodeLine{00720\ \ \ \textcolor{comment}{//\ TinyObjLoader\ allow\ it}}
\DoxyCodeLine{00721\ \ \ std::vector<vertex\_index\_t>\ vertex\_indices;}
\DoxyCodeLine{00722\ \};}
\DoxyCodeLine{00723\ }
\DoxyCodeLine{00724\ \textcolor{comment}{//\ Internal\ data\ structure\ for\ points\ representation}}
\DoxyCodeLine{00725\ \textcolor{keyword}{struct\ }\_\_points\_t\ \{}
\DoxyCodeLine{00726\ \ \ \textcolor{comment}{//\ p\ v1\ v2\ ...}}
\DoxyCodeLine{00727\ \ \ \textcolor{comment}{//\ In\ the\ specification,\ point\ primitrive\ does\ not\ have\ normal\ index\ and}}
\DoxyCodeLine{00728\ \ \ \textcolor{comment}{//\ texture\ coord\ index,\ but\ TinyObjLoader\ allow\ it.}}
\DoxyCodeLine{00729\ \ \ std::vector<vertex\_index\_t>\ vertex\_indices;}
\DoxyCodeLine{00730\ \};}
\DoxyCodeLine{00731\ }
\DoxyCodeLine{00732\ \textcolor{keyword}{struct\ }tag\_sizes\ \{}
\DoxyCodeLine{00733\ \ \ tag\_sizes()\ :\ num\_ints(0),\ num\_reals(0),\ num\_strings(0)\ \{\}}
\DoxyCodeLine{00734\ \ \ \textcolor{keywordtype}{int}\ num\_ints;}
\DoxyCodeLine{00735\ \ \ \textcolor{keywordtype}{int}\ num\_reals;}
\DoxyCodeLine{00736\ \ \ \textcolor{keywordtype}{int}\ num\_strings;}
\DoxyCodeLine{00737\ \};}
\DoxyCodeLine{00738\ }
\DoxyCodeLine{00739\ \textcolor{keyword}{struct\ }obj\_shape\ \{}
\DoxyCodeLine{00740\ \ \ std::vector<real\_t>\ v;}
\DoxyCodeLine{00741\ \ \ std::vector<real\_t>\ vn;}
\DoxyCodeLine{00742\ \ \ std::vector<real\_t>\ vt;}
\DoxyCodeLine{00743\ \};}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \textcolor{comment}{//}}
\DoxyCodeLine{00746\ \textcolor{comment}{//\ Manages\ group\ of\ primitives(face,\ line,\ points,\ ...)}}
\DoxyCodeLine{00747\ \textcolor{keyword}{struct\ }PrimGroup\ \{}
\DoxyCodeLine{00748\ \ \ std::vector<face\_t>\ faceGroup;}
\DoxyCodeLine{00749\ \ \ std::vector<\_\_line\_t>\ lineGroup;}
\DoxyCodeLine{00750\ \ \ std::vector<\_\_points\_t>\ pointsGroup;}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \ \ \textcolor{keywordtype}{void}\ clear()\ \{}
\DoxyCodeLine{00753\ \ \ \ \ faceGroup.clear();}
\DoxyCodeLine{00754\ \ \ \ \ lineGroup.clear();}
\DoxyCodeLine{00755\ \ \ \ \ pointsGroup.clear();}
\DoxyCodeLine{00756\ \ \ \}}
\DoxyCodeLine{00757\ }
\DoxyCodeLine{00758\ \ \ \textcolor{keywordtype}{bool}\ IsEmpty()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00759\ \ \ \ \ \textcolor{keywordflow}{return}\ faceGroup.empty()\ \&\&\ lineGroup.empty()\ \&\&\ pointsGroup.empty();}
\DoxyCodeLine{00760\ \ \ \}}
\DoxyCodeLine{00761\ }
\DoxyCodeLine{00762\ \ \ \textcolor{comment}{//\ TODO(syoyo):\ bspline,\ surface,\ ...}}
\DoxyCodeLine{00763\ \};}
\DoxyCodeLine{00764\ }
\DoxyCodeLine{00765\ \textcolor{comment}{//\ See}}
\DoxyCodeLine{00766\ \textcolor{comment}{//\ http://stackoverflow.com/questions/6089231/getting-\/std-\/ifstream-\/to-\/handle-\/lf-\/cr-\/and-\/crlf}}
\DoxyCodeLine{00767\ \textcolor{keyword}{static}\ std::istream\ \&safeGetline(std::istream\ \&is,\ std::string\ \&t)\ \{}
\DoxyCodeLine{00768\ \ \ t.clear();}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \ \ \textcolor{comment}{//\ The\ characters\ in\ the\ stream\ are\ read\ one-\/by-\/one\ using\ a\ std::streambuf.}}
\DoxyCodeLine{00771\ \ \ \textcolor{comment}{//\ That\ is\ faster\ than\ reading\ them\ one-\/by-\/one\ using\ the\ std::istream.}}
\DoxyCodeLine{00772\ \ \ \textcolor{comment}{//\ Code\ that\ uses\ streambuf\ this\ way\ must\ be\ guarded\ by\ a\ sentry\ object.}}
\DoxyCodeLine{00773\ \ \ \textcolor{comment}{//\ The\ sentry\ object\ performs\ various\ tasks,}}
\DoxyCodeLine{00774\ \ \ \textcolor{comment}{//\ such\ as\ thread\ synchronization\ and\ updating\ the\ stream\ state.}}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00776\ \ \ std::istream::sentry\ se(is,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00777\ \ \ std::streambuf\ *sb\ =\ is.rdbuf();}
\DoxyCodeLine{00778\ }
\DoxyCodeLine{00779\ \ \ \textcolor{keywordflow}{if}\ (se)\ \{}
\DoxyCodeLine{00780\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c\ =\ sb-\/>sbumpc();}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (c)\ \{}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)n'}:}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is;}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)r'}:}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sb-\/>sgetc()\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})\ sb-\/>sbumpc();}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is;}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EOF:}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Also\ handle\ the\ case\ when\ the\ last\ line\ has\ no\ line\ ending}}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (t.empty())\ is.setstate(std::ios::eofbit);}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is;}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ t\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(c);}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00795\ \ \ \ \ \}}
\DoxyCodeLine{00796\ \ \ \}}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ \textcolor{keywordflow}{return}\ is;}
\DoxyCodeLine{00799\ \}}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \textcolor{preprocessor}{\#define\ IS\_SPACE(x)\ (((x)\ ==\ '\ ')\ ||\ ((x)\ ==\ '\(\backslash\)t'))}}
\DoxyCodeLine{00802\ \textcolor{preprocessor}{\#define\ IS\_DIGIT(x)\ \(\backslash\)}}
\DoxyCodeLine{00803\ \textcolor{preprocessor}{\ \ (static\_cast<unsigned\ int>((x)\ -\/\ '0')\ <\ static\_cast<unsigned\ int>(10))}}
\DoxyCodeLine{00804\ \textcolor{preprocessor}{\#define\ IS\_NEW\_LINE(x)\ (((x)\ ==\ '\(\backslash\)r')\ ||\ ((x)\ ==\ '\(\backslash\)n')\ ||\ ((x)\ ==\ '\(\backslash\)0'))}}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00807\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::string\ toString(\textcolor{keyword}{const}\ T\ \&t)\ \{}
\DoxyCodeLine{00808\ \ \ std::stringstream\ ss;}
\DoxyCodeLine{00809\ \ \ ss\ <<\ t;}
\DoxyCodeLine{00810\ \ \ \textcolor{keywordflow}{return}\ ss.str();}
\DoxyCodeLine{00811\ \}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \textcolor{keyword}{struct\ }warning\_context\ \{}
\DoxyCodeLine{00814\ \ \ std::string\ *warn;}
\DoxyCodeLine{00815\ \ \ \textcolor{keywordtype}{size\_t}\ line\_number;}
\DoxyCodeLine{00816\ \};}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \textcolor{comment}{//\ Make\ index\ zero-\/base,\ and\ also\ support\ relative\ index.}}
\DoxyCodeLine{00819\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ fixIndex(\textcolor{keywordtype}{int}\ idx,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ *ret,\ \textcolor{keywordtype}{bool}\ allow\_zero,}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ warning\_context\ \&context)\ \{}
\DoxyCodeLine{00821\ \ \ \textcolor{keywordflow}{if}\ (!ret)\ \{}
\DoxyCodeLine{00822\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00823\ \ \ \}}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \textcolor{keywordflow}{if}\ (idx\ >\ 0)\ \{}
\DoxyCodeLine{00826\ \ \ \ \ (*ret)\ =\ idx\ -\/\ 1;}
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00828\ \ \ \}}
\DoxyCodeLine{00829\ }
\DoxyCodeLine{00830\ \ \ \textcolor{keywordflow}{if}\ (idx\ ==\ 0)\ \{}
\DoxyCodeLine{00831\ \ \ \ \ \textcolor{comment}{//\ zero\ is\ not\ allowed\ according\ to\ the\ spec.}}
\DoxyCodeLine{00832\ \ \ \ \ \textcolor{keywordflow}{if}\ (context.warn)\ \{}
\DoxyCodeLine{00833\ \ \ \ \ \ \ (*context.warn)\ +=}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}A\ zero\ value\ index\ found\ (will\ have\ a\ value\ of\ -\/1\ for\ normal\ and\ "{}}}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}tex\ indices.\ Line\ "{}}\ +}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ toString(context.line\_number)\ +\ \textcolor{stringliteral}{"{}).\(\backslash\)n"{}};}
\DoxyCodeLine{00837\ \ \ \ \ \}}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \ \ \ \ (*ret)\ =\ idx\ -\/\ 1;}
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{keywordflow}{return}\ allow\_zero;}
\DoxyCodeLine{00841\ \ \ \}}
\DoxyCodeLine{00842\ }
\DoxyCodeLine{00843\ \ \ \textcolor{keywordflow}{if}\ (idx\ <\ 0)\ \{}
\DoxyCodeLine{00844\ \ \ \ \ (*ret)\ =\ n\ +\ idx;\ \ \textcolor{comment}{//\ negative\ value\ =\ relative}}
\DoxyCodeLine{00845\ \ \ \ \ \textcolor{keywordflow}{if}\ ((*ret)\ <\ 0)\ \{}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ invalid\ relative\ index}}
\DoxyCodeLine{00847\ \ \ \ \ \}}
\DoxyCodeLine{00848\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00849\ \ \ \}}
\DoxyCodeLine{00850\ }
\DoxyCodeLine{00851\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ never\ reach\ here.}}
\DoxyCodeLine{00852\ \}}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::string\ parseString(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token)\ \{}
\DoxyCodeLine{00855\ \ \ std::string\ s;}
\DoxyCodeLine{00856\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{00857\ \ \ \textcolor{keywordtype}{size\_t}\ e\ =\ strcspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{00858\ \ \ s\ =\ std::string((*token),\ \&(*token)[e]);}
\DoxyCodeLine{00859\ \ \ (*token)\ +=\ e;}
\DoxyCodeLine{00860\ \ \ \textcolor{keywordflow}{return}\ s;}
\DoxyCodeLine{00861\ \}}
\DoxyCodeLine{00862\ }
\DoxyCodeLine{00863\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ parseInt(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token)\ \{}
\DoxyCodeLine{00864\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{00865\ \ \ \textcolor{keywordtype}{int}\ i\ =\ atoi((*token));}
\DoxyCodeLine{00866\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{00867\ \ \ \textcolor{keywordflow}{return}\ i;}
\DoxyCodeLine{00868\ \}}
\DoxyCodeLine{00869\ }
\DoxyCodeLine{00870\ \textcolor{comment}{//\ Tries\ to\ parse\ a\ floating\ point\ number\ located\ at\ s.}}
\DoxyCodeLine{00871\ \textcolor{comment}{//}}
\DoxyCodeLine{00872\ \textcolor{comment}{//\ s\_end\ should\ be\ a\ location\ in\ the\ string\ where\ reading\ should\ absolutely}}
\DoxyCodeLine{00873\ \textcolor{comment}{//\ stop.\ For\ example\ at\ the\ end\ of\ the\ string,\ to\ prevent\ buffer\ overflows.}}
\DoxyCodeLine{00874\ \textcolor{comment}{//}}
\DoxyCodeLine{00875\ \textcolor{comment}{//\ Parses\ the\ following\ EBNF\ grammar:}}
\DoxyCodeLine{00876\ \textcolor{comment}{//\ \ \ sign\ \ \ \ =\ "{}+"{}\ |\ "{}-\/"{}\ ;}}
\DoxyCodeLine{00877\ \textcolor{comment}{//\ \ \ END\ \ \ \ \ =\ ?\ anything\ not\ in\ digit\ ?}}
\DoxyCodeLine{00878\ \textcolor{comment}{//\ \ \ digit\ \ \ =\ "{}0"{}\ |\ "{}1"{}\ |\ "{}2"{}\ |\ "{}3"{}\ |\ "{}4"{}\ |\ "{}5"{}\ |\ "{}6"{}\ |\ "{}7"{}\ |\ "{}8"{}\ |\ "{}9"{}\ ;}}
\DoxyCodeLine{00879\ \textcolor{comment}{//\ \ \ integer\ =\ [sign]\ ,\ digit\ ,\ \{digit\}\ ;}}
\DoxyCodeLine{00880\ \textcolor{comment}{//\ \ \ decimal\ =\ integer\ ,\ ["{}."{}\ ,\ integer]\ ;}}
\DoxyCodeLine{00881\ \textcolor{comment}{//\ \ \ float\ \ \ =\ (\ decimal\ ,\ END\ )\ |\ (\ decimal\ ,\ ("{}E"{}\ |\ "{}e"{})\ ,\ integer\ ,\ END\ )\ ;}}
\DoxyCodeLine{00882\ \textcolor{comment}{//}}
\DoxyCodeLine{00883\ \textcolor{comment}{//\ \ Valid\ strings\ are\ for\ example:}}
\DoxyCodeLine{00884\ \textcolor{comment}{//\ \ \ -\/0\ \ +3.1417e+2\ \ -\/0.0E-\/3\ \ 1.0324\ \ -\/1.41\ \ \ 11e2}}
\DoxyCodeLine{00885\ \textcolor{comment}{//}}
\DoxyCodeLine{00886\ \textcolor{comment}{//\ If\ the\ parsing\ is\ a\ success,\ result\ is\ set\ to\ the\ parsed\ value\ and\ true}}
\DoxyCodeLine{00887\ \textcolor{comment}{//\ is\ returned.}}
\DoxyCodeLine{00888\ \textcolor{comment}{//}}
\DoxyCodeLine{00889\ \textcolor{comment}{//\ The\ function\ is\ greedy\ and\ will\ parse\ until\ any\ of\ the\ following\ happens:}}
\DoxyCodeLine{00890\ \textcolor{comment}{//\ \ -\/\ a\ non-\/conforming\ character\ is\ encountered.}}
\DoxyCodeLine{00891\ \textcolor{comment}{//\ \ -\/\ s\_end\ is\ reached.}}
\DoxyCodeLine{00892\ \textcolor{comment}{//}}
\DoxyCodeLine{00893\ \textcolor{comment}{//\ The\ following\ situations\ triggers\ a\ failure:}}
\DoxyCodeLine{00894\ \textcolor{comment}{//\ \ -\/\ s\ >=\ s\_end.}}
\DoxyCodeLine{00895\ \textcolor{comment}{//\ \ -\/\ parse\ failure.}}
\DoxyCodeLine{00896\ \textcolor{comment}{//}}
\DoxyCodeLine{00897\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ tryParseDouble(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *s,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *s\_end,\ \textcolor{keywordtype}{double}\ *result)\ \{}
\DoxyCodeLine{00898\ \ \ \textcolor{keywordflow}{if}\ (s\ >=\ s\_end)\ \{}
\DoxyCodeLine{00899\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00900\ \ \ \}}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00902\ \ \ \textcolor{keywordtype}{double}\ mantissa\ =\ 0.0;}
\DoxyCodeLine{00903\ \ \ \textcolor{comment}{//\ This\ exponent\ is\ base\ 2\ rather\ than\ 10.}}
\DoxyCodeLine{00904\ \ \ \textcolor{comment}{//\ However\ the\ exponent\ we\ parse\ is\ supposed\ to\ be\ one\ of\ ten,}}
\DoxyCodeLine{00905\ \ \ \textcolor{comment}{//\ thus\ we\ must\ take\ care\ to\ convert\ the\ exponent/and\ or\ the}}
\DoxyCodeLine{00906\ \ \ \textcolor{comment}{//\ mantissa\ to\ a\ *\ 2\string^E,\ where\ a\ is\ the\ mantissa\ and\ E\ is\ the}}
\DoxyCodeLine{00907\ \ \ \textcolor{comment}{//\ exponent.}}
\DoxyCodeLine{00908\ \ \ \textcolor{comment}{//\ To\ get\ the\ final\ double\ we\ will\ use\ ldexp,\ it\ requires\ the}}
\DoxyCodeLine{00909\ \ \ \textcolor{comment}{//\ exponent\ to\ be\ in\ base\ 2.}}
\DoxyCodeLine{00910\ \ \ \textcolor{keywordtype}{int}\ exponent\ =\ 0;}
\DoxyCodeLine{00911\ }
\DoxyCodeLine{00912\ \ \ \textcolor{comment}{//\ NOTE:\ THESE\ MUST\ BE\ DECLARED\ HERE\ SINCE\ WE\ ARE\ NOT\ ALLOWED}}
\DoxyCodeLine{00913\ \ \ \textcolor{comment}{//\ TO\ JUMP\ OVER\ DEFINITIONS.}}
\DoxyCodeLine{00914\ \ \ \textcolor{keywordtype}{char}\ sign\ =\ \textcolor{charliteral}{'+'};}
\DoxyCodeLine{00915\ \ \ \textcolor{keywordtype}{char}\ exp\_sign\ =\ \textcolor{charliteral}{'+'};}
\DoxyCodeLine{00916\ \ \ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *curr\ =\ s;}
\DoxyCodeLine{00917\ }
\DoxyCodeLine{00918\ \ \ \textcolor{comment}{//\ How\ many\ characters\ were\ read\ in\ a\ loop.}}
\DoxyCodeLine{00919\ \ \ \textcolor{keywordtype}{int}\ read\ =\ 0;}
\DoxyCodeLine{00920\ \ \ \textcolor{comment}{//\ Tells\ whether\ a\ loop\ terminated\ due\ to\ reaching\ s\_end.}}
\DoxyCodeLine{00921\ \ \ \textcolor{keywordtype}{bool}\ end\_not\_reached\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00922\ \ \ \textcolor{keywordtype}{bool}\ leading\_decimal\_dots\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00923\ }
\DoxyCodeLine{00924\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00925\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ BEGIN\ PARSING.}}
\DoxyCodeLine{00926\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{00927\ }
\DoxyCodeLine{00928\ \ \ \textcolor{comment}{//\ Find\ out\ what\ sign\ we've\ got.}}
\DoxyCodeLine{00929\ \ \ \textcolor{keywordflow}{if}\ (*curr\ ==\ \textcolor{charliteral}{'+'}\ ||\ *curr\ ==\ \textcolor{charliteral}{'-\/'})\ \{}
\DoxyCodeLine{00930\ \ \ \ \ sign\ =\ *curr;}
\DoxyCodeLine{00931\ \ \ \ \ curr++;}
\DoxyCodeLine{00932\ \ \ \ \ \textcolor{keywordflow}{if}\ ((curr\ !=\ s\_end)\ \&\&\ (*curr\ ==\ \textcolor{charliteral}{'.'}))\ \{}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \textcolor{comment}{//\ accept.\ Somethig\ like\ \`{}.7e+2`,\ \`{}-\/.5234`}}
\DoxyCodeLine{00934\ \ \ \ \ \ \ leading\_decimal\_dots\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00935\ \ \ \ \ \}}
\DoxyCodeLine{00936\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (IS\_DIGIT(*curr))\ \{\ \textcolor{comment}{/*\ Pass\ through.\ */}}
\DoxyCodeLine{00937\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (*curr\ ==\ \textcolor{charliteral}{'.'})\ \{}
\DoxyCodeLine{00938\ \ \ \ \ \textcolor{comment}{//\ accept.\ Somethig\ like\ \`{}.7e+2`,\ \`{}-\/.5234`}}
\DoxyCodeLine{00939\ \ \ \ \ leading\_decimal\_dots\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00940\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00941\ \ \ \ \ \textcolor{keywordflow}{goto}\ fail;}
\DoxyCodeLine{00942\ \ \ \}}
\DoxyCodeLine{00943\ }
\DoxyCodeLine{00944\ \ \ \textcolor{comment}{//\ Read\ the\ integer\ part.}}
\DoxyCodeLine{00945\ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{00946\ \ \ \textcolor{keywordflow}{if}\ (!leading\_decimal\_dots)\ \{}
\DoxyCodeLine{00947\ \ \ \ \ \textcolor{keywordflow}{while}\ (end\_not\_reached\ \&\&\ IS\_DIGIT(*curr))\ \{}
\DoxyCodeLine{00948\ \ \ \ \ \ \ mantissa\ *=\ 10;}
\DoxyCodeLine{00949\ \ \ \ \ \ \ mantissa\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(*curr\ -\/\ 0x30);}
\DoxyCodeLine{00950\ \ \ \ \ \ \ curr++;}
\DoxyCodeLine{00951\ \ \ \ \ \ \ read++;}
\DoxyCodeLine{00952\ \ \ \ \ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{00953\ \ \ \ \ \}}
\DoxyCodeLine{00954\ }
\DoxyCodeLine{00955\ \ \ \ \ \textcolor{comment}{//\ We\ must\ make\ sure\ we\ actually\ got\ something.}}
\DoxyCodeLine{00956\ \ \ \ \ \textcolor{keywordflow}{if}\ (read\ ==\ 0)\ \textcolor{keywordflow}{goto}\ fail;}
\DoxyCodeLine{00957\ \ \ \}}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \ \ \textcolor{comment}{//\ We\ allow\ numbers\ of\ form\ "{}\#"{},\ "{}\#\#\#"{}\ etc.}}
\DoxyCodeLine{00960\ \ \ \textcolor{keywordflow}{if}\ (!end\_not\_reached)\ \textcolor{keywordflow}{goto}\ assemble;}
\DoxyCodeLine{00961\ }
\DoxyCodeLine{00962\ \ \ \textcolor{comment}{//\ Read\ the\ decimal\ part.}}
\DoxyCodeLine{00963\ \ \ \textcolor{keywordflow}{if}\ (*curr\ ==\ \textcolor{charliteral}{'.'})\ \{}
\DoxyCodeLine{00964\ \ \ \ \ curr++;}
\DoxyCodeLine{00965\ \ \ \ \ read\ =\ 1;}
\DoxyCodeLine{00966\ \ \ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{00967\ \ \ \ \ \textcolor{keywordflow}{while}\ (end\_not\_reached\ \&\&\ IS\_DIGIT(*curr))\ \{}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ pow\_lut[]\ =\ \{}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \ 1.0,\ 0.1,\ 0.01,\ 0.001,\ 0.0001,\ 0.00001,\ 0.000001,\ 0.0000001,}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \};}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ lut\_entries\ =\ \textcolor{keyword}{sizeof}\ pow\_lut\ /\ \textcolor{keyword}{sizeof}\ pow\_lut[0];}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ Don't\ use\ powf\ here,\ it\ will\ absolutely\ murder\ precision.}}
\DoxyCodeLine{00974\ \ \ \ \ \ \ mantissa\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(*curr\ -\/\ 0x30)\ *}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (read\ <\ lut\_entries\ ?\ pow\_lut[read]\ :\ std::pow(10.0,\ -\/read));}
\DoxyCodeLine{00976\ \ \ \ \ \ \ read++;}
\DoxyCodeLine{00977\ \ \ \ \ \ \ curr++;}
\DoxyCodeLine{00978\ \ \ \ \ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{00979\ \ \ \ \ \}}
\DoxyCodeLine{00980\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (*curr\ ==\ \textcolor{charliteral}{'e'}\ ||\ *curr\ ==\ \textcolor{charliteral}{'E'})\ \{}
\DoxyCodeLine{00981\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00982\ \ \ \ \ \textcolor{keywordflow}{goto}\ assemble;}
\DoxyCodeLine{00983\ \ \ \}}
\DoxyCodeLine{00984\ }
\DoxyCodeLine{00985\ \ \ \textcolor{keywordflow}{if}\ (!end\_not\_reached)\ \textcolor{keywordflow}{goto}\ assemble;}
\DoxyCodeLine{00986\ }
\DoxyCodeLine{00987\ \ \ \textcolor{comment}{//\ Read\ the\ exponent\ part.}}
\DoxyCodeLine{00988\ \ \ \textcolor{keywordflow}{if}\ (*curr\ ==\ \textcolor{charliteral}{'e'}\ ||\ *curr\ ==\ \textcolor{charliteral}{'E'})\ \{}
\DoxyCodeLine{00989\ \ \ \ \ curr++;}
\DoxyCodeLine{00990\ \ \ \ \ \textcolor{comment}{//\ Figure\ out\ if\ a\ sign\ is\ present\ and\ if\ it\ is.}}
\DoxyCodeLine{00991\ \ \ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{00992\ \ \ \ \ \textcolor{keywordflow}{if}\ (end\_not\_reached\ \&\&\ (*curr\ ==\ \textcolor{charliteral}{'+'}\ ||\ *curr\ ==\ \textcolor{charliteral}{'-\/'}))\ \{}
\DoxyCodeLine{00993\ \ \ \ \ \ \ exp\_sign\ =\ *curr;}
\DoxyCodeLine{00994\ \ \ \ \ \ \ curr++;}
\DoxyCodeLine{00995\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (IS\_DIGIT(*curr))\ \{\ \textcolor{comment}{/*\ Pass\ through.\ */}}
\DoxyCodeLine{00996\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00997\ \ \ \ \ \ \ \textcolor{comment}{//\ Empty\ E\ is\ not\ allowed.}}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ fail;}
\DoxyCodeLine{00999\ \ \ \ \ \}}
\DoxyCodeLine{01000\ }
\DoxyCodeLine{01001\ \ \ \ \ read\ =\ 0;}
\DoxyCodeLine{01002\ \ \ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{01003\ \ \ \ \ \textcolor{keywordflow}{while}\ (end\_not\_reached\ \&\&\ IS\_DIGIT(*curr))\ \{}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \textcolor{comment}{//\ To\ avoid\ annoying\ MSVC's\ min/max\ macro\ definiton,}}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ hardcoded\ int\ max\ value}}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (exponent\ >}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ (2147483647\ /\ 10))\ \{\ \ \textcolor{comment}{//\ 2147483647\ =\ std::numeric\_limits<int>::max()}}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Integer\ overflow}}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ fail;}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01011\ \ \ \ \ \ \ exponent\ *=\ 10;}
\DoxyCodeLine{01012\ \ \ \ \ \ \ exponent\ +=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(*curr\ -\/\ 0x30);}
\DoxyCodeLine{01013\ \ \ \ \ \ \ curr++;}
\DoxyCodeLine{01014\ \ \ \ \ \ \ read++;}
\DoxyCodeLine{01015\ \ \ \ \ \ \ end\_not\_reached\ =\ (curr\ !=\ s\_end);}
\DoxyCodeLine{01016\ \ \ \ \ \}}
\DoxyCodeLine{01017\ \ \ \ \ exponent\ *=\ (exp\_sign\ ==\ \textcolor{charliteral}{'+'}\ ?\ 1\ :\ -\/1);}
\DoxyCodeLine{01018\ \ \ \ \ \textcolor{keywordflow}{if}\ (read\ ==\ 0)\ \textcolor{keywordflow}{goto}\ fail;}
\DoxyCodeLine{01019\ \ \ \}}
\DoxyCodeLine{01020\ }
\DoxyCodeLine{01021\ assemble:}
\DoxyCodeLine{01022\ \ \ *result\ =\ (sign\ ==\ \textcolor{charliteral}{'+'}\ ?\ 1\ :\ -\/1)\ *}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \ \ \ \ (exponent\ ?\ std::ldexp(mantissa\ *\ std::pow(5.0,\ exponent),\ exponent)}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ mantissa);}
\DoxyCodeLine{01025\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01026\ fail:}
\DoxyCodeLine{01027\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01028\ \}}
\DoxyCodeLine{01029\ }
\DoxyCodeLine{01030\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ real\_t\ parseReal(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ \textcolor{keywordtype}{double}\ default\_value\ =\ 0.0)\ \{}
\DoxyCodeLine{01031\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01032\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *end\ =\ (*token)\ +\ strcspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01033\ \ \ \textcolor{keywordtype}{double}\ val\ =\ default\_value;}
\DoxyCodeLine{01034\ \ \ tryParseDouble((*token),\ end,\ \&val);}
\DoxyCodeLine{01035\ \ \ real\_t\ f\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(val);}
\DoxyCodeLine{01036\ \ \ (*token)\ =\ end;}
\DoxyCodeLine{01037\ \ \ \textcolor{keywordflow}{return}\ f;}
\DoxyCodeLine{01038\ \}}
\DoxyCodeLine{01039\ }
\DoxyCodeLine{01040\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ parseReal(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ real\_t\ *out)\ \{}
\DoxyCodeLine{01041\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01042\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *end\ =\ (*token)\ +\ strcspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01043\ \ \ \textcolor{keywordtype}{double}\ val;}
\DoxyCodeLine{01044\ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ tryParseDouble((*token),\ end,\ \&val);}
\DoxyCodeLine{01045\ \ \ \textcolor{keywordflow}{if}\ (ret)\ \{}
\DoxyCodeLine{01046\ \ \ \ \ real\_t\ f\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(val);}
\DoxyCodeLine{01047\ \ \ \ \ (*out)\ =\ f;}
\DoxyCodeLine{01048\ \ \ \}}
\DoxyCodeLine{01049\ \ \ (*token)\ =\ end;}
\DoxyCodeLine{01050\ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01051\ \}}
\DoxyCodeLine{01052\ }
\DoxyCodeLine{01053\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ parseReal2(real\_t\ *x,\ real\_t\ *y,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_x\ =\ 0.0,}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_y\ =\ 0.0)\ \{}
\DoxyCodeLine{01056\ \ \ (*x)\ =\ parseReal(token,\ default\_x);}
\DoxyCodeLine{01057\ \ \ (*y)\ =\ parseReal(token,\ default\_y);}
\DoxyCodeLine{01058\ \}}
\DoxyCodeLine{01059\ }
\DoxyCodeLine{01060\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ parseReal3(real\_t\ *x,\ real\_t\ *y,\ real\_t\ *z,}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_x\ =\ 0.0,}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_y\ =\ 0.0,}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_z\ =\ 0.0)\ \{}
\DoxyCodeLine{01064\ \ \ (*x)\ =\ parseReal(token,\ default\_x);}
\DoxyCodeLine{01065\ \ \ (*y)\ =\ parseReal(token,\ default\_y);}
\DoxyCodeLine{01066\ \ \ (*z)\ =\ parseReal(token,\ default\_z);}
\DoxyCodeLine{01067\ \}}
\DoxyCodeLine{01068\ }
\DoxyCodeLine{01069\ \textcolor{preprocessor}{\#if\ 0\ \ }\textcolor{comment}{//\ not\ used}}
\DoxyCodeLine{01070\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ parseV(real\_t\ *x,\ real\_t\ *y,\ real\_t\ *z,\ real\_t\ *w,}
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_x\ =\ 0.0,}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_y\ =\ 0.0,}
\DoxyCodeLine{01073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_z\ =\ 0.0,}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_w\ =\ 1.0)\ \{}
\DoxyCodeLine{01075\ \ \ (*x)\ =\ parseReal(token,\ default\_x);}
\DoxyCodeLine{01076\ \ \ (*y)\ =\ parseReal(token,\ default\_y);}
\DoxyCodeLine{01077\ \ \ (*z)\ =\ parseReal(token,\ default\_z);}
\DoxyCodeLine{01078\ \ \ (*w)\ =\ parseReal(token,\ default\_w);}
\DoxyCodeLine{01079\ \}}
\DoxyCodeLine{01080\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01081\ }
\DoxyCodeLine{01082\ \textcolor{comment}{//\ Extension:\ parse\ vertex\ with\ colors(6\ items)}}
\DoxyCodeLine{01083\ \textcolor{comment}{//\ Return\ 3:\ xyz,\ 4:\ xyzw,\ 6:\ xyzrgb}}
\DoxyCodeLine{01084\ \textcolor{comment}{//\ \`{}r`:\ red(case\ 6)\ or\ [w](case\ 4)}}
\DoxyCodeLine{01085\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ parseVertexWithColor(real\_t\ *x,\ real\_t\ *y,\ real\_t\ *z,}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ *r,\ real\_t\ *g,\ real\_t\ *b,}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_x\ =\ 0.0,}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_y\ =\ 0.0,}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ default\_z\ =\ 0.0)\ \{}
\DoxyCodeLine{01091\ \ \ \textcolor{comment}{//\ TODO:\ Check\ error}}
\DoxyCodeLine{01092\ \ \ (*x)\ =\ parseReal(token,\ default\_x);}
\DoxyCodeLine{01093\ \ \ (*y)\ =\ parseReal(token,\ default\_y);}
\DoxyCodeLine{01094\ \ \ (*z)\ =\ parseReal(token,\ default\_z);}
\DoxyCodeLine{01095\ }
\DoxyCodeLine{01096\ \ \ \textcolor{comment}{//\ -\/\ 4\ components(x,\ y,\ z,\ w)\ ot\ 6\ components}}
\DoxyCodeLine{01097\ \ \ \textcolor{keywordtype}{bool}\ has\_r\ =\ parseReal(token,\ r);}
\DoxyCodeLine{01098\ }
\DoxyCodeLine{01099\ \ \ \textcolor{keywordflow}{if}\ (!has\_r)\ \{}
\DoxyCodeLine{01100\ \ \ \ \ (*r)\ =\ (*g)\ =\ (*b)\ =\ 1.0;}
\DoxyCodeLine{01101\ \ \ \ \ \textcolor{keywordflow}{return}\ 3;}
\DoxyCodeLine{01102\ \ \ \}}
\DoxyCodeLine{01103\ }
\DoxyCodeLine{01104\ \ \ \textcolor{keywordtype}{bool}\ has\_g\ =\ parseReal(token,\ g);}
\DoxyCodeLine{01105\ }
\DoxyCodeLine{01106\ \ \ \textcolor{keywordflow}{if}\ (!has\_g)\ \{}
\DoxyCodeLine{01107\ \ \ \ \ (*g)\ =\ (*b)\ =\ 1.0;}
\DoxyCodeLine{01108\ \ \ \ \ \textcolor{keywordflow}{return}\ 4;}
\DoxyCodeLine{01109\ \ \ \}}
\DoxyCodeLine{01110\ }
\DoxyCodeLine{01111\ \ \ \textcolor{keywordtype}{bool}\ has\_b\ =\ parseReal(token,\ b);}
\DoxyCodeLine{01112\ }
\DoxyCodeLine{01113\ \ \ \textcolor{keywordflow}{if}\ (!has\_b)\ \{}
\DoxyCodeLine{01114\ \ \ \ \ (*r)\ =\ (*g)\ =\ (*b)\ =\ 1.0;}
\DoxyCodeLine{01115\ \ \ \ \ \textcolor{keywordflow}{return}\ 3;\ \ \textcolor{comment}{//\ treated\ as\ xyz}}
\DoxyCodeLine{01116\ \ \ \}}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \ \ \textcolor{keywordflow}{return}\ 6;}
\DoxyCodeLine{01119\ \}}
\DoxyCodeLine{01120\ }
\DoxyCodeLine{01121\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ parseOnOff(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ \textcolor{keywordtype}{bool}\ default\_value\ =\ \textcolor{keyword}{true})\ \{}
\DoxyCodeLine{01122\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01123\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *end\ =\ (*token)\ +\ strcspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01124\ }
\DoxyCodeLine{01125\ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ default\_value;}
\DoxyCodeLine{01126\ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}on"{}},\ 2)))\ \{}
\DoxyCodeLine{01127\ \ \ \ \ ret\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01128\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}off"{}},\ 3)))\ \{}
\DoxyCodeLine{01129\ \ \ \ \ ret\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01130\ \ \ \}}
\DoxyCodeLine{01131\ }
\DoxyCodeLine{01132\ \ \ (*token)\ =\ end;}
\DoxyCodeLine{01133\ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01134\ \}}
\DoxyCodeLine{01135\ }
\DoxyCodeLine{01136\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ texture\_type\_t\ parseTextureType(}
\DoxyCodeLine{01137\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ texture\_type\_t\ default\_value\ =\ TEXTURE\_TYPE\_NONE)\ \{}
\DoxyCodeLine{01138\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01139\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *end\ =\ (*token)\ +\ strcspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01140\ \ \ texture\_type\_t\ ty\ =\ default\_value;}
\DoxyCodeLine{01141\ }
\DoxyCodeLine{01142\ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}cube\_top"{}},\ strlen(\textcolor{stringliteral}{"{}cube\_top"{}}))))\ \{}
\DoxyCodeLine{01143\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_CUBE\_TOP;}
\DoxyCodeLine{01144\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}cube\_bottom"{}},\ strlen(\textcolor{stringliteral}{"{}cube\_bottom"{}}))))\ \{}
\DoxyCodeLine{01145\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_CUBE\_BOTTOM;}
\DoxyCodeLine{01146\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}cube\_left"{}},\ strlen(\textcolor{stringliteral}{"{}cube\_left"{}}))))\ \{}
\DoxyCodeLine{01147\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_CUBE\_LEFT;}
\DoxyCodeLine{01148\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}cube\_right"{}},\ strlen(\textcolor{stringliteral}{"{}cube\_right"{}}))))\ \{}
\DoxyCodeLine{01149\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_CUBE\_RIGHT;}
\DoxyCodeLine{01150\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}cube\_front"{}},\ strlen(\textcolor{stringliteral}{"{}cube\_front"{}}))))\ \{}
\DoxyCodeLine{01151\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_CUBE\_FRONT;}
\DoxyCodeLine{01152\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}cube\_back"{}},\ strlen(\textcolor{stringliteral}{"{}cube\_back"{}}))))\ \{}
\DoxyCodeLine{01153\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_CUBE\_BACK;}
\DoxyCodeLine{01154\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp((*token),\ \textcolor{stringliteral}{"{}sphere"{}},\ strlen(\textcolor{stringliteral}{"{}sphere"{}}))))\ \{}
\DoxyCodeLine{01155\ \ \ \ \ ty\ =\ TEXTURE\_TYPE\_SPHERE;}
\DoxyCodeLine{01156\ \ \ \}}
\DoxyCodeLine{01157\ }
\DoxyCodeLine{01158\ \ \ (*token)\ =\ end;}
\DoxyCodeLine{01159\ \ \ \textcolor{keywordflow}{return}\ ty;}
\DoxyCodeLine{01160\ \}}
\DoxyCodeLine{01161\ }
\DoxyCodeLine{01162\ \textcolor{keyword}{static}\ tag\_sizes\ parseTagTriple(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token)\ \{}
\DoxyCodeLine{01163\ \ \ tag\_sizes\ ts;}
\DoxyCodeLine{01164\ }
\DoxyCodeLine{01165\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01166\ \ \ ts.num\_ints\ =\ atoi((*token));}
\DoxyCodeLine{01167\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01168\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01169\ \ \ \ \ \textcolor{keywordflow}{return}\ ts;}
\DoxyCodeLine{01170\ \ \ \}}
\DoxyCodeLine{01171\ }
\DoxyCodeLine{01172\ \ \ (*token)++;\ \ \textcolor{comment}{//\ Skip\ '/'}}
\DoxyCodeLine{01173\ }
\DoxyCodeLine{01174\ \ \ (*token)\ +=\ strspn((*token),\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01175\ \ \ ts.num\_reals\ =\ atoi((*token));}
\DoxyCodeLine{01176\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01177\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01178\ \ \ \ \ \textcolor{keywordflow}{return}\ ts;}
\DoxyCodeLine{01179\ \ \ \}}
\DoxyCodeLine{01180\ \ \ (*token)++;\ \ \textcolor{comment}{//\ Skip\ '/'}}
\DoxyCodeLine{01181\ }
\DoxyCodeLine{01182\ \ \ ts.num\_strings\ =\ parseInt(token);}
\DoxyCodeLine{01183\ }
\DoxyCodeLine{01184\ \ \ \textcolor{keywordflow}{return}\ ts;}
\DoxyCodeLine{01185\ \}}
\DoxyCodeLine{01186\ }
\DoxyCodeLine{01187\ \textcolor{comment}{//\ Parse\ triples\ with\ index\ offsets:\ i,\ i/j/k,\ i//k,\ i/j}}
\DoxyCodeLine{01188\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ parseTriple(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token,\ \textcolor{keywordtype}{int}\ vsize,\ \textcolor{keywordtype}{int}\ vnsize,\ \textcolor{keywordtype}{int}\ vtsize,}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ *ret,\ \textcolor{keyword}{const}\ warning\_context\ \&context)\ \{}
\DoxyCodeLine{01190\ \ \ \textcolor{keywordflow}{if}\ (!ret)\ \{}
\DoxyCodeLine{01191\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01192\ \ \ \}}
\DoxyCodeLine{01193\ }
\DoxyCodeLine{01194\ \ \ vertex\_index\_t\ vi(-\/1);}
\DoxyCodeLine{01195\ }
\DoxyCodeLine{01196\ \ \ \textcolor{keywordflow}{if}\ (!fixIndex(atoi((*token)),\ vsize,\ \&vi.v\_idx,\ \textcolor{keyword}{false},\ context))\ \{}
\DoxyCodeLine{01197\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01198\ \ \ \}}
\DoxyCodeLine{01199\ }
\DoxyCodeLine{01200\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01201\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01202\ \ \ \ \ (*ret)\ =\ vi;}
\DoxyCodeLine{01203\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01204\ \ \ \}}
\DoxyCodeLine{01205\ \ \ (*token)++;}
\DoxyCodeLine{01206\ }
\DoxyCodeLine{01207\ \ \ \textcolor{comment}{//\ i//k}}
\DoxyCodeLine{01208\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ ==\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01209\ \ \ \ \ (*token)++;}
\DoxyCodeLine{01210\ \ \ \ \ \textcolor{keywordflow}{if}\ (!fixIndex(atoi((*token)),\ vnsize,\ \&vi.vn\_idx,\ \textcolor{keyword}{true},\ context))\ \{}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01212\ \ \ \ \ \}}
\DoxyCodeLine{01213\ \ \ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01214\ \ \ \ \ (*ret)\ =\ vi;}
\DoxyCodeLine{01215\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01216\ \ \ \}}
\DoxyCodeLine{01217\ }
\DoxyCodeLine{01218\ \ \ \textcolor{comment}{//\ i/j/k\ or\ i/j}}
\DoxyCodeLine{01219\ \ \ \textcolor{keywordflow}{if}\ (!fixIndex(atoi((*token)),\ vtsize,\ \&vi.vt\_idx,\ \textcolor{keyword}{true},\ context))\ \{}
\DoxyCodeLine{01220\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01221\ \ \ \}}
\DoxyCodeLine{01222\ }
\DoxyCodeLine{01223\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01224\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01225\ \ \ \ \ (*ret)\ =\ vi;}
\DoxyCodeLine{01226\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01227\ \ \ \}}
\DoxyCodeLine{01228\ }
\DoxyCodeLine{01229\ \ \ \textcolor{comment}{//\ i/j/k}}
\DoxyCodeLine{01230\ \ \ (*token)++;\ \ \textcolor{comment}{//\ skip\ '/'}}
\DoxyCodeLine{01231\ \ \ \textcolor{keywordflow}{if}\ (!fixIndex(atoi((*token)),\ vnsize,\ \&vi.vn\_idx,\ \textcolor{keyword}{true},\ context))\ \{}
\DoxyCodeLine{01232\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01233\ \ \ \}}
\DoxyCodeLine{01234\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ (*ret)\ =\ vi;}
\DoxyCodeLine{01237\ }
\DoxyCodeLine{01238\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01239\ \}}
\DoxyCodeLine{01240\ }
\DoxyCodeLine{01241\ \textcolor{comment}{//\ Parse\ raw\ triples:\ i,\ i/j/k,\ i//k,\ i/j}}
\DoxyCodeLine{01242\ \textcolor{keyword}{static}\ vertex\_index\_t\ parseRawTriple(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **token)\ \{}
\DoxyCodeLine{01243\ \ \ vertex\_index\_t\ vi(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(0));\ \ \textcolor{comment}{//\ 0\ is\ an\ invalid\ index\ in\ OBJ}}
\DoxyCodeLine{01244\ }
\DoxyCodeLine{01245\ \ \ vi.v\_idx\ =\ atoi((*token));}
\DoxyCodeLine{01246\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01247\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01248\ \ \ \ \ \textcolor{keywordflow}{return}\ vi;}
\DoxyCodeLine{01249\ \ \ \}}
\DoxyCodeLine{01250\ \ \ (*token)++;}
\DoxyCodeLine{01251\ }
\DoxyCodeLine{01252\ \ \ \textcolor{comment}{//\ i//k}}
\DoxyCodeLine{01253\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ ==\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01254\ \ \ \ \ (*token)++;}
\DoxyCodeLine{01255\ \ \ \ \ vi.vn\_idx\ =\ atoi((*token));}
\DoxyCodeLine{01256\ \ \ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01257\ \ \ \ \ \textcolor{keywordflow}{return}\ vi;}
\DoxyCodeLine{01258\ \ \ \}}
\DoxyCodeLine{01259\ }
\DoxyCodeLine{01260\ \ \ \textcolor{comment}{//\ i/j/k\ or\ i/j}}
\DoxyCodeLine{01261\ \ \ vi.vt\_idx\ =\ atoi((*token));}
\DoxyCodeLine{01262\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01263\ \ \ \textcolor{keywordflow}{if}\ ((*token)[0]\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{01264\ \ \ \ \ \textcolor{keywordflow}{return}\ vi;}
\DoxyCodeLine{01265\ \ \ \}}
\DoxyCodeLine{01266\ }
\DoxyCodeLine{01267\ \ \ \textcolor{comment}{//\ i/j/k}}
\DoxyCodeLine{01268\ \ \ (*token)++;\ \ \textcolor{comment}{//\ skip\ '/'}}
\DoxyCodeLine{01269\ \ \ vi.vn\_idx\ =\ atoi((*token));}
\DoxyCodeLine{01270\ \ \ (*token)\ +=\ strcspn((*token),\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01271\ \ \ \textcolor{keywordflow}{return}\ vi;}
\DoxyCodeLine{01272\ \}}
\DoxyCodeLine{01273\ }
\DoxyCodeLine{01274\ \textcolor{keywordtype}{bool}\ ParseTextureNameAndOption(std::string\ *texname,\ texture\_option\_t\ *texopt,}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *linebuf)\ \{}
\DoxyCodeLine{01276\ \ \ \textcolor{comment}{//\ @todo\ \{\ write\ more\ robust\ lexer\ and\ parser.\ \}}}
\DoxyCodeLine{01277\ \ \ \textcolor{keywordtype}{bool}\ found\_texname\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01278\ \ \ std::string\ texture\_name;}
\DoxyCodeLine{01279\ }
\DoxyCodeLine{01280\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *token\ =\ linebuf;\ \ \textcolor{comment}{//\ Assume\ line\ ends\ with\ NULL}}
\DoxyCodeLine{01281\ }
\DoxyCodeLine{01282\ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE((*token)))\ \{}
\DoxyCodeLine{01283\ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});\ \ \textcolor{comment}{//\ skip\ space}}
\DoxyCodeLine{01284\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/blendu"{}},\ 7))\ \&\&\ IS\_SPACE((token[7])))\ \{}
\DoxyCodeLine{01285\ \ \ \ \ \ \ token\ +=\ 8;}
\DoxyCodeLine{01286\ \ \ \ \ \ \ texopt-\/>blendu\ =\ parseOnOff(\&token,\ \textcolor{comment}{/*\ default\ */}\ \textcolor{keyword}{true});}
\DoxyCodeLine{01287\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/blendv"{}},\ 7))\ \&\&\ IS\_SPACE((token[7])))\ \{}
\DoxyCodeLine{01288\ \ \ \ \ \ \ token\ +=\ 8;}
\DoxyCodeLine{01289\ \ \ \ \ \ \ texopt-\/>blendv\ =\ parseOnOff(\&token,\ \textcolor{comment}{/*\ default\ */}\ \textcolor{keyword}{true});}
\DoxyCodeLine{01290\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/clamp"{}},\ 6))\ \&\&\ IS\_SPACE((token[6])))\ \{}
\DoxyCodeLine{01291\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{01292\ \ \ \ \ \ \ texopt-\/>clamp\ =\ parseOnOff(\&token,\ \textcolor{comment}{/*\ default\ */}\ \textcolor{keyword}{true});}
\DoxyCodeLine{01293\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/boost"{}},\ 6))\ \&\&\ IS\_SPACE((token[6])))\ \{}
\DoxyCodeLine{01294\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{01295\ \ \ \ \ \ \ texopt-\/>sharpness\ =\ parseReal(\&token,\ 1.0);}
\DoxyCodeLine{01296\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/bm"{}},\ 3))\ \&\&\ IS\_SPACE((token[3])))\ \{}
\DoxyCodeLine{01297\ \ \ \ \ \ \ token\ +=\ 4;}
\DoxyCodeLine{01298\ \ \ \ \ \ \ texopt-\/>bump\_multiplier\ =\ parseReal(\&token,\ 1.0);}
\DoxyCodeLine{01299\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/o"{}},\ 2))\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{01300\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{01301\ \ \ \ \ \ \ parseReal3(\&(texopt-\/>origin\_offset[0]),\ \&(texopt-\/>origin\_offset[1]),}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(texopt-\/>origin\_offset[2]),\ \&token);}
\DoxyCodeLine{01303\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/s"{}},\ 2))\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{01304\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{01305\ \ \ \ \ \ \ parseReal3(\&(texopt-\/>scale[0]),\ \&(texopt-\/>scale[1]),\ \&(texopt-\/>scale[2]),}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&token,\ 1.0,\ 1.0,\ 1.0);}
\DoxyCodeLine{01307\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/t"{}},\ 2))\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{01308\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{01309\ \ \ \ \ \ \ parseReal3(\&(texopt-\/>turbulence[0]),\ \&(texopt-\/>turbulence[1]),}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(texopt-\/>turbulence[2]),\ \&token);}
\DoxyCodeLine{01311\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/type"{}},\ 5))\ \&\&\ IS\_SPACE((token[5])))\ \{}
\DoxyCodeLine{01312\ \ \ \ \ \ \ token\ +=\ 5;}
\DoxyCodeLine{01313\ \ \ \ \ \ \ texopt-\/>type\ =\ parseTextureType((\&token),\ TEXTURE\_TYPE\_NONE);}
\DoxyCodeLine{01314\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/texres"{}},\ 7))\ \&\&\ IS\_SPACE((token[7])))\ \{}
\DoxyCodeLine{01315\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \textcolor{comment}{//\ TODO(syoyo):\ Check\ if\ arg\ is\ int\ type.}}
\DoxyCodeLine{01317\ \ \ \ \ \ \ texopt-\/>texture\_resolution\ =\ parseInt(\&token);}
\DoxyCodeLine{01318\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/imfchan"{}},\ 8))\ \&\&\ IS\_SPACE((token[8])))\ \{}
\DoxyCodeLine{01319\ \ \ \ \ \ \ token\ +=\ 9;}
\DoxyCodeLine{01320\ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *end\ =\ token\ +\ strcspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((end\ -\/\ token)\ ==\ 1)\ \{\ \ \textcolor{comment}{//\ Assume\ one\ char\ for\ -\/imfchan}}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ texopt-\/>imfchan\ =\ (*token);}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01325\ \ \ \ \ \ \ token\ =\ end;}
\DoxyCodeLine{01326\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/mm"{}},\ 3))\ \&\&\ IS\_SPACE((token[3])))\ \{}
\DoxyCodeLine{01327\ \ \ \ \ \ \ token\ +=\ 4;}
\DoxyCodeLine{01328\ \ \ \ \ \ \ parseReal2(\&(texopt-\/>brightness),\ \&(texopt-\/>contrast),\ \&token,\ 0.0,\ 1.0);}
\DoxyCodeLine{01329\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}-\/colorspace"{}},\ 11))\ \&\&}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IS\_SPACE((token[11])))\ \{}
\DoxyCodeLine{01331\ \ \ \ \ \ \ token\ +=\ 12;}
\DoxyCodeLine{01332\ \ \ \ \ \ \ texopt-\/>colorspace\ =\ parseString(\&token);}
\DoxyCodeLine{01333\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01334\ \textcolor{comment}{//\ Assume\ texture\ filename}}
\DoxyCodeLine{01335\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ strcspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});\ \ \textcolor{comment}{//\ untile\ next\ space}}
\DoxyCodeLine{01337\ \ \ \ \ \ \ texture\_name\ =\ std::string(token,\ token\ +\ len);}
\DoxyCodeLine{01338\ \ \ \ \ \ \ token\ +=\ len;}
\DoxyCodeLine{01339\ }
\DoxyCodeLine{01340\ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});\ \ \textcolor{comment}{//\ skip\ space}}
\DoxyCodeLine{01341\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ filename\ until\ line\ end\ to\ parse\ filename\ containing\ whitespace}}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \textcolor{comment}{//\ TODO(syoyo):\ Support\ parsing\ texture\ option\ flag\ after\ the\ filename.}}
\DoxyCodeLine{01344\ \ \ \ \ \ \ texture\_name\ =\ std::string(token);}
\DoxyCodeLine{01345\ \ \ \ \ \ \ token\ +=\ texture\_name.length();}
\DoxyCodeLine{01346\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01347\ }
\DoxyCodeLine{01348\ \ \ \ \ \ \ found\_texname\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01349\ \ \ \ \ \}}
\DoxyCodeLine{01350\ \ \ \}}
\DoxyCodeLine{01351\ }
\DoxyCodeLine{01352\ \ \ \textcolor{keywordflow}{if}\ (found\_texname)\ \{}
\DoxyCodeLine{01353\ \ \ \ \ (*texname)\ =\ texture\_name;}
\DoxyCodeLine{01354\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01355\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01356\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01357\ \ \ \}}
\DoxyCodeLine{01358\ \}}
\DoxyCodeLine{01359\ }
\DoxyCodeLine{01360\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ InitTexOpt(texture\_option\_t\ *texopt,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_bump)\ \{}
\DoxyCodeLine{01361\ \ \ \textcolor{keywordflow}{if}\ (is\_bump)\ \{}
\DoxyCodeLine{01362\ \ \ \ \ texopt-\/>imfchan\ =\ \textcolor{charliteral}{'l'};}
\DoxyCodeLine{01363\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01364\ \ \ \ \ texopt-\/>imfchan\ =\ \textcolor{charliteral}{'m'};}
\DoxyCodeLine{01365\ \ \ \}}
\DoxyCodeLine{01366\ \ \ texopt-\/>bump\_multiplier\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01367\ \ \ texopt-\/>clamp\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01368\ \ \ texopt-\/>blendu\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01369\ \ \ texopt-\/>blendv\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01370\ \ \ texopt-\/>sharpness\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01371\ \ \ texopt-\/>brightness\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01372\ \ \ texopt-\/>contrast\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01373\ \ \ texopt-\/>origin\_offset[0]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01374\ \ \ texopt-\/>origin\_offset[1]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01375\ \ \ texopt-\/>origin\_offset[2]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01376\ \ \ texopt-\/>scale[0]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01377\ \ \ texopt-\/>scale[1]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01378\ \ \ texopt-\/>scale[2]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01379\ \ \ texopt-\/>turbulence[0]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01380\ \ \ texopt-\/>turbulence[1]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01381\ \ \ texopt-\/>turbulence[2]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01382\ \ \ texopt-\/>texture\_resolution\ =\ -\/1;}
\DoxyCodeLine{01383\ \ \ texopt-\/>type\ =\ TEXTURE\_TYPE\_NONE;}
\DoxyCodeLine{01384\ \}}
\DoxyCodeLine{01385\ }
\DoxyCodeLine{01386\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ InitMaterial(material\_t\ *material)\ \{}
\DoxyCodeLine{01387\ \ \ InitTexOpt(\&material-\/>ambient\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01388\ \ \ InitTexOpt(\&material-\/>diffuse\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01389\ \ \ InitTexOpt(\&material-\/>specular\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01390\ \ \ InitTexOpt(\&material-\/>specular\_highlight\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01391\ \ \ InitTexOpt(\&material-\/>bump\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{true});}
\DoxyCodeLine{01392\ \ \ InitTexOpt(\&material-\/>displacement\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01393\ \ \ InitTexOpt(\&material-\/>alpha\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01394\ \ \ InitTexOpt(\&material-\/>reflection\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01395\ \ \ InitTexOpt(\&material-\/>roughness\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01396\ \ \ InitTexOpt(\&material-\/>metallic\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01397\ \ \ InitTexOpt(\&material-\/>sheen\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01398\ \ \ InitTexOpt(\&material-\/>emissive\_texopt,\ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});}
\DoxyCodeLine{01399\ \ \ InitTexOpt(\&material-\/>normal\_texopt,}
\DoxyCodeLine{01400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ is\_bump\ */}\ \textcolor{keyword}{false});\ \ \textcolor{comment}{//\ @fixme\ \{\ is\_bump\ will\ be\ true?\ \}}}
\DoxyCodeLine{01401\ \ \ material-\/>name\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01402\ \ \ material-\/>ambient\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01403\ \ \ material-\/>diffuse\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01404\ \ \ material-\/>specular\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01405\ \ \ material-\/>specular\_highlight\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01406\ \ \ material-\/>bump\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01407\ \ \ material-\/>displacement\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01408\ \ \ material-\/>reflection\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01409\ \ \ material-\/>alpha\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01410\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 3;\ i++)\ \{}
\DoxyCodeLine{01411\ \ \ \ \ material-\/>ambient[i]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01412\ \ \ \ \ material-\/>diffuse[i]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01413\ \ \ \ \ material-\/>specular[i]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01414\ \ \ \ \ material-\/>transmittance[i]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01415\ \ \ \ \ material-\/>emission[i]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01416\ \ \ \}}
\DoxyCodeLine{01417\ \ \ material-\/>illum\ =\ 0;}
\DoxyCodeLine{01418\ \ \ material-\/>dissolve\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01419\ \ \ material-\/>shininess\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01420\ \ \ material-\/>ior\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0);}
\DoxyCodeLine{01421\ }
\DoxyCodeLine{01422\ \ \ material-\/>roughness\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01423\ \ \ material-\/>metallic\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01424\ \ \ material-\/>sheen\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01425\ \ \ material-\/>clearcoat\_thickness\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01426\ \ \ material-\/>clearcoat\_roughness\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01427\ \ \ material-\/>anisotropy\_rotation\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01428\ \ \ material-\/>anisotropy\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01429\ \ \ material-\/>roughness\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01430\ \ \ material-\/>metallic\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01431\ \ \ material-\/>sheen\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01432\ \ \ material-\/>emissive\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01433\ \ \ material-\/>normal\_texname\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01434\ }
\DoxyCodeLine{01435\ \ \ material-\/>unknown\_parameter.clear();}
\DoxyCodeLine{01436\ \}}
\DoxyCodeLine{01437\ }
\DoxyCodeLine{01438\ \textcolor{comment}{//\ code\ from\ https://wrf.ecse.rpi.edu//Research/Short\_Notes/pnpoly.html}}
\DoxyCodeLine{01439\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01440\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ pnpoly(\textcolor{keywordtype}{int}\ nvert,\ T\ *vertx,\ T\ *verty,\ T\ testx,\ T\ testy)\ \{}
\DoxyCodeLine{01441\ \ \ \textcolor{keywordtype}{int}\ i,\ j,\ c\ =\ 0;}
\DoxyCodeLine{01442\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0,\ j\ =\ nvert\ -\/\ 1;\ i\ <\ nvert;\ j\ =\ i++)\ \{}
\DoxyCodeLine{01443\ \ \ \ \ \textcolor{keywordflow}{if}\ (((verty[i]\ >\ testy)\ !=\ (verty[j]\ >\ testy))\ \&\&}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ (testx\ <}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ \ (vertx[j]\ -\/\ vertx[i])\ *\ (testy\ -\/\ verty[i])\ /\ (verty[j]\ -\/\ verty[i])\ +}
\DoxyCodeLine{01446\ \ \ \ \ \ \ \ \ \ \ \ \ \ vertx[i]))}
\DoxyCodeLine{01447\ \ \ \ \ \ \ c\ =\ !c;}
\DoxyCodeLine{01448\ \ \ \}}
\DoxyCodeLine{01449\ \ \ \textcolor{keywordflow}{return}\ c;}
\DoxyCodeLine{01450\ \}}
\DoxyCodeLine{01451\ }
\DoxyCodeLine{01452\ \textcolor{keyword}{struct\ }TinyObjPoint\ \{}
\DoxyCodeLine{01453\ \ \ real\_t\ x,\ y,\ z;}
\DoxyCodeLine{01454\ \ \ TinyObjPoint()\ :\ x(0),\ y(0),\ z(0)\ \{\}}
\DoxyCodeLine{01455\ \ \ TinyObjPoint(real\_t\ x\_,\ real\_t\ y\_,\ real\_t\ z\_)\ :\ x(x\_),\ y(y\_),\ z(z\_)\ \{\}}
\DoxyCodeLine{01456\ \};}
\DoxyCodeLine{01457\ }
\DoxyCodeLine{01458\ \textcolor{keyword}{inline}\ TinyObjPoint\ cross(\textcolor{keyword}{const}\ TinyObjPoint\ \&v1,\ \textcolor{keyword}{const}\ TinyObjPoint\ \&v2)\ \{}
\DoxyCodeLine{01459\ \ \ \textcolor{keywordflow}{return}\ TinyObjPoint(v1.y\ *\ v2.z\ -\/\ v1.z\ *\ v2.y,\ v1.z\ *\ v2.x\ -\/\ v1.x\ *\ v2.z,}
\DoxyCodeLine{01460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v1.x\ *\ v2.y\ -\/\ v1.y\ *\ v2.x);}
\DoxyCodeLine{01461\ \}}
\DoxyCodeLine{01462\ }
\DoxyCodeLine{01463\ \textcolor{keyword}{inline}\ real\_t\ dot(\textcolor{keyword}{const}\ TinyObjPoint\ \&v1,\ \textcolor{keyword}{const}\ TinyObjPoint\ \&v2)\ \{}
\DoxyCodeLine{01464\ \ \ \textcolor{keywordflow}{return}\ (v1.x\ *\ v2.x\ +\ v1.y\ *\ v2.y\ +\ v1.z\ *\ v2.z);}
\DoxyCodeLine{01465\ \}}
\DoxyCodeLine{01466\ }
\DoxyCodeLine{01467\ \textcolor{keyword}{inline}\ real\_t\ GetLength(TinyObjPoint\ \&e)\ \{}
\DoxyCodeLine{01468\ \ \ \textcolor{keywordflow}{return}\ std::sqrt(e.x\ *\ e.x\ +\ e.y\ *\ e.y\ +\ e.z\ *\ e.z);}
\DoxyCodeLine{01469\ \}}
\DoxyCodeLine{01470\ }
\DoxyCodeLine{01471\ \textcolor{keyword}{inline}\ TinyObjPoint\ Normalize(TinyObjPoint\ e)\ \{}
\DoxyCodeLine{01472\ \ \ real\_t\ inv\_length\ =\ real\_t(1)\ /\ GetLength(e);}
\DoxyCodeLine{01473\ \ \ \textcolor{keywordflow}{return}\ TinyObjPoint(e.x\ *\ inv\_length,\ e.y\ *\ inv\_length,\ e.z\ *\ inv\_length);}
\DoxyCodeLine{01474\ \}}
\DoxyCodeLine{01475\ }
\DoxyCodeLine{01476\ \textcolor{keyword}{inline}\ TinyObjPoint\ WorldToLocal(\textcolor{keyword}{const}\ TinyObjPoint\ \&a,\ \textcolor{keyword}{const}\ TinyObjPoint\ \&u,}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ TinyObjPoint\ \&v,\ \textcolor{keyword}{const}\ TinyObjPoint\ \&w)\ \{}
\DoxyCodeLine{01478\ \ \ \textcolor{keywordflow}{return}\ TinyObjPoint(dot(a,\ u),\ dot(a,\ v),\ dot(a,\ w));}
\DoxyCodeLine{01479\ \}}
\DoxyCodeLine{01480\ }
\DoxyCodeLine{01481\ \textcolor{comment}{//\ TODO(syoyo):\ refactor\ function.}}
\DoxyCodeLine{01482\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ exportGroupsToShape(shape\_t\ *shape,\ \textcolor{keyword}{const}\ PrimGroup\ \&prim\_group,}
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<tag\_t>\ \&tags,}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ material\_id,\ \textcolor{keyword}{const}\ std::string\ \&name,}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ triangulate,\ \textcolor{keyword}{const}\ std::vector<real\_t>\ \&v,}
\DoxyCodeLine{01486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warn)\ \{}
\DoxyCodeLine{01487\ \ \ \textcolor{keywordflow}{if}\ (prim\_group.IsEmpty())\ \{}
\DoxyCodeLine{01488\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01489\ \ \ \}}
\DoxyCodeLine{01490\ }
\DoxyCodeLine{01491\ \ \ shape-\/>name\ =\ name;}
\DoxyCodeLine{01492\ }
\DoxyCodeLine{01493\ \ \ \textcolor{comment}{//\ polygon}}
\DoxyCodeLine{01494\ \ \ \textcolor{keywordflow}{if}\ (!prim\_group.faceGroup.empty())\ \{}
\DoxyCodeLine{01495\ \ \ \ \ \textcolor{comment}{//\ Flatten\ vertices\ and\ indices}}
\DoxyCodeLine{01496\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ prim\_group.faceGroup.size();\ i++)\ \{}
\DoxyCodeLine{01497\ \ \ \ \ \ \ \textcolor{keyword}{const}\ face\_t\ \&face\ =\ prim\_group.faceGroup[i];}
\DoxyCodeLine{01498\ }
\DoxyCodeLine{01499\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ npolys\ =\ face.vertex\_indices.size();}
\DoxyCodeLine{01500\ }
\DoxyCodeLine{01501\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (npolys\ <\ 3)\ \{}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Face\ must\ have\ 3+\ vertices.}}
\DoxyCodeLine{01503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ \textcolor{stringliteral}{"{}Degenerated\ face\ found\(\backslash\)n."{}};}
\DoxyCodeLine{01505\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01508\ }
\DoxyCodeLine{01509\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (triangulate\ \&\&\ npolys\ !=\ 3)\ \{}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (npolys\ ==\ 4)\ \{}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i0\ =\ face.vertex\_indices[0];}
\DoxyCodeLine{01512\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i1\ =\ face.vertex\_indices[1];}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i2\ =\ face.vertex\_indices[2];}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i3\ =\ face.vertex\_indices[3];}
\DoxyCodeLine{01515\ }
\DoxyCodeLine{01516\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi0\ =\ size\_t(i0.v\_idx);}
\DoxyCodeLine{01517\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi1\ =\ size\_t(i1.v\_idx);}
\DoxyCodeLine{01518\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi2\ =\ size\_t(i2.v\_idx);}
\DoxyCodeLine{01519\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi3\ =\ size\_t(i3.v\_idx);}
\DoxyCodeLine{01520\ }
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((3\ *\ vi0\ +\ 2)\ >=\ v.size())\ ||\ ((3\ *\ vi1\ +\ 2)\ >=\ v.size())\ ||}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((3\ *\ vi2\ +\ 2)\ >=\ v.size())\ ||\ ((3\ *\ vi3\ +\ 2)\ >=\ v.size()))\ \{}
\DoxyCodeLine{01523\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invalid\ triangle.}}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME(syoyo):\ Is\ it\ ok\ to\ simply\ skip\ this\ invalid\ triangle?}}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{01526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ \textcolor{stringliteral}{"{}Face\ with\ invalid\ vertex\ index\ found.\(\backslash\)n"{}};}
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01530\ }
\DoxyCodeLine{01531\ \ \ \ \ \ \ \ \ \ \ real\_t\ v0x\ =\ v[vi0\ *\ 3\ +\ 0];}
\DoxyCodeLine{01532\ \ \ \ \ \ \ \ \ \ \ real\_t\ v0y\ =\ v[vi0\ *\ 3\ +\ 1];}
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \ \ real\_t\ v0z\ =\ v[vi0\ *\ 3\ +\ 2];}
\DoxyCodeLine{01534\ \ \ \ \ \ \ \ \ \ \ real\_t\ v1x\ =\ v[vi1\ *\ 3\ +\ 0];}
\DoxyCodeLine{01535\ \ \ \ \ \ \ \ \ \ \ real\_t\ v1y\ =\ v[vi1\ *\ 3\ +\ 1];}
\DoxyCodeLine{01536\ \ \ \ \ \ \ \ \ \ \ real\_t\ v1z\ =\ v[vi1\ *\ 3\ +\ 2];}
\DoxyCodeLine{01537\ \ \ \ \ \ \ \ \ \ \ real\_t\ v2x\ =\ v[vi2\ *\ 3\ +\ 0];}
\DoxyCodeLine{01538\ \ \ \ \ \ \ \ \ \ \ real\_t\ v2y\ =\ v[vi2\ *\ 3\ +\ 1];}
\DoxyCodeLine{01539\ \ \ \ \ \ \ \ \ \ \ real\_t\ v2z\ =\ v[vi2\ *\ 3\ +\ 2];}
\DoxyCodeLine{01540\ \ \ \ \ \ \ \ \ \ \ real\_t\ v3x\ =\ v[vi3\ *\ 3\ +\ 0];}
\DoxyCodeLine{01541\ \ \ \ \ \ \ \ \ \ \ real\_t\ v3y\ =\ v[vi3\ *\ 3\ +\ 1];}
\DoxyCodeLine{01542\ \ \ \ \ \ \ \ \ \ \ real\_t\ v3z\ =\ v[vi3\ *\ 3\ +\ 2];}
\DoxyCodeLine{01543\ }
\DoxyCodeLine{01544\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ are\ two\ candidates\ to\ split\ the\ quad\ into\ two\ triangles.}}
\DoxyCodeLine{01545\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01546\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Choose\ the\ shortest\ edge.}}
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ Is\ it\ better\ to\ determine\ the\ edge\ to\ split\ by\ calculating}}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ area\ of\ each\ triangle?}}
\DoxyCodeLine{01549\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ +-\/-\/-\/+}}
\DoxyCodeLine{01551\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ |\(\backslash\)\ \ |}}
\DoxyCodeLine{01552\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ |\ \(\backslash\)\ |}}
\DoxyCodeLine{01553\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ |\ \ \(\backslash\)|}}
\DoxyCodeLine{01554\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ +-\/-\/-\/+}}
\DoxyCodeLine{01555\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ +-\/-\/-\/+}}
\DoxyCodeLine{01557\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ |\ \ /|}}
\DoxyCodeLine{01558\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ |\ /\ |}}
\DoxyCodeLine{01559\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ |/\ \ |}}
\DoxyCodeLine{01560\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ +-\/-\/-\/+}}
\DoxyCodeLine{01561\ }
\DoxyCodeLine{01562\ \ \ \ \ \ \ \ \ \ \ real\_t\ e02x\ =\ v2x\ -\/\ v0x;}
\DoxyCodeLine{01563\ \ \ \ \ \ \ \ \ \ \ real\_t\ e02y\ =\ v2y\ -\/\ v0y;}
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ \ \ real\_t\ e02z\ =\ v2z\ -\/\ v0z;}
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \ \ real\_t\ e13x\ =\ v3x\ -\/\ v1x;}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \ \ real\_t\ e13y\ =\ v3y\ -\/\ v1y;}
\DoxyCodeLine{01567\ \ \ \ \ \ \ \ \ \ \ real\_t\ e13z\ =\ v3z\ -\/\ v1z;}
\DoxyCodeLine{01568\ }
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ \ \ real\_t\ sqr02\ =\ e02x\ *\ e02x\ +\ e02y\ *\ e02y\ +\ e02z\ *\ e02z;}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ \ \ real\_t\ sqr13\ =\ e13x\ *\ e13x\ +\ e13y\ *\ e13y\ +\ e13z\ *\ e13z;}
\DoxyCodeLine{01571\ }
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ \ \ index\_t\ idx0,\ idx1,\ idx2,\ idx3;}
\DoxyCodeLine{01573\ }
\DoxyCodeLine{01574\ \ \ \ \ \ \ \ \ \ \ idx0.vertex\_index\ =\ i0.v\_idx;}
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \ \ idx0.normal\_index\ =\ i0.vn\_idx;}
\DoxyCodeLine{01576\ \ \ \ \ \ \ \ \ \ \ idx0.texcoord\_index\ =\ i0.vt\_idx;}
\DoxyCodeLine{01577\ \ \ \ \ \ \ \ \ \ \ idx1.vertex\_index\ =\ i1.v\_idx;}
\DoxyCodeLine{01578\ \ \ \ \ \ \ \ \ \ \ idx1.normal\_index\ =\ i1.vn\_idx;}
\DoxyCodeLine{01579\ \ \ \ \ \ \ \ \ \ \ idx1.texcoord\_index\ =\ i1.vt\_idx;}
\DoxyCodeLine{01580\ \ \ \ \ \ \ \ \ \ \ idx2.vertex\_index\ =\ i2.v\_idx;}
\DoxyCodeLine{01581\ \ \ \ \ \ \ \ \ \ \ idx2.normal\_index\ =\ i2.vn\_idx;}
\DoxyCodeLine{01582\ \ \ \ \ \ \ \ \ \ \ idx2.texcoord\_index\ =\ i2.vt\_idx;}
\DoxyCodeLine{01583\ \ \ \ \ \ \ \ \ \ \ idx3.vertex\_index\ =\ i3.v\_idx;}
\DoxyCodeLine{01584\ \ \ \ \ \ \ \ \ \ \ idx3.normal\_index\ =\ i3.vn\_idx;}
\DoxyCodeLine{01585\ \ \ \ \ \ \ \ \ \ \ idx3.texcoord\_index\ =\ i3.vt\_idx;}
\DoxyCodeLine{01586\ }
\DoxyCodeLine{01587\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sqr02\ <\ sqr13)\ \{}
\DoxyCodeLine{01588\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [0,\ 1,\ 2],\ [0,\ 2,\ 3]}}
\DoxyCodeLine{01589\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx0);}
\DoxyCodeLine{01590\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx1);}
\DoxyCodeLine{01591\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx2);}
\DoxyCodeLine{01592\ }
\DoxyCodeLine{01593\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx0);}
\DoxyCodeLine{01594\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx2);}
\DoxyCodeLine{01595\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx3);}
\DoxyCodeLine{01596\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [0,\ 1,\ 3],\ [1,\ 2,\ 3]}}
\DoxyCodeLine{01598\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx0);}
\DoxyCodeLine{01599\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx1);}
\DoxyCodeLine{01600\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx3);}
\DoxyCodeLine{01601\ }
\DoxyCodeLine{01602\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx1);}
\DoxyCodeLine{01603\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx2);}
\DoxyCodeLine{01604\ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx3);}
\DoxyCodeLine{01605\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01606\ }
\DoxyCodeLine{01607\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Two\ triangle\ faces}}
\DoxyCodeLine{01608\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.num\_face\_vertices.push\_back(3);}
\DoxyCodeLine{01609\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.num\_face\_vertices.push\_back(3);}
\DoxyCodeLine{01610\ }
\DoxyCodeLine{01611\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.material\_ids.push\_back(material\_id);}
\DoxyCodeLine{01612\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.material\_ids.push\_back(material\_id);}
\DoxyCodeLine{01613\ }
\DoxyCodeLine{01614\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.smoothing\_group\_ids.push\_back(face.smoothing\_group\_id);}
\DoxyCodeLine{01615\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.smoothing\_group\_ids.push\_back(face.smoothing\_group\_id);}
\DoxyCodeLine{01616\ }
\DoxyCodeLine{01617\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01618\ \textcolor{preprocessor}{\#ifdef\ TINYOBJLOADER\_USE\_MAPBOX\_EARCUT}}
\DoxyCodeLine{01619\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i0\ =\ face.vertex\_indices[0];}
\DoxyCodeLine{01620\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i0\_2\ =\ i0;}
\DoxyCodeLine{01621\ }
\DoxyCodeLine{01622\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TMW\ change:\ Find\ the\ normal\ axis\ of\ the\ polygon\ using\ Newell's}}
\DoxyCodeLine{01623\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ method}}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ n;}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ npolys;\ ++k)\ \{}
\DoxyCodeLine{01626\ \ \ \ \ \ \ \ \ \ \ \ \ i0\ =\ face.vertex\_indices[k\ \%\ npolys];}
\DoxyCodeLine{01627\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi0\ =\ size\_t(i0.v\_idx);}
\DoxyCodeLine{01628\ }
\DoxyCodeLine{01629\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ j\ =\ (k\ +\ 1)\ \%\ npolys;}
\DoxyCodeLine{01630\ \ \ \ \ \ \ \ \ \ \ \ \ i0\_2\ =\ face.vertex\_indices[j];}
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi0\_2\ =\ size\_t(i0\_2.v\_idx);}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0x\ =\ v[vi0\ *\ 3\ +\ 0];}
\DoxyCodeLine{01634\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0y\ =\ v[vi0\ *\ 3\ +\ 1];}
\DoxyCodeLine{01635\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0z\ =\ v[vi0\ *\ 3\ +\ 2];}
\DoxyCodeLine{01636\ }
\DoxyCodeLine{01637\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0x\_2\ =\ v[vi0\_2\ *\ 3\ +\ 0];}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0y\_2\ =\ v[vi0\_2\ *\ 3\ +\ 1];}
\DoxyCodeLine{01639\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0z\_2\ =\ v[vi0\_2\ *\ 3\ +\ 2];}
\DoxyCodeLine{01640\ }
\DoxyCodeLine{01641\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ TinyObjPoint\ point1(v0x,\ v0y,\ v0z);}
\DoxyCodeLine{01642\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ TinyObjPoint\ point2(v0x\_2,\ v0y\_2,\ v0z\_2);}
\DoxyCodeLine{01643\ }
\DoxyCodeLine{01644\ \ \ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ a(point1.x\ -\/\ point2.x,\ point1.y\ -\/\ point2.y,}
\DoxyCodeLine{01645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ point1.z\ -\/\ point2.z);}
\DoxyCodeLine{01646\ \ \ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ b(point1.x\ +\ point2.x,\ point1.y\ +\ point2.y,}
\DoxyCodeLine{01647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ point1.z\ +\ point2.z);}
\DoxyCodeLine{01648\ }
\DoxyCodeLine{01649\ \ \ \ \ \ \ \ \ \ \ \ \ n.x\ +=\ (a.y\ *\ b.z);}
\DoxyCodeLine{01650\ \ \ \ \ \ \ \ \ \ \ \ \ n.y\ +=\ (a.z\ *\ b.x);}
\DoxyCodeLine{01651\ \ \ \ \ \ \ \ \ \ \ \ \ n.z\ +=\ (a.x\ *\ b.y);}
\DoxyCodeLine{01652\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01653\ \ \ \ \ \ \ \ \ \ \ real\_t\ length\_n\ =\ GetLength(n);}
\DoxyCodeLine{01654\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ zero\ length\ normal}}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (length\_n\ <=\ 0)\ \{}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01657\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01658\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Negative\ is\ to\ flip\ the\ normal\ to\ the\ correct\ direction}}
\DoxyCodeLine{01659\ \ \ \ \ \ \ \ \ \ \ real\_t\ inv\_length\ =\ -\/real\_t(1.0)\ /\ length\_n;}
\DoxyCodeLine{01660\ \ \ \ \ \ \ \ \ \ \ n.x\ *=\ inv\_length;}
\DoxyCodeLine{01661\ \ \ \ \ \ \ \ \ \ \ n.y\ *=\ inv\_length;}
\DoxyCodeLine{01662\ \ \ \ \ \ \ \ \ \ \ n.z\ *=\ inv\_length;}
\DoxyCodeLine{01663\ }
\DoxyCodeLine{01664\ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ axis\_w,\ axis\_v,\ axis\_u;}
\DoxyCodeLine{01665\ \ \ \ \ \ \ \ \ \ \ axis\_w\ =\ n;}
\DoxyCodeLine{01666\ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ a;}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::fabs(axis\_w.x)\ >\ real\_t(0.9999999))\ \{}
\DoxyCodeLine{01668\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ TinyObjPoint(0,\ 1,\ 0);}
\DoxyCodeLine{01669\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01670\ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ TinyObjPoint(1,\ 0,\ 0);}
\DoxyCodeLine{01671\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01672\ \ \ \ \ \ \ \ \ \ \ axis\_v\ =\ Normalize(cross(axis\_w,\ a));}
\DoxyCodeLine{01673\ \ \ \ \ \ \ \ \ \ \ axis\_u\ =\ cross(axis\_w,\ axis\_v);}
\DoxyCodeLine{01674\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Point\ =\ std::array<real\_t,\ 2>;}
\DoxyCodeLine{01675\ }
\DoxyCodeLine{01676\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ first\ polyline\ define\ the\ main\ polygon.}}
\DoxyCodeLine{01677\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ following\ polylines\ define\ holes(not\ used\ in\ tinyobj).}}
\DoxyCodeLine{01678\ \ \ \ \ \ \ \ \ \ \ std::vector<std::vector<Point>\ >\ polygon;}
\DoxyCodeLine{01679\ }
\DoxyCodeLine{01680\ \ \ \ \ \ \ \ \ \ \ std::vector<Point>\ polyline;}
\DoxyCodeLine{01681\ }
\DoxyCodeLine{01682\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TMW\ change:\ Find\ best\ normal\ and\ project\ v0x\ and\ v0y\ to\ those}}
\DoxyCodeLine{01683\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ coordinates,\ instead\ of\ picking\ a\ plane\ aligned\ with\ an\ axis\ (which}}
\DoxyCodeLine{01684\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ can\ flip\ polygons).}}
\DoxyCodeLine{01685\ }
\DoxyCodeLine{01686\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Fill\ polygon\ data(facevarying\ vertices).}}
\DoxyCodeLine{01687\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ npolys;\ k++)\ \{}
\DoxyCodeLine{01688\ \ \ \ \ \ \ \ \ \ \ \ \ i0\ =\ face.vertex\_indices[k];}
\DoxyCodeLine{01689\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi0\ =\ size\_t(i0.v\_idx);}
\DoxyCodeLine{01690\ }
\DoxyCodeLine{01691\ \ \ \ \ \ \ \ \ \ \ \ \ assert(((3\ *\ vi0\ +\ 2)\ <\ v.size()));}
\DoxyCodeLine{01692\ }
\DoxyCodeLine{01693\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0x\ =\ v[vi0\ *\ 3\ +\ 0];}
\DoxyCodeLine{01694\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0y\ =\ v[vi0\ *\ 3\ +\ 1];}
\DoxyCodeLine{01695\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0z\ =\ v[vi0\ *\ 3\ +\ 2];}
\DoxyCodeLine{01696\ }
\DoxyCodeLine{01697\ \ \ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ polypoint(v0x,\ v0y,\ v0z);}
\DoxyCodeLine{01698\ \ \ \ \ \ \ \ \ \ \ \ \ TinyObjPoint\ loc\ =\ WorldToLocal(polypoint,\ axis\_u,\ axis\_v,\ axis\_w);}
\DoxyCodeLine{01699\ }
\DoxyCodeLine{01700\ \ \ \ \ \ \ \ \ \ \ \ \ polyline.push\_back(\{loc.x,\ loc.y\});}
\DoxyCodeLine{01701\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \ \ \ \ \ \ \ \ \ \ polygon.push\_back(polyline);}
\DoxyCodeLine{01704\ \ \ \ \ \ \ \ \ \ \ std::vector<uint32\_t>\ indices\ =\ mapbox::earcut<uint32\_t>(polygon);}
\DoxyCodeLine{01705\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ =>\ result\ =\ 3\ *\ faces,\ clockwise}}
\DoxyCodeLine{01706\ }
\DoxyCodeLine{01707\ \ \ \ \ \ \ \ \ \ \ assert(indices.size()\ \%\ 3\ ==\ 0);}
\DoxyCodeLine{01708\ }
\DoxyCodeLine{01709\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reconstruct\ vertex\_index\_t}}
\DoxyCodeLine{01710\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ indices.size()\ /\ 3;\ k++)\ \{}
\DoxyCodeLine{01711\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ index\_t\ idx0,\ idx1,\ idx2;}
\DoxyCodeLine{01713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.vertex\_index\ =\ face.vertex\_indices[indices[3\ *\ k\ +\ 0]].v\_idx;}
\DoxyCodeLine{01714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.normal\_index\ =}
\DoxyCodeLine{01715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.vertex\_indices[indices[3\ *\ k\ +\ 0]].vn\_idx;}
\DoxyCodeLine{01716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.texcoord\_index\ =}
\DoxyCodeLine{01717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.vertex\_indices[indices[3\ *\ k\ +\ 0]].vt\_idx;}
\DoxyCodeLine{01718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.vertex\_index\ =\ face.vertex\_indices[indices[3\ *\ k\ +\ 1]].v\_idx;}
\DoxyCodeLine{01719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.normal\_index\ =}
\DoxyCodeLine{01720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.vertex\_indices[indices[3\ *\ k\ +\ 1]].vn\_idx;}
\DoxyCodeLine{01721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.texcoord\_index\ =}
\DoxyCodeLine{01722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.vertex\_indices[indices[3\ *\ k\ +\ 1]].vt\_idx;}
\DoxyCodeLine{01723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.vertex\_index\ =\ face.vertex\_indices[indices[3\ *\ k\ +\ 2]].v\_idx;}
\DoxyCodeLine{01724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.normal\_index\ =}
\DoxyCodeLine{01725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.vertex\_indices[indices[3\ *\ k\ +\ 2]].vn\_idx;}
\DoxyCodeLine{01726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.texcoord\_index\ =}
\DoxyCodeLine{01727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.vertex\_indices[indices[3\ *\ k\ +\ 2]].vt\_idx;}
\DoxyCodeLine{01728\ }
\DoxyCodeLine{01729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx0);}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx1);}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx2);}
\DoxyCodeLine{01732\ }
\DoxyCodeLine{01733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.num\_face\_vertices.push\_back(3);}
\DoxyCodeLine{01734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.material\_ids.push\_back(material\_id);}
\DoxyCodeLine{01735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.smoothing\_group\_ids.push\_back(}
\DoxyCodeLine{01736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.smoothing\_group\_id);}
\DoxyCodeLine{01737\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01738\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01739\ }
\DoxyCodeLine{01740\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{//\ Built-\/in\ ear\ clipping\ triangulation}}
\DoxyCodeLine{01741\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i0\ =\ face.vertex\_indices[0];}
\DoxyCodeLine{01742\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i1(-\/1);}
\DoxyCodeLine{01743\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ i2\ =\ face.vertex\_indices[1];}
\DoxyCodeLine{01744\ }
\DoxyCodeLine{01745\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ find\ the\ two\ axes\ to\ work\ in}}
\DoxyCodeLine{01746\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ axes[2]\ =\ \{1,\ 2\};}
\DoxyCodeLine{01747\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ npolys;\ ++k)\ \{}
\DoxyCodeLine{01748\ \ \ \ \ \ \ \ \ \ \ \ \ i0\ =\ face.vertex\_indices[(k\ +\ 0)\ \%\ npolys];}
\DoxyCodeLine{01749\ \ \ \ \ \ \ \ \ \ \ \ \ i1\ =\ face.vertex\_indices[(k\ +\ 1)\ \%\ npolys];}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ \ \ \ \ i2\ =\ face.vertex\_indices[(k\ +\ 2)\ \%\ npolys];}
\DoxyCodeLine{01751\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi0\ =\ size\_t(i0.v\_idx);}
\DoxyCodeLine{01752\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi1\ =\ size\_t(i1.v\_idx);}
\DoxyCodeLine{01753\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi2\ =\ size\_t(i2.v\_idx);}
\DoxyCodeLine{01754\ }
\DoxyCodeLine{01755\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((3\ *\ vi0\ +\ 2)\ >=\ v.size())\ ||\ ((3\ *\ vi1\ +\ 2)\ >=\ v.size())\ ||}
\DoxyCodeLine{01756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((3\ *\ vi2\ +\ 2)\ >=\ v.size()))\ \{}
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invalid\ triangle.}}
\DoxyCodeLine{01758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME(syoyo):\ Is\ it\ ok\ to\ simply\ skip\ this\ invalid\ triangle?}}
\DoxyCodeLine{01759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01760\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01761\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0x\ =\ v[vi0\ *\ 3\ +\ 0];}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0y\ =\ v[vi0\ *\ 3\ +\ 1];}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v0z\ =\ v[vi0\ *\ 3\ +\ 2];}
\DoxyCodeLine{01764\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v1x\ =\ v[vi1\ *\ 3\ +\ 0];}
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v1y\ =\ v[vi1\ *\ 3\ +\ 1];}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v1z\ =\ v[vi1\ *\ 3\ +\ 2];}
\DoxyCodeLine{01767\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v2x\ =\ v[vi2\ *\ 3\ +\ 0];}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v2y\ =\ v[vi2\ *\ 3\ +\ 1];}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ v2z\ =\ v[vi2\ *\ 3\ +\ 2];}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e0x\ =\ v1x\ -\/\ v0x;}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e0y\ =\ v1y\ -\/\ v0y;}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e0z\ =\ v1z\ -\/\ v0z;}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e1x\ =\ v2x\ -\/\ v1x;}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e1y\ =\ v2y\ -\/\ v1y;}
\DoxyCodeLine{01775\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e1z\ =\ v2z\ -\/\ v1z;}
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ cx\ =\ std::fabs(e0y\ *\ e1z\ -\/\ e0z\ *\ e1y);}
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ cy\ =\ std::fabs(e0z\ *\ e1x\ -\/\ e0x\ *\ e1z);}
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ cz\ =\ std::fabs(e0x\ *\ e1y\ -\/\ e0y\ *\ e1x);}
\DoxyCodeLine{01779\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ real\_t\ epsilon\ =\ std::numeric\_limits<real\_t>::epsilon();}
\DoxyCodeLine{01780\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}cx\ "{}\ <<\ cx\ <<\ "{},\ cy\ "{}\ <<\ cy\ <<\ "{},\ cz\ "{}\ <<\ cz\ <<}}
\DoxyCodeLine{01781\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01782\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cx\ >\ epsilon\ ||\ cy\ >\ epsilon\ ||\ cz\ >\ epsilon)\ \{}
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}corner\(\backslash\)n"{};}}
\DoxyCodeLine{01784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ found\ a\ corner}}
\DoxyCodeLine{01785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cx\ >\ cy\ \&\&\ cx\ >\ cz)\ \{}
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}pattern0\(\backslash\)n"{};}}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}axes[0]\ =\ 0\(\backslash\)n"{};}}
\DoxyCodeLine{01789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ axes[0]\ =\ 0;}
\DoxyCodeLine{01790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cz\ >\ cx\ \&\&\ cz\ >\ cy)\ \{}
\DoxyCodeLine{01791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}axes[1]\ =\ 1\(\backslash\)n"{};}}
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ axes[1]\ =\ 1;}
\DoxyCodeLine{01793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01798\ }
\DoxyCodeLine{01799\ \ \ \ \ \ \ \ \ \ \ face\_t\ remainingFace\ =\ face;\ \ \textcolor{comment}{//\ copy}}
\DoxyCodeLine{01800\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ guess\_vert\ =\ 0;}
\DoxyCodeLine{01801\ \ \ \ \ \ \ \ \ \ \ vertex\_index\_t\ ind[3];}
\DoxyCodeLine{01802\ \ \ \ \ \ \ \ \ \ \ real\_t\ vx[3];}
\DoxyCodeLine{01803\ \ \ \ \ \ \ \ \ \ \ real\_t\ vy[3];}
\DoxyCodeLine{01804\ }
\DoxyCodeLine{01805\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ How\ many\ iterations\ can\ we\ do\ without\ decreasing\ the\ remaining}}
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ vertices.}}
\DoxyCodeLine{01807\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ remainingIterations\ =\ face.vertex\_indices.size();}
\DoxyCodeLine{01808\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ previousRemainingVertices\ =}
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainingFace.vertex\_indices.size();}
\DoxyCodeLine{01810\ }
\DoxyCodeLine{01811\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (remainingFace.vertex\_indices.size()\ >\ 3\ \&\&}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainingIterations\ >\ 0)\ \{}
\DoxyCodeLine{01813\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}remainingIterations\ "{}\ <<\ remainingIterations\ <<}}
\DoxyCodeLine{01814\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01815\ }
\DoxyCodeLine{01816\ \ \ \ \ \ \ \ \ \ \ \ \ npolys\ =\ remainingFace.vertex\_indices.size();}
\DoxyCodeLine{01817\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (guess\_vert\ >=\ npolys)\ \{}
\DoxyCodeLine{01818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ guess\_vert\ -\/=\ npolys;}
\DoxyCodeLine{01819\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01820\ }
\DoxyCodeLine{01821\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (previousRemainingVertices\ !=\ npolys)\ \{}
\DoxyCodeLine{01822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ number\ of\ remaining\ vertices\ decreased.\ Reset\ counters.}}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ previousRemainingVertices\ =\ npolys;}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainingIterations\ =\ npolys;}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ didn't\ consume\ a\ vertex\ on\ previous\ iteration,\ reduce\ the}}
\DoxyCodeLine{01827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ available\ iterations.}}
\DoxyCodeLine{01828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainingIterations-\/-\/;}
\DoxyCodeLine{01829\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01830\ }
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ 3;\ k++)\ \{}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ind[k]\ =\ remainingFace.vertex\_indices[(guess\_vert\ +\ k)\ \%\ npolys];}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ vi\ =\ size\_t(ind[k].v\_idx);}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((vi\ *\ 3\ +\ axes[0])\ >=\ v.size())\ ||}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((vi\ *\ 3\ +\ axes[1])\ >=\ v.size()))\ \{}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ???}}
\DoxyCodeLine{01837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vx[k]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vy[k]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0);}
\DoxyCodeLine{01839\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vx[k]\ =\ v[vi\ *\ 3\ +\ axes[0]];}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vy[k]\ =\ v[vi\ *\ 3\ +\ axes[1]];}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01843\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01844\ }
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01846\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ area\ is\ calculated\ per\ face}}
\DoxyCodeLine{01847\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{01848\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e0x\ =\ vx[1]\ -\/\ vx[0];}
\DoxyCodeLine{01849\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e0y\ =\ vy[1]\ -\/\ vy[0];}
\DoxyCodeLine{01850\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e1x\ =\ vx[2]\ -\/\ vx[1];}
\DoxyCodeLine{01851\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ e1y\ =\ vy[2]\ -\/\ vy[1];}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ cross\ =\ e0x\ *\ e1y\ -\/\ e0y\ *\ e1x;}
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}axes\ =\ "{}\ <<\ axes[0]\ <<\ "{},\ "{}\ <<\ axes[1]\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}e0x,\ e0y,\ e1x,\ e1y\ "{}\ <<\ e0x\ <<\ "{},\ "{}\ <<\ e0y\ <<\ "{},\ "{}}}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ <<\ e1x\ <<\ "{},\ "{}\ <<\ e1y\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01856\ }
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ area\ =}
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (vx[0]\ *\ vy[1]\ -\/\ vy[0]\ *\ vx[1])\ *\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.5);}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}cross\ "{}\ <<\ cross\ <<\ "{},\ area\ "{}\ <<\ area\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ an\ internal\ angle}}
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cross\ *\ area\ <\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.0))\ \{}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}internal\ \(\backslash\)n"{};}}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ guess\_vert\ +=\ 1;}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}guess\ vert\ :\ "{}\ <<\ guess\_vert\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01867\ }
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ all\ other\ verts\ in\ case\ they\ are\ inside\ this\ triangle}}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ overlap\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01870\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ otherVert\ =\ 3;\ otherVert\ <\ npolys;\ ++otherVert)\ \{}
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ idx\ =\ (guess\_vert\ +\ otherVert)\ \%\ npolys;}
\DoxyCodeLine{01872\ }
\DoxyCodeLine{01873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (idx\ >=\ remainingFace.vertex\_indices.size())\ \{}
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}???0\(\backslash\)n"{};}}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ???}}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01878\ }
\DoxyCodeLine{01879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ ovi\ =\ size\_t(remainingFace.vertex\_indices[idx].v\_idx);}
\DoxyCodeLine{01880\ }
\DoxyCodeLine{01881\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((ovi\ *\ 3\ +\ axes[0])\ >=\ v.size())\ ||}
\DoxyCodeLine{01882\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((ovi\ *\ 3\ +\ axes[1])\ >=\ v.size()))\ \{}
\DoxyCodeLine{01883\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}???1\(\backslash\)n"{};}}
\DoxyCodeLine{01884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ???}}
\DoxyCodeLine{01885\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01886\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ tx\ =\ v[ovi\ *\ 3\ +\ axes[0]];}
\DoxyCodeLine{01888\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ real\_t\ ty\ =\ v[ovi\ *\ 3\ +\ axes[1]];}
\DoxyCodeLine{01889\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pnpoly(3,\ vx,\ vy,\ tx,\ ty))\ \{}
\DoxyCodeLine{01890\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}overlap\(\backslash\)n"{};}}
\DoxyCodeLine{01891\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ overlap\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01893\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01894\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01895\ }
\DoxyCodeLine{01896\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (overlap)\ \{}
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}overlap2\(\backslash\)n"{};}}
\DoxyCodeLine{01898\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ guess\_vert\ +=\ 1;}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01901\ }
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ triangle\ is\ an\ ear}}
\DoxyCodeLine{01903\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ index\_t\ idx0,\ idx1,\ idx2;}
\DoxyCodeLine{01905\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.vertex\_index\ =\ ind[0].v\_idx;}
\DoxyCodeLine{01906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.normal\_index\ =\ ind[0].vn\_idx;}
\DoxyCodeLine{01907\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.texcoord\_index\ =\ ind[0].vt\_idx;}
\DoxyCodeLine{01908\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.vertex\_index\ =\ ind[1].v\_idx;}
\DoxyCodeLine{01909\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.normal\_index\ =\ ind[1].vn\_idx;}
\DoxyCodeLine{01910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.texcoord\_index\ =\ ind[1].vt\_idx;}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.vertex\_index\ =\ ind[2].v\_idx;}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.normal\_index\ =\ ind[2].vn\_idx;}
\DoxyCodeLine{01913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.texcoord\_index\ =\ ind[2].vt\_idx;}
\DoxyCodeLine{01914\ }
\DoxyCodeLine{01915\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx0);}
\DoxyCodeLine{01916\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx1);}
\DoxyCodeLine{01917\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx2);}
\DoxyCodeLine{01918\ }
\DoxyCodeLine{01919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.num\_face\_vertices.push\_back(3);}
\DoxyCodeLine{01920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.material\_ids.push\_back(material\_id);}
\DoxyCodeLine{01921\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.smoothing\_group\_ids.push\_back(}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.smoothing\_group\_id);}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01924\ }
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ v1\ from\ the\ list}}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ removed\_vert\_index\ =\ (guess\_vert\ +\ 1)\ \%\ npolys;}
\DoxyCodeLine{01927\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (removed\_vert\_index\ +\ 1\ <\ npolys)\ \{}
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainingFace.vertex\_indices[removed\_vert\_index]\ =}
\DoxyCodeLine{01929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ remainingFace.vertex\_indices[removed\_vert\_index\ +\ 1];}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ removed\_vert\_index\ +=\ 1;}
\DoxyCodeLine{01931\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ \ \ \ \ remainingFace.vertex\_indices.pop\_back();}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01934\ }
\DoxyCodeLine{01935\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ std::cout\ <<\ "{}remainingFace.vi.size\ =\ "{}\ <<}}
\DoxyCodeLine{01936\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remainingFace.vertex\_indices.size()\ <<\ "{}\(\backslash\)n"{};}}
\DoxyCodeLine{01937\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (remainingFace.vertex\_indices.size()\ ==\ 3)\ \{}
\DoxyCodeLine{01938\ \ \ \ \ \ \ \ \ \ \ \ \ i0\ =\ remainingFace.vertex\_indices[0];}
\DoxyCodeLine{01939\ \ \ \ \ \ \ \ \ \ \ \ \ i1\ =\ remainingFace.vertex\_indices[1];}
\DoxyCodeLine{01940\ \ \ \ \ \ \ \ \ \ \ \ \ i2\ =\ remainingFace.vertex\_indices[2];}
\DoxyCodeLine{01941\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ index\_t\ idx0,\ idx1,\ idx2;}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.vertex\_index\ =\ i0.v\_idx;}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.normal\_index\ =\ i0.vn\_idx;}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx0.texcoord\_index\ =\ i0.vt\_idx;}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.vertex\_index\ =\ i1.v\_idx;}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.normal\_index\ =\ i1.vn\_idx;}
\DoxyCodeLine{01948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx1.texcoord\_index\ =\ i1.vt\_idx;}
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.vertex\_index\ =\ i2.v\_idx;}
\DoxyCodeLine{01950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.normal\_index\ =\ i2.vn\_idx;}
\DoxyCodeLine{01951\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ idx2.texcoord\_index\ =\ i2.vt\_idx;}
\DoxyCodeLine{01952\ }
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx0);}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx1);}
\DoxyCodeLine{01955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx2);}
\DoxyCodeLine{01956\ }
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.num\_face\_vertices.push\_back(3);}
\DoxyCodeLine{01958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.material\_ids.push\_back(material\_id);}
\DoxyCodeLine{01959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.smoothing\_group\_ids.push\_back(}
\DoxyCodeLine{01960\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ face.smoothing\_group\_id);}
\DoxyCodeLine{01961\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01963\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \}\ \ \textcolor{comment}{//\ npolys}}
\DoxyCodeLine{01965\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{01966\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ k\ =\ 0;\ k\ <\ npolys;\ k++)\ \{}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \ \ index\_t\ idx;}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \ \ idx.vertex\_index\ =\ face.vertex\_indices[k].v\_idx;}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ idx.normal\_index\ =\ face.vertex\_indices[k].vn\_idx;}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \ \ \ \ idx.texcoord\_index\ =\ face.vertex\_indices[k].vt\_idx;}
\DoxyCodeLine{01971\ \ \ \ \ \ \ \ \ \ \ shape-\/>mesh.indices.push\_back(idx);}
\DoxyCodeLine{01972\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01973\ }
\DoxyCodeLine{01974\ \ \ \ \ \ \ \ \ shape-\/>mesh.num\_face\_vertices.push\_back(}
\DoxyCodeLine{01975\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(npolys));}
\DoxyCodeLine{01976\ \ \ \ \ \ \ \ \ shape-\/>mesh.material\_ids.push\_back(material\_id);\ \ \textcolor{comment}{//\ per\ face}}
\DoxyCodeLine{01977\ \ \ \ \ \ \ \ \ shape-\/>mesh.smoothing\_group\_ids.push\_back(}
\DoxyCodeLine{01978\ \ \ \ \ \ \ \ \ \ \ \ \ face.smoothing\_group\_id);\ \ \textcolor{comment}{//\ per\ face}}
\DoxyCodeLine{01979\ \ \ \ \ \ \ \}}
\DoxyCodeLine{01980\ \ \ \ \ \}}
\DoxyCodeLine{01981\ }
\DoxyCodeLine{01982\ \ \ \ \ shape-\/>mesh.tags\ =\ tags;}
\DoxyCodeLine{01983\ \ \ \}}
\DoxyCodeLine{01984\ }
\DoxyCodeLine{01985\ \ \ \textcolor{comment}{//\ line}}
\DoxyCodeLine{01986\ \ \ \textcolor{keywordflow}{if}\ (!prim\_group.lineGroup.empty())\ \{}
\DoxyCodeLine{01987\ \ \ \ \ \textcolor{comment}{//\ Flatten\ indices}}
\DoxyCodeLine{01988\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ prim\_group.lineGroup.size();\ i++)\ \{}
\DoxyCodeLine{01989\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ j\ =\ 0;\ j\ <\ prim\_group.lineGroup[i].vertex\_indices.size();}
\DoxyCodeLine{01990\ \ \ \ \ \ \ \ \ \ \ \ j++)\ \{}
\DoxyCodeLine{01991\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ vertex\_index\_t\ \&vi\ =\ prim\_group.lineGroup[i].vertex\_indices[j];}
\DoxyCodeLine{01992\ }
\DoxyCodeLine{01993\ \ \ \ \ \ \ \ \ index\_t\ idx;}
\DoxyCodeLine{01994\ \ \ \ \ \ \ \ \ idx.vertex\_index\ =\ vi.v\_idx;}
\DoxyCodeLine{01995\ \ \ \ \ \ \ \ \ idx.normal\_index\ =\ vi.vn\_idx;}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ idx.texcoord\_index\ =\ vi.vt\_idx;}
\DoxyCodeLine{01997\ }
\DoxyCodeLine{01998\ \ \ \ \ \ \ \ \ shape-\/>lines.indices.push\_back(idx);}
\DoxyCodeLine{01999\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02000\ }
\DoxyCodeLine{02001\ \ \ \ \ \ \ shape-\/>lines.num\_line\_vertices.push\_back(}
\DoxyCodeLine{02002\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}(prim\_group.lineGroup[i].vertex\_indices.size()));}
\DoxyCodeLine{02003\ \ \ \ \ \}}
\DoxyCodeLine{02004\ \ \ \}}
\DoxyCodeLine{02005\ }
\DoxyCodeLine{02006\ \ \ \textcolor{comment}{//\ points}}
\DoxyCodeLine{02007\ \ \ \textcolor{keywordflow}{if}\ (!prim\_group.pointsGroup.empty())\ \{}
\DoxyCodeLine{02008\ \ \ \ \ \textcolor{comment}{//\ Flatten\ \&\ convert\ indices}}
\DoxyCodeLine{02009\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ prim\_group.pointsGroup.size();\ i++)\ \{}
\DoxyCodeLine{02010\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ j\ =\ 0;\ j\ <\ prim\_group.pointsGroup[i].vertex\_indices.size();}
\DoxyCodeLine{02011\ \ \ \ \ \ \ \ \ \ \ \ j++)\ \{}
\DoxyCodeLine{02012\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ vertex\_index\_t\ \&vi\ =\ prim\_group.pointsGroup[i].vertex\_indices[j];}
\DoxyCodeLine{02013\ }
\DoxyCodeLine{02014\ \ \ \ \ \ \ \ \ index\_t\ idx;}
\DoxyCodeLine{02015\ \ \ \ \ \ \ \ \ idx.vertex\_index\ =\ vi.v\_idx;}
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ idx.normal\_index\ =\ vi.vn\_idx;}
\DoxyCodeLine{02017\ \ \ \ \ \ \ \ \ idx.texcoord\_index\ =\ vi.vt\_idx;}
\DoxyCodeLine{02018\ }
\DoxyCodeLine{02019\ \ \ \ \ \ \ \ \ shape-\/>points.indices.push\_back(idx);}
\DoxyCodeLine{02020\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02021\ \ \ \ \ \}}
\DoxyCodeLine{02022\ \ \ \}}
\DoxyCodeLine{02023\ }
\DoxyCodeLine{02024\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02025\ \}}
\DoxyCodeLine{02026\ }
\DoxyCodeLine{02027\ \textcolor{comment}{//\ Split\ a\ string\ with\ specified\ delimiter\ character\ and\ escape\ character.}}
\DoxyCodeLine{02028\ \textcolor{comment}{//\ https://rosettacode.org/wiki/Tokenize\_a\_string\_with\_escaping\#C.2B.2B}}
\DoxyCodeLine{02029\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ SplitString(\textcolor{keyword}{const}\ std::string\ \&s,\ \textcolor{keywordtype}{char}\ delim,\ \textcolor{keywordtype}{char}\ escape,}
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \&elems)\ \{}
\DoxyCodeLine{02031\ \ \ std::string\ token;}
\DoxyCodeLine{02032\ }
\DoxyCodeLine{02033\ \ \ \textcolor{keywordtype}{bool}\ escaping\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02034\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ s.size();\ ++i)\ \{}
\DoxyCodeLine{02035\ \ \ \ \ \textcolor{keywordtype}{char}\ ch\ =\ s[i];}
\DoxyCodeLine{02036\ \ \ \ \ \textcolor{keywordflow}{if}\ (escaping)\ \{}
\DoxyCodeLine{02037\ \ \ \ \ \ \ escaping\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02038\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ch\ ==\ escape)\ \{}
\DoxyCodeLine{02039\ \ \ \ \ \ \ escaping\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02040\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02041\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ch\ ==\ delim)\ \{}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!token.empty())\ \{}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ elems.push\_back(token);}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02045\ \ \ \ \ \ \ token.clear();}
\DoxyCodeLine{02046\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02047\ \ \ \ \ \}}
\DoxyCodeLine{02048\ \ \ \ \ token\ +=\ ch;}
\DoxyCodeLine{02049\ \ \ \}}
\DoxyCodeLine{02050\ }
\DoxyCodeLine{02051\ \ \ elems.push\_back(token);}
\DoxyCodeLine{02052\ \}}
\DoxyCodeLine{02053\ }
\DoxyCodeLine{02054\ \textcolor{keyword}{static}\ std::string\ JoinPath(\textcolor{keyword}{const}\ std::string\ \&dir,}
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&filename)\ \{}
\DoxyCodeLine{02056\ \ \ \textcolor{keywordflow}{if}\ (dir.empty())\ \{}
\DoxyCodeLine{02057\ \ \ \ \ \textcolor{keywordflow}{return}\ filename;}
\DoxyCodeLine{02058\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02059\ \ \ \ \ \textcolor{comment}{//\ check\ '/'}}
\DoxyCodeLine{02060\ \ \ \ \ \textcolor{keywordtype}{char}\ lastChar\ =\ *dir.rbegin();}
\DoxyCodeLine{02061\ \ \ \ \ \textcolor{keywordflow}{if}\ (lastChar\ !=\ \textcolor{charliteral}{'/'})\ \{}
\DoxyCodeLine{02062\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dir\ +\ std::string(\textcolor{stringliteral}{"{}/"{}})\ +\ filename;}
\DoxyCodeLine{02063\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02064\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dir\ +\ filename;}
\DoxyCodeLine{02065\ \ \ \ \ \}}
\DoxyCodeLine{02066\ \ \ \}}
\DoxyCodeLine{02067\ \}}
\DoxyCodeLine{02068\ }
\DoxyCodeLine{02069\ \textcolor{keywordtype}{void}\ LoadMtl(std::map<std::string,\ int>\ *material\_map,}
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,\ std::istream\ *inStream,}
\DoxyCodeLine{02071\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warning,\ std::string\ *err)\ \{}
\DoxyCodeLine{02072\ \ \ (void)err;}
\DoxyCodeLine{02073\ }
\DoxyCodeLine{02074\ \ \ \textcolor{comment}{//\ Create\ a\ default\ material\ anyway.}}
\DoxyCodeLine{02075\ \ \ material\_t\ material;}
\DoxyCodeLine{02076\ \ \ InitMaterial(\&material);}
\DoxyCodeLine{02077\ }
\DoxyCodeLine{02078\ \ \ \textcolor{comment}{//\ Issue\ 43.\ \`{}d`\ wins\ against\ \`{}Tr`\ since\ \`{}Tr`\ is\ not\ in\ the\ MTL\ specification.}}
\DoxyCodeLine{02079\ \ \ \textcolor{keywordtype}{bool}\ has\_d\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02080\ \ \ \textcolor{keywordtype}{bool}\ has\_tr\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02081\ }
\DoxyCodeLine{02082\ \ \ \textcolor{comment}{//\ has\_kd\ is\ used\ to\ set\ a\ default\ diffuse\ value\ when\ map\_Kd\ is\ present}}
\DoxyCodeLine{02083\ \ \ \textcolor{comment}{//\ and\ Kd\ is\ not.}}
\DoxyCodeLine{02084\ \ \ \textcolor{keywordtype}{bool}\ has\_kd\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02085\ }
\DoxyCodeLine{02086\ \ \ std::stringstream\ warn\_ss;}
\DoxyCodeLine{02087\ }
\DoxyCodeLine{02088\ \ \ \textcolor{keywordtype}{size\_t}\ line\_no\ =\ 0;}
\DoxyCodeLine{02089\ \ \ std::string\ linebuf;}
\DoxyCodeLine{02090\ \ \ \textcolor{keywordflow}{while}\ (inStream-\/>peek()\ !=\ -\/1)\ \{}
\DoxyCodeLine{02091\ \ \ \ \ safeGetline(*inStream,\ linebuf);}
\DoxyCodeLine{02092\ \ \ \ \ line\_no++;}
\DoxyCodeLine{02093\ }
\DoxyCodeLine{02094\ \ \ \ \ \textcolor{comment}{//\ Trim\ trailing\ whitespace.}}
\DoxyCodeLine{02095\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{02096\ \ \ \ \ \ \ linebuf\ =\ linebuf.substr(0,\ linebuf.find\_last\_not\_of(\textcolor{stringliteral}{"{}\ \(\backslash\)t"{}})\ +\ 1);}
\DoxyCodeLine{02097\ \ \ \ \ \}}
\DoxyCodeLine{02098\ }
\DoxyCodeLine{02099\ \ \ \ \ \textcolor{comment}{//\ Trim\ newline\ '\(\backslash\)r\(\backslash\)n'\ or\ '\(\backslash\)n'}}
\DoxyCodeLine{02100\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{02101\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf[linebuf.size()\ -\/\ 1]\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{02102\ \ \ \ \ \ \ \ \ linebuf.erase(linebuf.size()\ -\/\ 1);}
\DoxyCodeLine{02103\ \ \ \ \ \}}
\DoxyCodeLine{02104\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{02105\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf[linebuf.size()\ -\/\ 1]\ ==\ \textcolor{charliteral}{'\(\backslash\)r'})}
\DoxyCodeLine{02106\ \ \ \ \ \ \ \ \ linebuf.erase(linebuf.size()\ -\/\ 1);}
\DoxyCodeLine{02107\ \ \ \ \ \}}
\DoxyCodeLine{02108\ }
\DoxyCodeLine{02109\ \ \ \ \ \textcolor{comment}{//\ Skip\ if\ empty\ line.}}
\DoxyCodeLine{02110\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.empty())\ \{}
\DoxyCodeLine{02111\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02112\ \ \ \ \ \}}
\DoxyCodeLine{02113\ }
\DoxyCodeLine{02114\ \ \ \ \ \textcolor{comment}{//\ Skip\ leading\ space.}}
\DoxyCodeLine{02115\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *token\ =\ linebuf.c\_str();}
\DoxyCodeLine{02116\ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{02117\ }
\DoxyCodeLine{02118\ \ \ \ \ assert(token);}
\DoxyCodeLine{02119\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\(\backslash\)0'})\ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{//\ empty\ line}}
\DoxyCodeLine{02120\ }
\DoxyCodeLine{02121\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\#'})\ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{//\ comment\ line}}
\DoxyCodeLine{02122\ }
\DoxyCodeLine{02123\ \ \ \ \ \textcolor{comment}{//\ new\ mtl}}
\DoxyCodeLine{02124\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}newmtl"{}},\ 6))\ \&\&\ IS\_SPACE((token[6])))\ \{}
\DoxyCodeLine{02125\ \ \ \ \ \ \ \textcolor{comment}{//\ flush\ previous\ material.}}
\DoxyCodeLine{02126\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!material.name.empty())\ \{}
\DoxyCodeLine{02127\ \ \ \ \ \ \ \ \ material\_map-\/>insert(std::pair<std::string,\ int>(}
\DoxyCodeLine{02128\ \ \ \ \ \ \ \ \ \ \ \ \ material.name,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(materials-\/>size())));}
\DoxyCodeLine{02129\ \ \ \ \ \ \ \ \ materials-\/>push\_back(material);}
\DoxyCodeLine{02130\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02131\ }
\DoxyCodeLine{02132\ \ \ \ \ \ \ \textcolor{comment}{//\ initial\ temporary\ material}}
\DoxyCodeLine{02133\ \ \ \ \ \ \ InitMaterial(\&material);}
\DoxyCodeLine{02134\ }
\DoxyCodeLine{02135\ \ \ \ \ \ \ has\_d\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02136\ \ \ \ \ \ \ has\_tr\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02137\ }
\DoxyCodeLine{02138\ \ \ \ \ \ \ \textcolor{comment}{//\ set\ new\ mtl\ name}}
\DoxyCodeLine{02139\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02140\ \ \ \ \ \ \ \{}
\DoxyCodeLine{02141\ \ \ \ \ \ \ \ \ std::string\ namebuf\ =\ parseString(\&token);}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ empty\ name\ check?}}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (namebuf.empty())\ \{}
\DoxyCodeLine{02144\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warning)\ \{}
\DoxyCodeLine{02145\ \ \ \ \ \ \ \ \ \ \ \ \ (*warning)\ +=\ \textcolor{stringliteral}{"{}empty\ material\ name\ in\ \`{}newmtl`\(\backslash\)n"{}};}
\DoxyCodeLine{02146\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02148\ \ \ \ \ \ \ \ \ material.name\ =\ namebuf;}
\DoxyCodeLine{02149\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02150\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02151\ \ \ \ \ \}}
\DoxyCodeLine{02152\ }
\DoxyCodeLine{02153\ \ \ \ \ \textcolor{comment}{//\ ambient}}
\DoxyCodeLine{02154\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'K'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'a'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02155\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02156\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{02157\ \ \ \ \ \ \ parseReal3(\&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{02158\ \ \ \ \ \ \ material.ambient[0]\ =\ r;}
\DoxyCodeLine{02159\ \ \ \ \ \ \ material.ambient[1]\ =\ g;}
\DoxyCodeLine{02160\ \ \ \ \ \ \ material.ambient[2]\ =\ b;}
\DoxyCodeLine{02161\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02162\ \ \ \ \ \}}
\DoxyCodeLine{02163\ }
\DoxyCodeLine{02164\ \ \ \ \ \textcolor{comment}{//\ diffuse}}
\DoxyCodeLine{02165\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'K'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'d'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02166\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02167\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{02168\ \ \ \ \ \ \ parseReal3(\&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{02169\ \ \ \ \ \ \ material.diffuse[0]\ =\ r;}
\DoxyCodeLine{02170\ \ \ \ \ \ \ material.diffuse[1]\ =\ g;}
\DoxyCodeLine{02171\ \ \ \ \ \ \ material.diffuse[2]\ =\ b;}
\DoxyCodeLine{02172\ \ \ \ \ \ \ has\_kd\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02173\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02174\ \ \ \ \ \}}
\DoxyCodeLine{02175\ }
\DoxyCodeLine{02176\ \ \ \ \ \textcolor{comment}{//\ specular}}
\DoxyCodeLine{02177\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'K'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'s'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02178\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02179\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{02180\ \ \ \ \ \ \ parseReal3(\&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{02181\ \ \ \ \ \ \ material.specular[0]\ =\ r;}
\DoxyCodeLine{02182\ \ \ \ \ \ \ material.specular[1]\ =\ g;}
\DoxyCodeLine{02183\ \ \ \ \ \ \ material.specular[2]\ =\ b;}
\DoxyCodeLine{02184\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02185\ \ \ \ \ \}}
\DoxyCodeLine{02186\ }
\DoxyCodeLine{02187\ \ \ \ \ \textcolor{comment}{//\ transmittance}}
\DoxyCodeLine{02188\ \ \ \ \ \textcolor{keywordflow}{if}\ ((token[0]\ ==\ \textcolor{charliteral}{'K'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'t'}\ \&\&\ IS\_SPACE((token[2])))\ ||}
\DoxyCodeLine{02189\ \ \ \ \ \ \ \ \ (token[0]\ ==\ \textcolor{charliteral}{'T'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'f'}\ \&\&\ IS\_SPACE((token[2]))))\ \{}
\DoxyCodeLine{02190\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02191\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{02192\ \ \ \ \ \ \ parseReal3(\&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{02193\ \ \ \ \ \ \ material.transmittance[0]\ =\ r;}
\DoxyCodeLine{02194\ \ \ \ \ \ \ material.transmittance[1]\ =\ g;}
\DoxyCodeLine{02195\ \ \ \ \ \ \ material.transmittance[2]\ =\ b;}
\DoxyCodeLine{02196\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02197\ \ \ \ \ \}}
\DoxyCodeLine{02198\ }
\DoxyCodeLine{02199\ \ \ \ \ \textcolor{comment}{//\ ior(index\ of\ refraction)}}
\DoxyCodeLine{02200\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'N'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'i'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02201\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02202\ \ \ \ \ \ \ material.ior\ =\ parseReal(\&token);}
\DoxyCodeLine{02203\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02204\ \ \ \ \ \}}
\DoxyCodeLine{02205\ }
\DoxyCodeLine{02206\ \ \ \ \ \textcolor{comment}{//\ emission}}
\DoxyCodeLine{02207\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'K'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'e'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02208\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02209\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{02210\ \ \ \ \ \ \ parseReal3(\&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{02211\ \ \ \ \ \ \ material.emission[0]\ =\ r;}
\DoxyCodeLine{02212\ \ \ \ \ \ \ material.emission[1]\ =\ g;}
\DoxyCodeLine{02213\ \ \ \ \ \ \ material.emission[2]\ =\ b;}
\DoxyCodeLine{02214\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02215\ \ \ \ \ \}}
\DoxyCodeLine{02216\ }
\DoxyCodeLine{02217\ \ \ \ \ \textcolor{comment}{//\ shininess}}
\DoxyCodeLine{02218\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'N'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'s'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02219\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02220\ \ \ \ \ \ \ material.shininess\ =\ parseReal(\&token);}
\DoxyCodeLine{02221\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02222\ \ \ \ \ \}}
\DoxyCodeLine{02223\ }
\DoxyCodeLine{02224\ \ \ \ \ \textcolor{comment}{//\ illum\ model}}
\DoxyCodeLine{02225\ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}illum"{}},\ 5)\ \&\&\ IS\_SPACE(token[5]))\ \{}
\DoxyCodeLine{02226\ \ \ \ \ \ \ token\ +=\ 6;}
\DoxyCodeLine{02227\ \ \ \ \ \ \ material.illum\ =\ parseInt(\&token);}
\DoxyCodeLine{02228\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02229\ \ \ \ \ \}}
\DoxyCodeLine{02230\ }
\DoxyCodeLine{02231\ \ \ \ \ \textcolor{comment}{//\ dissolve}}
\DoxyCodeLine{02232\ \ \ \ \ \textcolor{keywordflow}{if}\ ((token[0]\ ==\ \textcolor{charliteral}{'d'}\ \&\&\ IS\_SPACE(token[1])))\ \{}
\DoxyCodeLine{02233\ \ \ \ \ \ \ token\ +=\ 1;}
\DoxyCodeLine{02234\ \ \ \ \ \ \ material.dissolve\ =\ parseReal(\&token);}
\DoxyCodeLine{02235\ }
\DoxyCodeLine{02236\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_tr)\ \{}
\DoxyCodeLine{02237\ \ \ \ \ \ \ \ \ warn\_ss\ <<\ \textcolor{stringliteral}{"{}Both\ \`{}d`\ and\ \`{}Tr`\ parameters\ defined\ for\ \(\backslash\)"{}"{}}}
\DoxyCodeLine{02238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ material.name}
\DoxyCodeLine{02239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)"{}.\ Use\ the\ value\ of\ \`{}d`\ for\ dissolve\ (line\ "{}}\ <<\ line\_no}
\DoxyCodeLine{02240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ in\ .mtl.)\(\backslash\)n"{}};}
\DoxyCodeLine{02241\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02242\ \ \ \ \ \ \ has\_d\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02243\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02244\ \ \ \ \ \}}
\DoxyCodeLine{02245\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'T'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'r'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02246\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02247\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_d)\ \{}
\DoxyCodeLine{02248\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \`{}d`\ wins.\ Ignore\ \`{}Tr`\ value.}}
\DoxyCodeLine{02249\ \ \ \ \ \ \ \ \ warn\_ss\ <<\ \textcolor{stringliteral}{"{}Both\ \`{}d`\ and\ \`{}Tr`\ parameters\ defined\ for\ \(\backslash\)"{}"{}}}
\DoxyCodeLine{02250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ material.name}
\DoxyCodeLine{02251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)"{}.\ Use\ the\ value\ of\ \`{}d`\ for\ dissolve\ (line\ "{}}\ <<\ line\_no}
\DoxyCodeLine{02252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ in\ .mtl.)\(\backslash\)n"{}};}
\DoxyCodeLine{02253\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02254\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ invert\ value\ of\ Tr(assume\ Tr\ is\ in\ range\ [0,\ 1])}}
\DoxyCodeLine{02255\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTE:\ Interpretation\ of\ Tr\ is\ application(exporter)\ dependent.\ For}}
\DoxyCodeLine{02256\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ some\ application(e.g.\ 3ds\ max\ obj\ exporter),\ Tr\ =\ d(Issue\ 43)}}
\DoxyCodeLine{02257\ \ \ \ \ \ \ \ \ material.dissolve\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(1.0)\ -\/\ parseReal(\&token);}
\DoxyCodeLine{02258\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02259\ \ \ \ \ \ \ has\_tr\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02260\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02261\ \ \ \ \ \}}
\DoxyCodeLine{02262\ }
\DoxyCodeLine{02263\ \ \ \ \ \textcolor{comment}{//\ PBR:\ roughness}}
\DoxyCodeLine{02264\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'P'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'r'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02265\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02266\ \ \ \ \ \ \ material.roughness\ =\ parseReal(\&token);}
\DoxyCodeLine{02267\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02268\ \ \ \ \ \}}
\DoxyCodeLine{02269\ }
\DoxyCodeLine{02270\ \ \ \ \ \textcolor{comment}{//\ PBR:\ metallic}}
\DoxyCodeLine{02271\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'P'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'m'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02272\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02273\ \ \ \ \ \ \ material.metallic\ =\ parseReal(\&token);}
\DoxyCodeLine{02274\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02275\ \ \ \ \ \}}
\DoxyCodeLine{02276\ }
\DoxyCodeLine{02277\ \ \ \ \ \textcolor{comment}{//\ PBR:\ sheen}}
\DoxyCodeLine{02278\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'P'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'s'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02279\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02280\ \ \ \ \ \ \ material.sheen\ =\ parseReal(\&token);}
\DoxyCodeLine{02281\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02282\ \ \ \ \ \}}
\DoxyCodeLine{02283\ }
\DoxyCodeLine{02284\ \ \ \ \ \textcolor{comment}{//\ PBR:\ clearcoat\ thickness}}
\DoxyCodeLine{02285\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'P'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'c'}\ \&\&\ IS\_SPACE(token[2]))\ \{}
\DoxyCodeLine{02286\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02287\ \ \ \ \ \ \ material.clearcoat\_thickness\ =\ parseReal(\&token);}
\DoxyCodeLine{02288\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02289\ \ \ \ \ \}}
\DoxyCodeLine{02290\ }
\DoxyCodeLine{02291\ \ \ \ \ \textcolor{comment}{//\ PBR:\ clearcoat\ roughness}}
\DoxyCodeLine{02292\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}Pcr"{}},\ 3))\ \&\&\ IS\_SPACE(token[3]))\ \{}
\DoxyCodeLine{02293\ \ \ \ \ \ \ token\ +=\ 4;}
\DoxyCodeLine{02294\ \ \ \ \ \ \ material.clearcoat\_roughness\ =\ parseReal(\&token);}
\DoxyCodeLine{02295\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02296\ \ \ \ \ \}}
\DoxyCodeLine{02297\ }
\DoxyCodeLine{02298\ \ \ \ \ \textcolor{comment}{//\ PBR:\ anisotropy}}
\DoxyCodeLine{02299\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}aniso"{}},\ 5))\ \&\&\ IS\_SPACE(token[5]))\ \{}
\DoxyCodeLine{02300\ \ \ \ \ \ \ token\ +=\ 6;}
\DoxyCodeLine{02301\ \ \ \ \ \ \ material.anisotropy\ =\ parseReal(\&token);}
\DoxyCodeLine{02302\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02303\ \ \ \ \ \}}
\DoxyCodeLine{02304\ }
\DoxyCodeLine{02305\ \ \ \ \ \textcolor{comment}{//\ PBR:\ anisotropy\ rotation}}
\DoxyCodeLine{02306\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}anisor"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02307\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02308\ \ \ \ \ \ \ material.anisotropy\_rotation\ =\ parseReal(\&token);}
\DoxyCodeLine{02309\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02310\ \ \ \ \ \}}
\DoxyCodeLine{02311\ }
\DoxyCodeLine{02312\ \ \ \ \ \textcolor{comment}{//\ ambient\ or\ ambient\ occlusion\ texture}}
\DoxyCodeLine{02313\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Ka"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02314\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02315\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.ambient\_texname),}
\DoxyCodeLine{02316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.ambient\_texopt),\ token);}
\DoxyCodeLine{02317\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02318\ \ \ \ \ \}}
\DoxyCodeLine{02319\ }
\DoxyCodeLine{02320\ \ \ \ \ \textcolor{comment}{//\ diffuse\ texture}}
\DoxyCodeLine{02321\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Kd"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02322\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02323\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.diffuse\_texname),}
\DoxyCodeLine{02324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.diffuse\_texopt),\ token);}
\DoxyCodeLine{02325\ }
\DoxyCodeLine{02326\ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ a\ decent\ diffuse\ default\ value\ if\ a\ diffuse\ texture\ is\ specified}}
\DoxyCodeLine{02327\ \ \ \ \ \ \ \textcolor{comment}{//\ without\ a\ matching\ Kd\ value.}}
\DoxyCodeLine{02328\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!has\_kd)\ \{}
\DoxyCodeLine{02329\ \ \ \ \ \ \ \ \ material.diffuse[0]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.6);}
\DoxyCodeLine{02330\ \ \ \ \ \ \ \ \ material.diffuse[1]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.6);}
\DoxyCodeLine{02331\ \ \ \ \ \ \ \ \ material.diffuse[2]\ =\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0.6);}
\DoxyCodeLine{02332\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02333\ }
\DoxyCodeLine{02334\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02335\ \ \ \ \ \}}
\DoxyCodeLine{02336\ }
\DoxyCodeLine{02337\ \ \ \ \ \textcolor{comment}{//\ specular\ texture}}
\DoxyCodeLine{02338\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Ks"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02339\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02340\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.specular\_texname),}
\DoxyCodeLine{02341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.specular\_texopt),\ token);}
\DoxyCodeLine{02342\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02343\ \ \ \ \ \}}
\DoxyCodeLine{02344\ }
\DoxyCodeLine{02345\ \ \ \ \ \textcolor{comment}{//\ specular\ highlight\ texture}}
\DoxyCodeLine{02346\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Ns"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02347\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02348\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.specular\_highlight\_texname),}
\DoxyCodeLine{02349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.specular\_highlight\_texopt),\ token);}
\DoxyCodeLine{02350\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02351\ \ \ \ \ \}}
\DoxyCodeLine{02352\ }
\DoxyCodeLine{02353\ \ \ \ \ \textcolor{comment}{//\ bump\ texture}}
\DoxyCodeLine{02354\ \ \ \ \ \textcolor{keywordflow}{if}\ (((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_bump"{}},\ 8))\ ||}
\DoxyCodeLine{02355\ \ \ \ \ \ \ \ \ \ (0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Bump"{}},\ 8)))\ \&\&}
\DoxyCodeLine{02356\ \ \ \ \ \ \ \ \ IS\_SPACE(token[8]))\ \{}
\DoxyCodeLine{02357\ \ \ \ \ \ \ token\ +=\ 9;}
\DoxyCodeLine{02358\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.bump\_texname),}
\DoxyCodeLine{02359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.bump\_texopt),\ token);}
\DoxyCodeLine{02360\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02361\ \ \ \ \ \}}
\DoxyCodeLine{02362\ }
\DoxyCodeLine{02363\ \ \ \ \ \textcolor{comment}{//\ bump\ texture}}
\DoxyCodeLine{02364\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}bump"{}},\ 4))\ \&\&\ IS\_SPACE(token[4]))\ \{}
\DoxyCodeLine{02365\ \ \ \ \ \ \ token\ +=\ 5;}
\DoxyCodeLine{02366\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.bump\_texname),}
\DoxyCodeLine{02367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.bump\_texopt),\ token);}
\DoxyCodeLine{02368\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02369\ \ \ \ \ \}}
\DoxyCodeLine{02370\ }
\DoxyCodeLine{02371\ \ \ \ \ \textcolor{comment}{//\ alpha\ texture}}
\DoxyCodeLine{02372\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_d"{}},\ 5))\ \&\&\ IS\_SPACE(token[5]))\ \{}
\DoxyCodeLine{02373\ \ \ \ \ \ \ token\ +=\ 6;}
\DoxyCodeLine{02374\ \ \ \ \ \ \ material.alpha\_texname\ =\ token;}
\DoxyCodeLine{02375\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.alpha\_texname),}
\DoxyCodeLine{02376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.alpha\_texopt),\ token);}
\DoxyCodeLine{02377\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02378\ \ \ \ \ \}}
\DoxyCodeLine{02379\ }
\DoxyCodeLine{02380\ \ \ \ \ \textcolor{comment}{//\ displacement\ texture}}
\DoxyCodeLine{02381\ \ \ \ \ \textcolor{keywordflow}{if}\ (((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_disp"{}},\ 8))\ ||}
\DoxyCodeLine{02382\ \ \ \ \ \ \ \ \ \ (0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Disp"{}},\ 8)))\ \&\&}
\DoxyCodeLine{02383\ \ \ \ \ \ \ \ \ IS\_SPACE(token[8]))\ \{}
\DoxyCodeLine{02384\ \ \ \ \ \ \ token\ +=\ 9;}
\DoxyCodeLine{02385\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.displacement\_texname),}
\DoxyCodeLine{02386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.displacement\_texopt),\ token);}
\DoxyCodeLine{02387\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02388\ \ \ \ \ \}}
\DoxyCodeLine{02389\ }
\DoxyCodeLine{02390\ \ \ \ \ \textcolor{comment}{//\ displacement\ texture}}
\DoxyCodeLine{02391\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}disp"{}},\ 4))\ \&\&\ IS\_SPACE(token[4]))\ \{}
\DoxyCodeLine{02392\ \ \ \ \ \ \ token\ +=\ 5;}
\DoxyCodeLine{02393\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.displacement\_texname),}
\DoxyCodeLine{02394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.displacement\_texopt),\ token);}
\DoxyCodeLine{02395\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02396\ \ \ \ \ \}}
\DoxyCodeLine{02397\ }
\DoxyCodeLine{02398\ \ \ \ \ \textcolor{comment}{//\ reflection\ map}}
\DoxyCodeLine{02399\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}refl"{}},\ 4))\ \&\&\ IS\_SPACE(token[4]))\ \{}
\DoxyCodeLine{02400\ \ \ \ \ \ \ token\ +=\ 5;}
\DoxyCodeLine{02401\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.reflection\_texname),}
\DoxyCodeLine{02402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.reflection\_texopt),\ token);}
\DoxyCodeLine{02403\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02404\ \ \ \ \ \}}
\DoxyCodeLine{02405\ }
\DoxyCodeLine{02406\ \ \ \ \ \textcolor{comment}{//\ PBR:\ roughness\ texture}}
\DoxyCodeLine{02407\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Pr"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02408\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02409\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.roughness\_texname),}
\DoxyCodeLine{02410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.roughness\_texopt),\ token);}
\DoxyCodeLine{02411\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02412\ \ \ \ \ \}}
\DoxyCodeLine{02413\ }
\DoxyCodeLine{02414\ \ \ \ \ \textcolor{comment}{//\ PBR:\ metallic\ texture}}
\DoxyCodeLine{02415\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Pm"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02416\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02417\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.metallic\_texname),}
\DoxyCodeLine{02418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.metallic\_texopt),\ token);}
\DoxyCodeLine{02419\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02420\ \ \ \ \ \}}
\DoxyCodeLine{02421\ }
\DoxyCodeLine{02422\ \ \ \ \ \textcolor{comment}{//\ PBR:\ sheen\ texture}}
\DoxyCodeLine{02423\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Ps"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02424\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02425\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.sheen\_texname),}
\DoxyCodeLine{02426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.sheen\_texopt),\ token);}
\DoxyCodeLine{02427\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02428\ \ \ \ \ \}}
\DoxyCodeLine{02429\ }
\DoxyCodeLine{02430\ \ \ \ \ \textcolor{comment}{//\ PBR:\ emissive\ texture}}
\DoxyCodeLine{02431\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}map\_Ke"{}},\ 6))\ \&\&\ IS\_SPACE(token[6]))\ \{}
\DoxyCodeLine{02432\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02433\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.emissive\_texname),}
\DoxyCodeLine{02434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.emissive\_texopt),\ token);}
\DoxyCodeLine{02435\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02436\ \ \ \ \ \}}
\DoxyCodeLine{02437\ }
\DoxyCodeLine{02438\ \ \ \ \ \textcolor{comment}{//\ PBR:\ normal\ map\ texture}}
\DoxyCodeLine{02439\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}norm"{}},\ 4))\ \&\&\ IS\_SPACE(token[4]))\ \{}
\DoxyCodeLine{02440\ \ \ \ \ \ \ token\ +=\ 5;}
\DoxyCodeLine{02441\ \ \ \ \ \ \ ParseTextureNameAndOption(\&(material.normal\_texname),}
\DoxyCodeLine{02442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(material.normal\_texopt),\ token);}
\DoxyCodeLine{02443\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02444\ \ \ \ \ \}}
\DoxyCodeLine{02445\ }
\DoxyCodeLine{02446\ \ \ \ \ \textcolor{comment}{//\ unknown\ parameter}}
\DoxyCodeLine{02447\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\_space\ =\ strchr(token,\ \textcolor{charliteral}{'\ '});}
\DoxyCodeLine{02448\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_space)\ \{}
\DoxyCodeLine{02449\ \ \ \ \ \ \ \_space\ =\ strchr(token,\ \textcolor{charliteral}{'\(\backslash\)t'});}
\DoxyCodeLine{02450\ \ \ \ \ \}}
\DoxyCodeLine{02451\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_space)\ \{}
\DoxyCodeLine{02452\ \ \ \ \ \ \ std::ptrdiff\_t\ len\ =\ \_space\ -\/\ token;}
\DoxyCodeLine{02453\ \ \ \ \ \ \ std::string\ key(token,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(len));}
\DoxyCodeLine{02454\ \ \ \ \ \ \ std::string\ value\ =\ \_space\ +\ 1;}
\DoxyCodeLine{02455\ \ \ \ \ \ \ material.unknown\_parameter.insert(}
\DoxyCodeLine{02456\ \ \ \ \ \ \ \ \ \ \ std::pair<std::string,\ std::string>(key,\ value));}
\DoxyCodeLine{02457\ \ \ \ \ \}}
\DoxyCodeLine{02458\ \ \ \}}
\DoxyCodeLine{02459\ \ \ \textcolor{comment}{//\ flush\ last\ material.}}
\DoxyCodeLine{02460\ \ \ material\_map-\/>insert(std::pair<std::string,\ int>(}
\DoxyCodeLine{02461\ \ \ \ \ \ \ material.name,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(materials-\/>size())));}
\DoxyCodeLine{02462\ \ \ materials-\/>push\_back(material);}
\DoxyCodeLine{02463\ }
\DoxyCodeLine{02464\ \ \ \textcolor{keywordflow}{if}\ (warning)\ \{}
\DoxyCodeLine{02465\ \ \ \ \ (*warning)\ =\ warn\_ss.str();}
\DoxyCodeLine{02466\ \ \ \}}
\DoxyCodeLine{02467\ \}}
\DoxyCodeLine{02468\ }
\DoxyCodeLine{02469\ \textcolor{keywordtype}{bool}\ MaterialFileReader::operator()(\textcolor{keyword}{const}\ std::string\ \&matId,}
\DoxyCodeLine{02470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,}
\DoxyCodeLine{02471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::map<std::string,\ int>\ *matMap,}
\DoxyCodeLine{02472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warn,\ std::string\ *err)\ \{}
\DoxyCodeLine{02473\ \ \ \textcolor{keywordflow}{if}\ (!m\_mtlBaseDir.empty())\ \{}
\DoxyCodeLine{02474\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{02475\ \ \ \ \ \textcolor{keywordtype}{char}\ sep\ =\ \textcolor{charliteral}{';'};}
\DoxyCodeLine{02476\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02477\ \ \ \ \ \textcolor{keywordtype}{char}\ sep\ =\ \textcolor{charliteral}{':'};}
\DoxyCodeLine{02478\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02479\ }
\DoxyCodeLine{02480\ \ \ \ \ \textcolor{comment}{//\ https://stackoverflow.com/questions/5167625/splitting-\/a-\/c-\/stdstring-\/using-\/tokens-\/e-\/g}}
\DoxyCodeLine{02481\ \ \ \ \ std::vector<std::string>\ paths;}
\DoxyCodeLine{02482\ \ \ \ \ std::istringstream\ f(m\_mtlBaseDir);}
\DoxyCodeLine{02483\ }
\DoxyCodeLine{02484\ \ \ \ \ std::string\ s;}
\DoxyCodeLine{02485\ \ \ \ \ \textcolor{keywordflow}{while}\ (getline(f,\ s,\ sep))\ \{}
\DoxyCodeLine{02486\ \ \ \ \ \ \ paths.push\_back(s);}
\DoxyCodeLine{02487\ \ \ \ \ \}}
\DoxyCodeLine{02488\ }
\DoxyCodeLine{02489\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ paths.size();\ i++)\ \{}
\DoxyCodeLine{02490\ \ \ \ \ \ \ std::string\ filepath\ =\ JoinPath(paths[i],\ matId);}
\DoxyCodeLine{02491\ }
\DoxyCodeLine{02492\ \ \ \ \ \ \ std::ifstream\ matIStream(filepath.c\_str());}
\DoxyCodeLine{02493\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (matIStream)\ \{}
\DoxyCodeLine{02494\ \ \ \ \ \ \ \ \ LoadMtl(matMap,\ materials,\ \&matIStream,\ warn,\ err);}
\DoxyCodeLine{02495\ }
\DoxyCodeLine{02496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02497\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02498\ \ \ \ \ \}}
\DoxyCodeLine{02499\ }
\DoxyCodeLine{02500\ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02501\ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Material\ file\ [\ "{}}\ <<\ matId}
\DoxyCodeLine{02502\ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ ]\ not\ found\ in\ a\ path\ :\ "{}}\ <<\ m\_mtlBaseDir\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{02503\ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02504\ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{02505\ \ \ \ \ \}}
\DoxyCodeLine{02506\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02507\ }
\DoxyCodeLine{02508\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02509\ \ \ \ \ std::string\ filepath\ =\ matId;}
\DoxyCodeLine{02510\ \ \ \ \ std::ifstream\ matIStream(filepath.c\_str());}
\DoxyCodeLine{02511\ \ \ \ \ \textcolor{keywordflow}{if}\ (matIStream)\ \{}
\DoxyCodeLine{02512\ \ \ \ \ \ \ LoadMtl(matMap,\ materials,\ \&matIStream,\ warn,\ err);}
\DoxyCodeLine{02513\ }
\DoxyCodeLine{02514\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02515\ \ \ \ \ \}}
\DoxyCodeLine{02516\ }
\DoxyCodeLine{02517\ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02518\ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Material\ file\ [\ "{}}\ <<\ filepath}
\DoxyCodeLine{02519\ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ ]\ not\ found\ in\ a\ path\ :\ "{}}\ <<\ m\_mtlBaseDir\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{02520\ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02521\ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{02522\ \ \ \ \ \}}
\DoxyCodeLine{02523\ }
\DoxyCodeLine{02524\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02525\ \ \ \}}
\DoxyCodeLine{02526\ \}}
\DoxyCodeLine{02527\ }
\DoxyCodeLine{02528\ \textcolor{keywordtype}{bool}\ MaterialStreamReader::operator()(\textcolor{keyword}{const}\ std::string\ \&matId,}
\DoxyCodeLine{02529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,}
\DoxyCodeLine{02530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::map<std::string,\ int>\ *matMap,}
\DoxyCodeLine{02531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warn,\ std::string\ *err)\ \{}
\DoxyCodeLine{02532\ \ \ (void)err;}
\DoxyCodeLine{02533\ \ \ (void)matId;}
\DoxyCodeLine{02534\ \ \ \textcolor{keywordflow}{if}\ (!m\_inStream)\ \{}
\DoxyCodeLine{02535\ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02536\ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Material\ stream\ in\ error\ state.\ \(\backslash\)n"{}};}
\DoxyCodeLine{02537\ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02538\ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{02539\ \ \ \ \ \}}
\DoxyCodeLine{02540\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02541\ \ \ \}}
\DoxyCodeLine{02542\ }
\DoxyCodeLine{02543\ \ \ LoadMtl(matMap,\ materials,\ \&m\_inStream,\ warn,\ err);}
\DoxyCodeLine{02544\ }
\DoxyCodeLine{02545\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{02546\ \}}
\DoxyCodeLine{02547\ }
\DoxyCodeLine{02548\ \textcolor{keywordtype}{bool}\ LoadObj(attrib\_t\ *attrib,\ std::vector<shape\_t>\ *shapes,}
\DoxyCodeLine{02549\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,\ std::string\ *warn,}
\DoxyCodeLine{02550\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *filename,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *mtl\_basedir,}
\DoxyCodeLine{02551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ triangulate,\ \textcolor{keywordtype}{bool}\ default\_vcols\_fallback)\ \{}
\DoxyCodeLine{02552\ \ \ attrib-\/>vertices.clear();}
\DoxyCodeLine{02553\ \ \ attrib-\/>normals.clear();}
\DoxyCodeLine{02554\ \ \ attrib-\/>texcoords.clear();}
\DoxyCodeLine{02555\ \ \ attrib-\/>colors.clear();}
\DoxyCodeLine{02556\ \ \ shapes-\/>clear();}
\DoxyCodeLine{02557\ }
\DoxyCodeLine{02558\ \ \ std::stringstream\ errss;}
\DoxyCodeLine{02559\ }
\DoxyCodeLine{02560\ \ \ std::ifstream\ ifs(filename);}
\DoxyCodeLine{02561\ \ \ \textcolor{keywordflow}{if}\ (!ifs)\ \{}
\DoxyCodeLine{02562\ \ \ \ \ errss\ <<\ \textcolor{stringliteral}{"{}Cannot\ open\ file\ ["{}}\ <<\ filename\ <<\ \textcolor{stringliteral}{"{}]\(\backslash\)n"{}};}
\DoxyCodeLine{02563\ \ \ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{02564\ \ \ \ \ \ \ (*err)\ =\ errss.str();}
\DoxyCodeLine{02565\ \ \ \ \ \}}
\DoxyCodeLine{02566\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02567\ \ \ \}}
\DoxyCodeLine{02568\ }
\DoxyCodeLine{02569\ \ \ std::string\ baseDir\ =\ mtl\_basedir\ ?\ mtl\_basedir\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{02570\ \ \ \textcolor{keywordflow}{if}\ (!baseDir.empty())\ \{}
\DoxyCodeLine{02571\ \textcolor{preprocessor}{\#ifndef\ \_WIN32}}
\DoxyCodeLine{02572\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ dirsep\ =\ \textcolor{charliteral}{'/'};}
\DoxyCodeLine{02573\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02574\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ dirsep\ =\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'};}
\DoxyCodeLine{02575\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02576\ \ \ \ \ \textcolor{keywordflow}{if}\ (baseDir[baseDir.length()\ -\/\ 1]\ !=\ dirsep)\ baseDir\ +=\ dirsep;}
\DoxyCodeLine{02577\ \ \ \}}
\DoxyCodeLine{02578\ \ \ MaterialFileReader\ matFileReader(baseDir);}
\DoxyCodeLine{02579\ }
\DoxyCodeLine{02580\ \ \ \textcolor{keywordflow}{return}\ LoadObj(attrib,\ shapes,\ materials,\ warn,\ err,\ \&ifs,\ \&matFileReader,}
\DoxyCodeLine{02581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ triangulate,\ default\_vcols\_fallback);}
\DoxyCodeLine{02582\ \}}
\DoxyCodeLine{02583\ }
\DoxyCodeLine{02584\ \textcolor{keywordtype}{bool}\ LoadObj(attrib\_t\ *attrib,\ std::vector<shape\_t>\ *shapes,}
\DoxyCodeLine{02585\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<material\_t>\ *materials,\ std::string\ *warn,}
\DoxyCodeLine{02586\ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err,\ std::istream\ *inStream,}
\DoxyCodeLine{02587\ \ \ \ \ \ \ \ \ \ \ \ \ \ MaterialReader\ *readMatFn\ \textcolor{comment}{/*=\ NULL*/},\ \textcolor{keywordtype}{bool}\ triangulate,}
\DoxyCodeLine{02588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ default\_vcols\_fallback)\ \{}
\DoxyCodeLine{02589\ \ \ std::stringstream\ errss;}
\DoxyCodeLine{02590\ }
\DoxyCodeLine{02591\ \ \ std::vector<real\_t>\ v;}
\DoxyCodeLine{02592\ \ \ std::vector<real\_t>\ vertex\_weights;\ \ \textcolor{comment}{//\ optional\ [w]\ component\ in\ \`{}v`}}
\DoxyCodeLine{02593\ \ \ std::vector<real\_t>\ vn;}
\DoxyCodeLine{02594\ \ \ std::vector<real\_t>\ vt;}
\DoxyCodeLine{02595\ \ \ std::vector<real\_t>\ vc;}
\DoxyCodeLine{02596\ \ \ std::vector<skin\_weight\_t>\ vw;\ \ \textcolor{comment}{//\ tinyobj\ extension:\ vertex\ skin\ weights}}
\DoxyCodeLine{02597\ \ \ std::vector<tag\_t>\ tags;}
\DoxyCodeLine{02598\ \ \ PrimGroup\ prim\_group;}
\DoxyCodeLine{02599\ \ \ std::string\ name;}
\DoxyCodeLine{02600\ }
\DoxyCodeLine{02601\ \ \ \textcolor{comment}{//\ material}}
\DoxyCodeLine{02602\ \ \ std::set<std::string>\ material\_filenames;}
\DoxyCodeLine{02603\ \ \ std::map<std::string,\ int>\ material\_map;}
\DoxyCodeLine{02604\ \ \ \textcolor{keywordtype}{int}\ material\ =\ -\/1;}
\DoxyCodeLine{02605\ }
\DoxyCodeLine{02606\ \ \ \textcolor{comment}{//\ smoothing\ group\ id}}
\DoxyCodeLine{02607\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ current\_smoothing\_id\ =}
\DoxyCodeLine{02608\ \ \ \ \ \ \ 0;\ \ \textcolor{comment}{//\ Initial\ value.\ 0\ means\ no\ smoothing.}}
\DoxyCodeLine{02609\ }
\DoxyCodeLine{02610\ \ \ \textcolor{keywordtype}{int}\ greatest\_v\_idx\ =\ -\/1;}
\DoxyCodeLine{02611\ \ \ \textcolor{keywordtype}{int}\ greatest\_vn\_idx\ =\ -\/1;}
\DoxyCodeLine{02612\ \ \ \textcolor{keywordtype}{int}\ greatest\_vt\_idx\ =\ -\/1;}
\DoxyCodeLine{02613\ }
\DoxyCodeLine{02614\ \ \ shape\_t\ shape;}
\DoxyCodeLine{02615\ }
\DoxyCodeLine{02616\ \ \ \textcolor{keywordtype}{bool}\ found\_all\_colors\ =\ \textcolor{keyword}{true};\ \ \textcolor{comment}{//\ check\ if\ all\ 'v'\ line\ has\ color\ info}}
\DoxyCodeLine{02617\ }
\DoxyCodeLine{02618\ \ \ \textcolor{keywordtype}{size\_t}\ line\_num\ =\ 0;}
\DoxyCodeLine{02619\ \ \ std::string\ linebuf;}
\DoxyCodeLine{02620\ \ \ \textcolor{keywordflow}{while}\ (inStream-\/>peek()\ !=\ -\/1)\ \{}
\DoxyCodeLine{02621\ \ \ \ \ safeGetline(*inStream,\ linebuf);}
\DoxyCodeLine{02622\ }
\DoxyCodeLine{02623\ \ \ \ \ line\_num++;}
\DoxyCodeLine{02624\ }
\DoxyCodeLine{02625\ \ \ \ \ \textcolor{comment}{//\ Trim\ newline\ '\(\backslash\)r\(\backslash\)n'\ or\ '\(\backslash\)n'}}
\DoxyCodeLine{02626\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{02627\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf[linebuf.size()\ -\/\ 1]\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{02628\ \ \ \ \ \ \ \ \ linebuf.erase(linebuf.size()\ -\/\ 1);}
\DoxyCodeLine{02629\ \ \ \ \ \}}
\DoxyCodeLine{02630\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{02631\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf[linebuf.size()\ -\/\ 1]\ ==\ \textcolor{charliteral}{'\(\backslash\)r'})}
\DoxyCodeLine{02632\ \ \ \ \ \ \ \ \ linebuf.erase(linebuf.size()\ -\/\ 1);}
\DoxyCodeLine{02633\ \ \ \ \ \}}
\DoxyCodeLine{02634\ }
\DoxyCodeLine{02635\ \ \ \ \ \textcolor{comment}{//\ Skip\ if\ empty\ line.}}
\DoxyCodeLine{02636\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.empty())\ \{}
\DoxyCodeLine{02637\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02638\ \ \ \ \ \}}
\DoxyCodeLine{02639\ }
\DoxyCodeLine{02640\ \ \ \ \ \textcolor{comment}{//\ Skip\ leading\ space.}}
\DoxyCodeLine{02641\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *token\ =\ linebuf.c\_str();}
\DoxyCodeLine{02642\ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{02643\ }
\DoxyCodeLine{02644\ \ \ \ \ assert(token);}
\DoxyCodeLine{02645\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\(\backslash\)0'})\ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{//\ empty\ line}}
\DoxyCodeLine{02646\ }
\DoxyCodeLine{02647\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\#'})\ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{//\ comment\ line}}
\DoxyCodeLine{02648\ }
\DoxyCodeLine{02649\ \ \ \ \ \textcolor{comment}{//\ vertex}}
\DoxyCodeLine{02650\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{02651\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02652\ \ \ \ \ \ \ real\_t\ x,\ y,\ z;}
\DoxyCodeLine{02653\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{02654\ }
\DoxyCodeLine{02655\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_components\ =\ parseVertexWithColor(\&x,\ \&y,\ \&z,\ \&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{02656\ \ \ \ \ \ \ found\_all\_colors\ \&=\ (num\_components\ ==\ 6);}
\DoxyCodeLine{02657\ }
\DoxyCodeLine{02658\ \ \ \ \ \ \ v.push\_back(x);}
\DoxyCodeLine{02659\ \ \ \ \ \ \ v.push\_back(y);}
\DoxyCodeLine{02660\ \ \ \ \ \ \ v.push\_back(z);}
\DoxyCodeLine{02661\ }
\DoxyCodeLine{02662\ \ \ \ \ \ \ vertex\_weights.push\_back(}
\DoxyCodeLine{02663\ \ \ \ \ \ \ \ \ \ \ r);\ \ \textcolor{comment}{//\ r\ =\ w,\ and\ initialized\ to\ 1.0\ when\ \`{}w`\ component\ is\ not\ found.}}
\DoxyCodeLine{02664\ }
\DoxyCodeLine{02665\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((num\_components\ ==\ 6)\ ||\ default\_vcols\_fallback)\ \{}
\DoxyCodeLine{02666\ \ \ \ \ \ \ \ \ vc.push\_back(r);}
\DoxyCodeLine{02667\ \ \ \ \ \ \ \ \ vc.push\_back(g);}
\DoxyCodeLine{02668\ \ \ \ \ \ \ \ \ vc.push\_back(b);}
\DoxyCodeLine{02669\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02670\ }
\DoxyCodeLine{02671\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02672\ \ \ \ \ \}}
\DoxyCodeLine{02673\ }
\DoxyCodeLine{02674\ \ \ \ \ \textcolor{comment}{//\ normal}}
\DoxyCodeLine{02675\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'n'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02676\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{02677\ \ \ \ \ \ \ real\_t\ x,\ y,\ z;}
\DoxyCodeLine{02678\ \ \ \ \ \ \ parseReal3(\&x,\ \&y,\ \&z,\ \&token);}
\DoxyCodeLine{02679\ \ \ \ \ \ \ vn.push\_back(x);}
\DoxyCodeLine{02680\ \ \ \ \ \ \ vn.push\_back(y);}
\DoxyCodeLine{02681\ \ \ \ \ \ \ vn.push\_back(z);}
\DoxyCodeLine{02682\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02683\ \ \ \ \ \}}
\DoxyCodeLine{02684\ }
\DoxyCodeLine{02685\ \ \ \ \ \textcolor{comment}{//\ texcoord}}
\DoxyCodeLine{02686\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'t'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02687\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{02688\ \ \ \ \ \ \ real\_t\ x,\ y;}
\DoxyCodeLine{02689\ \ \ \ \ \ \ parseReal2(\&x,\ \&y,\ \&token);}
\DoxyCodeLine{02690\ \ \ \ \ \ \ vt.push\_back(x);}
\DoxyCodeLine{02691\ \ \ \ \ \ \ vt.push\_back(y);}
\DoxyCodeLine{02692\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02693\ \ \ \ \ \}}
\DoxyCodeLine{02694\ }
\DoxyCodeLine{02695\ \ \ \ \ \textcolor{comment}{//\ skin\ weight.\ tinyobj\ extension}}
\DoxyCodeLine{02696\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'w'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{02697\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{02698\ }
\DoxyCodeLine{02699\ \ \ \ \ \ \ \textcolor{comment}{//\ vw\ <vid>\ <joint\_0>\ <weight\_0>\ <joint\_1>\ <weight\_1>\ ...}}
\DoxyCodeLine{02700\ \ \ \ \ \ \ \textcolor{comment}{//\ example:}}
\DoxyCodeLine{02701\ \ \ \ \ \ \ \textcolor{comment}{//\ vw\ 0\ 0\ 0.25\ 1\ 0.25\ 2\ 0.5}}
\DoxyCodeLine{02702\ }
\DoxyCodeLine{02703\ \ \ \ \ \ \ \textcolor{comment}{//\ TODO(syoyo):\ Add\ syntax\ check}}
\DoxyCodeLine{02704\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ vid\ =\ 0;}
\DoxyCodeLine{02705\ \ \ \ \ \ \ vid\ =\ parseInt(\&token);}
\DoxyCodeLine{02706\ }
\DoxyCodeLine{02707\ \ \ \ \ \ \ skin\_weight\_t\ sw;}
\DoxyCodeLine{02708\ }
\DoxyCodeLine{02709\ \ \ \ \ \ \ sw.vertex\_id\ =\ vid;}
\DoxyCodeLine{02710\ }
\DoxyCodeLine{02711\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{02712\ \ \ \ \ \ \ \ \ real\_t\ j,\ w;}
\DoxyCodeLine{02713\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ joint\_id\ should\ not\ be\ negative,\ weight\ may\ be\ negative}}
\DoxyCodeLine{02714\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO(syoyo):\ \#\ of\ elements\ check}}
\DoxyCodeLine{02715\ \ \ \ \ \ \ \ \ parseReal2(\&j,\ \&w,\ \&token,\ -\/1.0);}
\DoxyCodeLine{02716\ }
\DoxyCodeLine{02717\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (j\ <\ \textcolor{keyword}{static\_cast<}real\_t\textcolor{keyword}{>}(0))\ \{}
\DoxyCodeLine{02718\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{02719\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02720\ \ \ \ \ \ \ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Failed\ parse\ \`{}vw'\ line.\ joint\_id\ is\ negative.\ "{}}}
\DoxyCodeLine{02721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}line\ "{}}}
\DoxyCodeLine{02722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ line\_num\ <<\ \textcolor{stringliteral}{"{}.)\(\backslash\)n"{}};}
\DoxyCodeLine{02723\ \ \ \ \ \ \ \ \ \ \ \ \ (*err)\ +=\ ss.str();}
\DoxyCodeLine{02724\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02725\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02726\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02727\ }
\DoxyCodeLine{02728\ \ \ \ \ \ \ \ \ joint\_and\_weight\_t\ jw;}
\DoxyCodeLine{02729\ }
\DoxyCodeLine{02730\ \ \ \ \ \ \ \ \ jw.joint\_id\ =\ int(j);}
\DoxyCodeLine{02731\ \ \ \ \ \ \ \ \ jw.weight\ =\ w;}
\DoxyCodeLine{02732\ }
\DoxyCodeLine{02733\ \ \ \ \ \ \ \ \ sw.weightValues.push\_back(jw);}
\DoxyCodeLine{02734\ }
\DoxyCodeLine{02735\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\ =\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{02736\ \ \ \ \ \ \ \ \ token\ +=\ n;}
\DoxyCodeLine{02737\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02738\ }
\DoxyCodeLine{02739\ \ \ \ \ \ \ vw.push\_back(sw);}
\DoxyCodeLine{02740\ \ \ \ \ \}}
\DoxyCodeLine{02741\ }
\DoxyCodeLine{02742\ \ \ \ \ warning\_context\ context;}
\DoxyCodeLine{02743\ \ \ \ \ context.warn\ =\ warn;}
\DoxyCodeLine{02744\ \ \ \ \ context.line\_number\ =\ line\_num;}
\DoxyCodeLine{02745\ }
\DoxyCodeLine{02746\ \ \ \ \ \textcolor{comment}{//\ line}}
\DoxyCodeLine{02747\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'l'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{02748\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02749\ }
\DoxyCodeLine{02750\ \ \ \ \ \ \ \_\_line\_t\ line;}
\DoxyCodeLine{02751\ }
\DoxyCodeLine{02752\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{02753\ \ \ \ \ \ \ \ \ vertex\_index\_t\ vi;}
\DoxyCodeLine{02754\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!parseTriple(\&token,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(v.size()\ /\ 3),}
\DoxyCodeLine{02755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vn.size()\ /\ 3),}
\DoxyCodeLine{02756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vt.size()\ /\ 2),\ \&vi,\ context))\ \{}
\DoxyCodeLine{02757\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{02758\ \ \ \ \ \ \ \ \ \ \ \ \ (*err)\ +=}
\DoxyCodeLine{02759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ parse\ \`{}l'\ line\ (e.g.\ a\ zero\ value\ for\ vertex\ index.\ "{}}}
\DoxyCodeLine{02760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Line\ "{}}\ +}
\DoxyCodeLine{02761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ toString(line\_num)\ +\ \textcolor{stringliteral}{"{}).\(\backslash\)n"{}};}
\DoxyCodeLine{02762\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02763\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02764\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02765\ }
\DoxyCodeLine{02766\ \ \ \ \ \ \ \ \ line.vertex\_indices.push\_back(vi);}
\DoxyCodeLine{02767\ }
\DoxyCodeLine{02768\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\ =\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{02769\ \ \ \ \ \ \ \ \ token\ +=\ n;}
\DoxyCodeLine{02770\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02771\ }
\DoxyCodeLine{02772\ \ \ \ \ \ \ prim\_group.lineGroup.push\_back(line);}
\DoxyCodeLine{02773\ }
\DoxyCodeLine{02774\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02775\ \ \ \ \ \}}
\DoxyCodeLine{02776\ }
\DoxyCodeLine{02777\ \ \ \ \ \textcolor{comment}{//\ points}}
\DoxyCodeLine{02778\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'p'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{02779\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02780\ }
\DoxyCodeLine{02781\ \ \ \ \ \ \ \_\_points\_t\ pts;}
\DoxyCodeLine{02782\ }
\DoxyCodeLine{02783\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{02784\ \ \ \ \ \ \ \ \ vertex\_index\_t\ vi;}
\DoxyCodeLine{02785\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!parseTriple(\&token,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(v.size()\ /\ 3),}
\DoxyCodeLine{02786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vn.size()\ /\ 3),}
\DoxyCodeLine{02787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vt.size()\ /\ 2),\ \&vi,\ context))\ \{}
\DoxyCodeLine{02788\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{02789\ \ \ \ \ \ \ \ \ \ \ \ \ (*err)\ +=}
\DoxyCodeLine{02790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ parse\ \`{}p'\ line\ (e.g.\ a\ zero\ value\ for\ vertex\ index.\ "{}}}
\DoxyCodeLine{02791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Line\ "{}}\ +}
\DoxyCodeLine{02792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ toString(line\_num)\ +\ \textcolor{stringliteral}{"{}).\(\backslash\)n"{}};}
\DoxyCodeLine{02793\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02794\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02795\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02796\ }
\DoxyCodeLine{02797\ \ \ \ \ \ \ \ \ pts.vertex\_indices.push\_back(vi);}
\DoxyCodeLine{02798\ }
\DoxyCodeLine{02799\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\ =\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{02800\ \ \ \ \ \ \ \ \ token\ +=\ n;}
\DoxyCodeLine{02801\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02802\ }
\DoxyCodeLine{02803\ \ \ \ \ \ \ prim\_group.pointsGroup.push\_back(pts);}
\DoxyCodeLine{02804\ }
\DoxyCodeLine{02805\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02806\ \ \ \ \ \}}
\DoxyCodeLine{02807\ }
\DoxyCodeLine{02808\ \ \ \ \ \textcolor{comment}{//\ face}}
\DoxyCodeLine{02809\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'f'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{02810\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{02811\ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{02812\ }
\DoxyCodeLine{02813\ \ \ \ \ \ \ face\_t\ face;}
\DoxyCodeLine{02814\ }
\DoxyCodeLine{02815\ \ \ \ \ \ \ face.smoothing\_group\_id\ =\ current\_smoothing\_id;}
\DoxyCodeLine{02816\ \ \ \ \ \ \ face.vertex\_indices.reserve(3);}
\DoxyCodeLine{02817\ }
\DoxyCodeLine{02818\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{02819\ \ \ \ \ \ \ \ \ vertex\_index\_t\ vi;}
\DoxyCodeLine{02820\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!parseTriple(\&token,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(v.size()\ /\ 3),}
\DoxyCodeLine{02821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vn.size()\ /\ 3),}
\DoxyCodeLine{02822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vt.size()\ /\ 2),\ \&vi,\ context))\ \{}
\DoxyCodeLine{02823\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{02824\ \ \ \ \ \ \ \ \ \ \ \ \ (*err)\ +=}
\DoxyCodeLine{02825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ parse\ \`{}f'\ line\ (e.g.\ a\ zero\ value\ for\ vertex\ index\ "{}}}
\DoxyCodeLine{02826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}or\ invalid\ relative\ vertex\ index).\ Line\ "{}}\ +}
\DoxyCodeLine{02827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ toString(line\_num)\ +\ \textcolor{stringliteral}{"{}).\(\backslash\)n"{}};}
\DoxyCodeLine{02828\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02829\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02830\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02831\ }
\DoxyCodeLine{02832\ \ \ \ \ \ \ \ \ greatest\_v\_idx\ =\ greatest\_v\_idx\ >\ vi.v\_idx\ ?\ greatest\_v\_idx\ :\ vi.v\_idx;}
\DoxyCodeLine{02833\ \ \ \ \ \ \ \ \ greatest\_vn\_idx\ =}
\DoxyCodeLine{02834\ \ \ \ \ \ \ \ \ \ \ \ \ greatest\_vn\_idx\ >\ vi.vn\_idx\ ?\ greatest\_vn\_idx\ :\ vi.vn\_idx;}
\DoxyCodeLine{02835\ \ \ \ \ \ \ \ \ greatest\_vt\_idx\ =}
\DoxyCodeLine{02836\ \ \ \ \ \ \ \ \ \ \ \ \ greatest\_vt\_idx\ >\ vi.vt\_idx\ ?\ greatest\_vt\_idx\ :\ vi.vt\_idx;}
\DoxyCodeLine{02837\ }
\DoxyCodeLine{02838\ \ \ \ \ \ \ \ \ face.vertex\_indices.push\_back(vi);}
\DoxyCodeLine{02839\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\ =\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{02840\ \ \ \ \ \ \ \ \ token\ +=\ n;}
\DoxyCodeLine{02841\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02842\ }
\DoxyCodeLine{02843\ \ \ \ \ \ \ \textcolor{comment}{//\ replace\ with\ emplace\_back\ +\ std::move\ on\ C++11}}
\DoxyCodeLine{02844\ \ \ \ \ \ \ prim\_group.faceGroup.push\_back(face);}
\DoxyCodeLine{02845\ }
\DoxyCodeLine{02846\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02847\ \ \ \ \ \}}
\DoxyCodeLine{02848\ }
\DoxyCodeLine{02849\ \ \ \ \ \textcolor{comment}{//\ use\ mtl}}
\DoxyCodeLine{02850\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}usemtl"{}},\ 6)))\ \{}
\DoxyCodeLine{02851\ \ \ \ \ \ \ token\ +=\ 6;}
\DoxyCodeLine{02852\ \ \ \ \ \ \ std::string\ namebuf\ =\ parseString(\&token);}
\DoxyCodeLine{02853\ }
\DoxyCodeLine{02854\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ newMaterialId\ =\ -\/1;}
\DoxyCodeLine{02855\ \ \ \ \ \ \ std::map<std::string,\ int>::const\_iterator\ it\ =}
\DoxyCodeLine{02856\ \ \ \ \ \ \ \ \ \ \ material\_map.find(namebuf);}
\DoxyCodeLine{02857\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ material\_map.end())\ \{}
\DoxyCodeLine{02858\ \ \ \ \ \ \ \ \ newMaterialId\ =\ it-\/>second;}
\DoxyCodeLine{02859\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02860\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \{\ error!!\ material\ not\ found\ \}}}
\DoxyCodeLine{02861\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02862\ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ \textcolor{stringliteral}{"{}material\ [\ '"{}}\ +\ namebuf\ +\ \textcolor{stringliteral}{"{}'\ ]\ not\ found\ in\ .mtl\(\backslash\)n"{}};}
\DoxyCodeLine{02863\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02864\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02865\ }
\DoxyCodeLine{02866\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (newMaterialId\ !=\ material)\ \{}
\DoxyCodeLine{02867\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ per-\/face\ material.\ Thus\ we\ don't\ add\ \`{}shape`\ to\ \`{}shapes`\ at}}
\DoxyCodeLine{02868\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ time.}}
\DoxyCodeLine{02869\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ just\ clear\ \`{}faceGroup`\ after\ \`{}exportGroupsToShape()`\ call.}}
\DoxyCodeLine{02870\ \ \ \ \ \ \ \ \ exportGroupsToShape(\&shape,\ prim\_group,\ tags,\ material,\ name,}
\DoxyCodeLine{02871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ triangulate,\ v,\ warn);}
\DoxyCodeLine{02872\ \ \ \ \ \ \ \ \ prim\_group.faceGroup.clear();}
\DoxyCodeLine{02873\ \ \ \ \ \ \ \ \ material\ =\ newMaterialId;}
\DoxyCodeLine{02874\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02875\ }
\DoxyCodeLine{02876\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02877\ \ \ \ \ \}}
\DoxyCodeLine{02878\ }
\DoxyCodeLine{02879\ \ \ \ \ \textcolor{comment}{//\ load\ mtl}}
\DoxyCodeLine{02880\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}mtllib"{}},\ 6))\ \&\&\ IS\_SPACE((token[6])))\ \{}
\DoxyCodeLine{02881\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (readMatFn)\ \{}
\DoxyCodeLine{02882\ \ \ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{02883\ }
\DoxyCodeLine{02884\ \ \ \ \ \ \ \ \ std::vector<std::string>\ filenames;}
\DoxyCodeLine{02885\ \ \ \ \ \ \ \ \ SplitString(std::string(token),\ \textcolor{charliteral}{'\ '},\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ filenames);}
\DoxyCodeLine{02886\ }
\DoxyCodeLine{02887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (filenames.empty())\ \{}
\DoxyCodeLine{02888\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02889\ \ \ \ \ \ \ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02890\ \ \ \ \ \ \ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Looks\ like\ empty\ filename\ for\ mtllib.\ Use\ default\ "{}}}
\DoxyCodeLine{02891\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}material\ (line\ "{}}}
\DoxyCodeLine{02892\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ line\_num\ <<\ \textcolor{stringliteral}{"{}.)\(\backslash\)n"{}};}
\DoxyCodeLine{02893\ }
\DoxyCodeLine{02894\ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{02895\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02896\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02897\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02898\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ s\ =\ 0;\ s\ <\ filenames.size();\ s++)\ \{}
\DoxyCodeLine{02899\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (material\_filenames.count(filenames[s])\ >\ 0)\ \{}
\DoxyCodeLine{02900\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02902\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02903\ }
\DoxyCodeLine{02904\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ warn\_mtl;}
\DoxyCodeLine{02905\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ err\_mtl;}
\DoxyCodeLine{02906\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ok\ =\ (*readMatFn)(filenames[s].c\_str(),\ materials,}
\DoxyCodeLine{02907\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&material\_map,\ \&warn\_mtl,\ \&err\_mtl);}
\DoxyCodeLine{02908\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn\ \&\&\ (!warn\_mtl.empty()))\ \{}
\DoxyCodeLine{02909\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ warn\_mtl;}
\DoxyCodeLine{02910\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02911\ }
\DoxyCodeLine{02912\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ \&\&\ (!err\_mtl.empty()))\ \{}
\DoxyCodeLine{02913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*err)\ +=\ err\_mtl;}
\DoxyCodeLine{02914\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02915\ }
\DoxyCodeLine{02916\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ok)\ \{}
\DoxyCodeLine{02917\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{02918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ material\_filenames.insert(filenames[s]);}
\DoxyCodeLine{02919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02920\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02921\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02922\ }
\DoxyCodeLine{02923\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!found)\ \{}
\DoxyCodeLine{02924\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=}
\DoxyCodeLine{02926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ load\ material\ file(s).\ Use\ default\ "{}}}
\DoxyCodeLine{02927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}material.\(\backslash\)n"{}};}
\DoxyCodeLine{02928\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02929\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02930\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02931\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02932\ }
\DoxyCodeLine{02933\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02934\ \ \ \ \ \}}
\DoxyCodeLine{02935\ }
\DoxyCodeLine{02936\ \ \ \ \ \textcolor{comment}{//\ group\ name}}
\DoxyCodeLine{02937\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'g'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{02938\ \ \ \ \ \ \ \textcolor{comment}{//\ flush\ previous\ face\ group.}}
\DoxyCodeLine{02939\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ exportGroupsToShape(\&shape,\ prim\_group,\ tags,\ material,\ name,}
\DoxyCodeLine{02940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ triangulate,\ v,\ warn);}
\DoxyCodeLine{02941\ \ \ \ \ \ \ (void)ret;\ \ \textcolor{comment}{//\ return\ value\ not\ used.}}
\DoxyCodeLine{02942\ }
\DoxyCodeLine{02943\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (shape.mesh.indices.size()\ >\ 0)\ \{}
\DoxyCodeLine{02944\ \ \ \ \ \ \ \ \ shapes-\/>push\_back(shape);}
\DoxyCodeLine{02945\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02946\ }
\DoxyCodeLine{02947\ \ \ \ \ \ \ shape\ =\ shape\_t();}
\DoxyCodeLine{02948\ }
\DoxyCodeLine{02949\ \ \ \ \ \ \ \textcolor{comment}{//\ material\ =\ -\/1;}}
\DoxyCodeLine{02950\ \ \ \ \ \ \ prim\_group.clear();}
\DoxyCodeLine{02951\ }
\DoxyCodeLine{02952\ \ \ \ \ \ \ std::vector<std::string>\ names;}
\DoxyCodeLine{02953\ }
\DoxyCodeLine{02954\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{02955\ \ \ \ \ \ \ \ \ std::string\ str\ =\ parseString(\&token);}
\DoxyCodeLine{02956\ \ \ \ \ \ \ \ \ names.push\_back(str);}
\DoxyCodeLine{02957\ \ \ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});\ \ \textcolor{comment}{//\ skip\ tag}}
\DoxyCodeLine{02958\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02959\ }
\DoxyCodeLine{02960\ \ \ \ \ \ \ \textcolor{comment}{//\ names[0]\ must\ be\ 'g'}}
\DoxyCodeLine{02961\ }
\DoxyCodeLine{02962\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (names.size()\ <\ 2)\ \{}
\DoxyCodeLine{02963\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 'g'\ with\ empty\ names}}
\DoxyCodeLine{02964\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{02965\ \ \ \ \ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02966\ \ \ \ \ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Empty\ group\ name.\ line:\ "{}}\ <<\ line\_num\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{02967\ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{02968\ \ \ \ \ \ \ \ \ \ \ name\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{02969\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02970\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02971\ \ \ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{02972\ \ \ \ \ \ \ \ \ ss\ <<\ names[1];}
\DoxyCodeLine{02973\ }
\DoxyCodeLine{02974\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ tinyobjloader\ does\ not\ support\ multiple\ groups\ for\ a\ primitive.}}
\DoxyCodeLine{02975\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Currently\ we\ concatinate\ multiple\ group\ names\ with\ a\ space\ to\ get}}
\DoxyCodeLine{02976\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ single\ group\ name.}}
\DoxyCodeLine{02977\ }
\DoxyCodeLine{02978\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 2;\ i\ <\ names.size();\ i++)\ \{}
\DoxyCodeLine{02979\ \ \ \ \ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ names[i];}
\DoxyCodeLine{02980\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02981\ }
\DoxyCodeLine{02982\ \ \ \ \ \ \ \ \ name\ =\ ss.str();}
\DoxyCodeLine{02983\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02984\ }
\DoxyCodeLine{02985\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02986\ \ \ \ \ \}}
\DoxyCodeLine{02987\ }
\DoxyCodeLine{02988\ \ \ \ \ \textcolor{comment}{//\ object\ name}}
\DoxyCodeLine{02989\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'o'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{02990\ \ \ \ \ \ \ \textcolor{comment}{//\ flush\ previous\ face\ group.}}
\DoxyCodeLine{02991\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ exportGroupsToShape(\&shape,\ prim\_group,\ tags,\ material,\ name,}
\DoxyCodeLine{02992\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ triangulate,\ v,\ warn);}
\DoxyCodeLine{02993\ \ \ \ \ \ \ (void)ret;\ \ \textcolor{comment}{//\ return\ value\ not\ used.}}
\DoxyCodeLine{02994\ }
\DoxyCodeLine{02995\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (shape.mesh.indices.size()\ >\ 0\ ||\ shape.lines.indices.size()\ >\ 0\ ||}
\DoxyCodeLine{02996\ \ \ \ \ \ \ \ \ \ \ shape.points.indices.size()\ >\ 0)\ \{}
\DoxyCodeLine{02997\ \ \ \ \ \ \ \ \ shapes-\/>push\_back(shape);}
\DoxyCodeLine{02998\ \ \ \ \ \ \ \}}
\DoxyCodeLine{02999\ }
\DoxyCodeLine{03000\ \ \ \ \ \ \ \textcolor{comment}{//\ material\ =\ -\/1;}}
\DoxyCodeLine{03001\ \ \ \ \ \ \ prim\_group.clear();}
\DoxyCodeLine{03002\ \ \ \ \ \ \ shape\ =\ shape\_t();}
\DoxyCodeLine{03003\ }
\DoxyCodeLine{03004\ \ \ \ \ \ \ \textcolor{comment}{//\ @todo\ \{\ multiple\ object\ name?\ \}}}
\DoxyCodeLine{03005\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03006\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03007\ \ \ \ \ \ \ ss\ <<\ token;}
\DoxyCodeLine{03008\ \ \ \ \ \ \ name\ =\ ss.str();}
\DoxyCodeLine{03009\ }
\DoxyCodeLine{03010\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03011\ \ \ \ \ \}}
\DoxyCodeLine{03012\ }
\DoxyCodeLine{03013\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'t'}\ \&\&\ IS\_SPACE(token[1]))\ \{}
\DoxyCodeLine{03014\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_tag\_nums\ =\ 8192;\ \ \textcolor{comment}{//\ FIXME(syoyo):\ Parameterize.}}
\DoxyCodeLine{03015\ \ \ \ \ \ \ tag\_t\ tag;}
\DoxyCodeLine{03016\ }
\DoxyCodeLine{03017\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03018\ }
\DoxyCodeLine{03019\ \ \ \ \ \ \ tag.name\ =\ parseString(\&token);}
\DoxyCodeLine{03020\ }
\DoxyCodeLine{03021\ \ \ \ \ \ \ tag\_sizes\ ts\ =\ parseTagTriple(\&token);}
\DoxyCodeLine{03022\ }
\DoxyCodeLine{03023\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ts.num\_ints\ <\ 0)\ \{}
\DoxyCodeLine{03024\ \ \ \ \ \ \ \ \ ts.num\_ints\ =\ 0;}
\DoxyCodeLine{03025\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03026\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ts.num\_ints\ >\ max\_tag\_nums)\ \{}
\DoxyCodeLine{03027\ \ \ \ \ \ \ \ \ ts.num\_ints\ =\ max\_tag\_nums;}
\DoxyCodeLine{03028\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03029\ }
\DoxyCodeLine{03030\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ts.num\_reals\ <\ 0)\ \{}
\DoxyCodeLine{03031\ \ \ \ \ \ \ \ \ ts.num\_reals\ =\ 0;}
\DoxyCodeLine{03032\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03033\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ts.num\_reals\ >\ max\_tag\_nums)\ \{}
\DoxyCodeLine{03034\ \ \ \ \ \ \ \ \ ts.num\_reals\ =\ max\_tag\_nums;}
\DoxyCodeLine{03035\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03036\ }
\DoxyCodeLine{03037\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ts.num\_strings\ <\ 0)\ \{}
\DoxyCodeLine{03038\ \ \ \ \ \ \ \ \ ts.num\_strings\ =\ 0;}
\DoxyCodeLine{03039\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03040\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ts.num\_strings\ >\ max\_tag\_nums)\ \{}
\DoxyCodeLine{03041\ \ \ \ \ \ \ \ \ ts.num\_strings\ =\ max\_tag\_nums;}
\DoxyCodeLine{03042\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03043\ }
\DoxyCodeLine{03044\ \ \ \ \ \ \ tag.intValues.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ts.num\_ints));}
\DoxyCodeLine{03045\ }
\DoxyCodeLine{03046\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ static\_cast<size\_t>(ts.num\_ints);\ ++i)\ \{}
\DoxyCodeLine{03047\ \ \ \ \ \ \ \ \ tag.intValues[i]\ =\ parseInt(\&token);}
\DoxyCodeLine{03048\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03049\ }
\DoxyCodeLine{03050\ \ \ \ \ \ \ tag.floatValues.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ts.num\_reals));}
\DoxyCodeLine{03051\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ static\_cast<size\_t>(ts.num\_reals);\ ++i)\ \{}
\DoxyCodeLine{03052\ \ \ \ \ \ \ \ \ tag.floatValues[i]\ =\ parseReal(\&token);}
\DoxyCodeLine{03053\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03054\ }
\DoxyCodeLine{03055\ \ \ \ \ \ \ tag.stringValues.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ts.num\_strings));}
\DoxyCodeLine{03056\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ static\_cast<size\_t>(ts.num\_strings);\ ++i)\ \{}
\DoxyCodeLine{03057\ \ \ \ \ \ \ \ \ tag.stringValues[i]\ =\ parseString(\&token);}
\DoxyCodeLine{03058\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03059\ }
\DoxyCodeLine{03060\ \ \ \ \ \ \ tags.push\_back(tag);}
\DoxyCodeLine{03061\ }
\DoxyCodeLine{03062\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03063\ \ \ \ \ \}}
\DoxyCodeLine{03064\ }
\DoxyCodeLine{03065\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'s'}\ \&\&\ IS\_SPACE(token[1]))\ \{}
\DoxyCodeLine{03066\ \ \ \ \ \ \ \textcolor{comment}{//\ smoothing\ group\ id}}
\DoxyCodeLine{03067\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03068\ }
\DoxyCodeLine{03069\ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ space.}}
\DoxyCodeLine{03070\ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});\ \ \textcolor{comment}{//\ skip\ space}}
\DoxyCodeLine{03071\ }
\DoxyCodeLine{03072\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\(\backslash\)0'})\ \{}
\DoxyCodeLine{03073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03074\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03075\ }
\DoxyCodeLine{03076\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\(\backslash\)r'}\ ||\ token[1]\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})\ \{}
\DoxyCodeLine{03077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03078\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03079\ }
\DoxyCodeLine{03080\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (strlen(token)\ >=\ 3\ \&\&\ token[0]\ ==\ \textcolor{charliteral}{'o'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'f'}\ \&\&}
\DoxyCodeLine{03081\ \ \ \ \ \ \ \ \ \ \ token[2]\ ==\ \textcolor{charliteral}{'f'})\ \{}
\DoxyCodeLine{03082\ \ \ \ \ \ \ \ \ current\_smoothing\_id\ =\ 0;}
\DoxyCodeLine{03083\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03084\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ assume\ number}}
\DoxyCodeLine{03085\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ smGroupId\ =\ parseInt(\&token);}
\DoxyCodeLine{03086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (smGroupId\ <\ 0)\ \{}
\DoxyCodeLine{03087\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ parse\ error.\ force\ set\ to\ 0.}}
\DoxyCodeLine{03088\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME(syoyo):\ Report\ warning.}}
\DoxyCodeLine{03089\ \ \ \ \ \ \ \ \ \ \ current\_smoothing\_id\ =\ 0;}
\DoxyCodeLine{03090\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03091\ \ \ \ \ \ \ \ \ \ \ current\_smoothing\_id\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(smGroupId);}
\DoxyCodeLine{03092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03093\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03094\ }
\DoxyCodeLine{03095\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03096\ \ \ \ \ \}\ \ \textcolor{comment}{//\ smoothing\ group\ id}}
\DoxyCodeLine{03097\ }
\DoxyCodeLine{03098\ \ \ \ \ \textcolor{comment}{//\ Ignore\ unknown\ command.}}
\DoxyCodeLine{03099\ \ \ \}}
\DoxyCodeLine{03100\ }
\DoxyCodeLine{03101\ \ \ \textcolor{comment}{//\ not\ all\ vertices\ have\ colors,\ no\ default\ colors\ desired?\ -\/>\ clear\ colors}}
\DoxyCodeLine{03102\ \ \ \textcolor{keywordflow}{if}\ (!found\_all\_colors\ \&\&\ !default\_vcols\_fallback)\ \{}
\DoxyCodeLine{03103\ \ \ \ \ vc.clear();}
\DoxyCodeLine{03104\ \ \ \}}
\DoxyCodeLine{03105\ }
\DoxyCodeLine{03106\ \ \ \textcolor{keywordflow}{if}\ (greatest\_v\_idx\ >=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(v.size()\ /\ 3))\ \{}
\DoxyCodeLine{03107\ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{03108\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03109\ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Vertex\ indices\ out\ of\ bounds\ (line\ "{}}\ <<\ line\_num\ <<\ \textcolor{stringliteral}{"{}.)\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{03110\ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{03111\ \ \ \ \ \}}
\DoxyCodeLine{03112\ \ \ \}}
\DoxyCodeLine{03113\ \ \ \textcolor{keywordflow}{if}\ (greatest\_vn\_idx\ >=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vn.size()\ /\ 3))\ \{}
\DoxyCodeLine{03114\ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{03115\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03116\ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Vertex\ normal\ indices\ out\ of\ bounds\ (line\ "{}}\ <<\ line\_num}
\DoxyCodeLine{03117\ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}.)\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{03118\ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{03119\ \ \ \ \ \}}
\DoxyCodeLine{03120\ \ \ \}}
\DoxyCodeLine{03121\ \ \ \textcolor{keywordflow}{if}\ (greatest\_vt\_idx\ >=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vt.size()\ /\ 2))\ \{}
\DoxyCodeLine{03122\ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{03123\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03124\ \ \ \ \ \ \ ss\ <<\ \textcolor{stringliteral}{"{}Vertex\ texcoord\ indices\ out\ of\ bounds\ (line\ "{}}\ <<\ line\_num}
\DoxyCodeLine{03125\ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}.)\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{03126\ \ \ \ \ \ \ (*warn)\ +=\ ss.str();}
\DoxyCodeLine{03127\ \ \ \ \ \}}
\DoxyCodeLine{03128\ \ \ \}}
\DoxyCodeLine{03129\ }
\DoxyCodeLine{03130\ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ exportGroupsToShape(\&shape,\ prim\_group,\ tags,\ material,\ name,}
\DoxyCodeLine{03131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ triangulate,\ v,\ warn);}
\DoxyCodeLine{03132\ \ \ \textcolor{comment}{//\ exportGroupsToShape\ return\ false\ when\ \`{}usemtl`\ is\ called\ in\ the\ last}}
\DoxyCodeLine{03133\ \ \ \textcolor{comment}{//\ line.}}
\DoxyCodeLine{03134\ \ \ \textcolor{comment}{//\ we\ also\ add\ \`{}shape`\ to\ \`{}shapes`\ when\ \`{}shape.mesh`\ has\ already\ some}}
\DoxyCodeLine{03135\ \ \ \textcolor{comment}{//\ faces(indices)}}
\DoxyCodeLine{03136\ \ \ \textcolor{keywordflow}{if}\ (ret\ ||\ shape.mesh.indices}
\DoxyCodeLine{03137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .size())\ \{\ \ \textcolor{comment}{//\ FIXME(syoyo):\ Support\ other\ prims(e.g.\ lines)}}
\DoxyCodeLine{03138\ \ \ \ \ shapes-\/>push\_back(shape);}
\DoxyCodeLine{03139\ \ \ \}}
\DoxyCodeLine{03140\ \ \ prim\_group.clear();\ \ \textcolor{comment}{//\ for\ safety}}
\DoxyCodeLine{03141\ }
\DoxyCodeLine{03142\ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{03143\ \ \ \ \ (*err)\ +=\ errss.str();}
\DoxyCodeLine{03144\ \ \ \}}
\DoxyCodeLine{03145\ }
\DoxyCodeLine{03146\ \ \ attrib-\/>vertices.swap(v);}
\DoxyCodeLine{03147\ \ \ attrib-\/>vertex\_weights.swap(vertex\_weights);}
\DoxyCodeLine{03148\ \ \ attrib-\/>normals.swap(vn);}
\DoxyCodeLine{03149\ \ \ attrib-\/>texcoords.swap(vt);}
\DoxyCodeLine{03150\ \ \ attrib-\/>texcoord\_ws.swap(vt);}
\DoxyCodeLine{03151\ \ \ attrib-\/>colors.swap(vc);}
\DoxyCodeLine{03152\ \ \ attrib-\/>skin\_weights.swap(vw);}
\DoxyCodeLine{03153\ }
\DoxyCodeLine{03154\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{03155\ \}}
\DoxyCodeLine{03156\ }
\DoxyCodeLine{03157\ \textcolor{keywordtype}{bool}\ LoadObjWithCallback(std::istream\ \&inStream,\ \textcolor{keyword}{const}\ callback\_t\ \&callback,}
\DoxyCodeLine{03158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *user\_data\ \textcolor{comment}{/*=\ NULL*/},}
\DoxyCodeLine{03159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MaterialReader\ *readMatFn\ \textcolor{comment}{/*=\ NULL*/},}
\DoxyCodeLine{03160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *warn,\ \textcolor{comment}{/*\ =\ NULL*/}}
\DoxyCodeLine{03161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ *err\ \textcolor{comment}{/*=\ NULL*/})\ \{}
\DoxyCodeLine{03162\ \ \ std::stringstream\ errss;}
\DoxyCodeLine{03163\ }
\DoxyCodeLine{03164\ \ \ \textcolor{comment}{//\ material}}
\DoxyCodeLine{03165\ \ \ std::set<std::string>\ material\_filenames;}
\DoxyCodeLine{03166\ \ \ std::map<std::string,\ int>\ material\_map;}
\DoxyCodeLine{03167\ \ \ \textcolor{keywordtype}{int}\ material\_id\ =\ -\/1;\ \ \textcolor{comment}{//\ -\/1\ =\ invalid}}
\DoxyCodeLine{03168\ }
\DoxyCodeLine{03169\ \ \ std::vector<index\_t>\ indices;}
\DoxyCodeLine{03170\ \ \ std::vector<material\_t>\ materials;}
\DoxyCodeLine{03171\ \ \ std::vector<std::string>\ names;}
\DoxyCodeLine{03172\ \ \ names.reserve(2);}
\DoxyCodeLine{03173\ \ \ std::vector<const\ char\ *>\ names\_out;}
\DoxyCodeLine{03174\ }
\DoxyCodeLine{03175\ \ \ std::string\ linebuf;}
\DoxyCodeLine{03176\ \ \ \textcolor{keywordflow}{while}\ (inStream.peek()\ !=\ -\/1)\ \{}
\DoxyCodeLine{03177\ \ \ \ \ safeGetline(inStream,\ linebuf);}
\DoxyCodeLine{03178\ }
\DoxyCodeLine{03179\ \ \ \ \ \textcolor{comment}{//\ Trim\ newline\ '\(\backslash\)r\(\backslash\)n'\ or\ '\(\backslash\)n'}}
\DoxyCodeLine{03180\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{03181\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf[linebuf.size()\ -\/\ 1]\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{03182\ \ \ \ \ \ \ \ \ linebuf.erase(linebuf.size()\ -\/\ 1);}
\DoxyCodeLine{03183\ \ \ \ \ \}}
\DoxyCodeLine{03184\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.size()\ >\ 0)\ \{}
\DoxyCodeLine{03185\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf[linebuf.size()\ -\/\ 1]\ ==\ \textcolor{charliteral}{'\(\backslash\)r'})}
\DoxyCodeLine{03186\ \ \ \ \ \ \ \ \ linebuf.erase(linebuf.size()\ -\/\ 1);}
\DoxyCodeLine{03187\ \ \ \ \ \}}
\DoxyCodeLine{03188\ }
\DoxyCodeLine{03189\ \ \ \ \ \textcolor{comment}{//\ Skip\ if\ empty\ line.}}
\DoxyCodeLine{03190\ \ \ \ \ \textcolor{keywordflow}{if}\ (linebuf.empty())\ \{}
\DoxyCodeLine{03191\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03192\ \ \ \ \ \}}
\DoxyCodeLine{03193\ }
\DoxyCodeLine{03194\ \ \ \ \ \textcolor{comment}{//\ Skip\ leading\ space.}}
\DoxyCodeLine{03195\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *token\ =\ linebuf.c\_str();}
\DoxyCodeLine{03196\ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{03197\ }
\DoxyCodeLine{03198\ \ \ \ \ assert(token);}
\DoxyCodeLine{03199\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\(\backslash\)0'})\ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{//\ empty\ line}}
\DoxyCodeLine{03200\ }
\DoxyCodeLine{03201\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'\#'})\ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{//\ comment\ line}}
\DoxyCodeLine{03202\ }
\DoxyCodeLine{03203\ \ \ \ \ \textcolor{comment}{//\ vertex}}
\DoxyCodeLine{03204\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{03205\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03206\ \ \ \ \ \ \ real\_t\ x,\ y,\ z;}
\DoxyCodeLine{03207\ \ \ \ \ \ \ real\_t\ r,\ g,\ b;}
\DoxyCodeLine{03208\ }
\DoxyCodeLine{03209\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_components\ =\ parseVertexWithColor(\&x,\ \&y,\ \&z,\ \&r,\ \&g,\ \&b,\ \&token);}
\DoxyCodeLine{03210\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.vertex\_cb)\ \{}
\DoxyCodeLine{03211\ \ \ \ \ \ \ \ \ callback.vertex\_cb(user\_data,\ x,\ y,\ z,\ r);\ \ \textcolor{comment}{//\ r=w\ is\ optional}}
\DoxyCodeLine{03212\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03213\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.vertex\_color\_cb)\ \{}
\DoxyCodeLine{03214\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ found\_color\ =\ (num\_components\ ==\ 6);}
\DoxyCodeLine{03215\ \ \ \ \ \ \ \ \ callback.vertex\_color\_cb(user\_data,\ x,\ y,\ z,\ r,\ g,\ b,\ found\_color);}
\DoxyCodeLine{03216\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03217\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03218\ \ \ \ \ \}}
\DoxyCodeLine{03219\ }
\DoxyCodeLine{03220\ \ \ \ \ \textcolor{comment}{//\ normal}}
\DoxyCodeLine{03221\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'n'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{03222\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{03223\ \ \ \ \ \ \ real\_t\ x,\ y,\ z;}
\DoxyCodeLine{03224\ \ \ \ \ \ \ parseReal3(\&x,\ \&y,\ \&z,\ \&token);}
\DoxyCodeLine{03225\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.normal\_cb)\ \{}
\DoxyCodeLine{03226\ \ \ \ \ \ \ \ \ callback.normal\_cb(user\_data,\ x,\ y,\ z);}
\DoxyCodeLine{03227\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03228\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03229\ \ \ \ \ \}}
\DoxyCodeLine{03230\ }
\DoxyCodeLine{03231\ \ \ \ \ \textcolor{comment}{//\ texcoord}}
\DoxyCodeLine{03232\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'v'}\ \&\&\ token[1]\ ==\ \textcolor{charliteral}{'t'}\ \&\&\ IS\_SPACE((token[2])))\ \{}
\DoxyCodeLine{03233\ \ \ \ \ \ \ token\ +=\ 3;}
\DoxyCodeLine{03234\ \ \ \ \ \ \ real\_t\ x,\ y,\ z;\ \ \textcolor{comment}{//\ y\ and\ z\ are\ optional.\ default\ =\ 0.0}}
\DoxyCodeLine{03235\ \ \ \ \ \ \ parseReal3(\&x,\ \&y,\ \&z,\ \&token);}
\DoxyCodeLine{03236\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.texcoord\_cb)\ \{}
\DoxyCodeLine{03237\ \ \ \ \ \ \ \ \ callback.texcoord\_cb(user\_data,\ x,\ y,\ z);}
\DoxyCodeLine{03238\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03239\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03240\ \ \ \ \ \}}
\DoxyCodeLine{03241\ }
\DoxyCodeLine{03242\ \ \ \ \ \textcolor{comment}{//\ face}}
\DoxyCodeLine{03243\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'f'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{03244\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03245\ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t"{}});}
\DoxyCodeLine{03246\ }
\DoxyCodeLine{03247\ \ \ \ \ \ \ indices.clear();}
\DoxyCodeLine{03248\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{03249\ \ \ \ \ \ \ \ \ vertex\_index\_t\ vi\ =\ parseRawTriple(\&token);}
\DoxyCodeLine{03250\ }
\DoxyCodeLine{03251\ \ \ \ \ \ \ \ \ index\_t\ idx;}
\DoxyCodeLine{03252\ \ \ \ \ \ \ \ \ idx.vertex\_index\ =\ vi.v\_idx;}
\DoxyCodeLine{03253\ \ \ \ \ \ \ \ \ idx.normal\_index\ =\ vi.vn\_idx;}
\DoxyCodeLine{03254\ \ \ \ \ \ \ \ \ idx.texcoord\_index\ =\ vi.vt\_idx;}
\DoxyCodeLine{03255\ }
\DoxyCodeLine{03256\ \ \ \ \ \ \ \ \ indices.push\_back(idx);}
\DoxyCodeLine{03257\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\ =\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});}
\DoxyCodeLine{03258\ \ \ \ \ \ \ \ \ token\ +=\ n;}
\DoxyCodeLine{03259\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03260\ }
\DoxyCodeLine{03261\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.index\_cb\ \&\&\ indices.size()\ >\ 0)\ \{}
\DoxyCodeLine{03262\ \ \ \ \ \ \ \ \ callback.index\_cb(user\_data,\ \&indices.at(0),}
\DoxyCodeLine{03263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(indices.size()));}
\DoxyCodeLine{03264\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03265\ }
\DoxyCodeLine{03266\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03267\ \ \ \ \ \}}
\DoxyCodeLine{03268\ }
\DoxyCodeLine{03269\ \ \ \ \ \textcolor{comment}{//\ use\ mtl}}
\DoxyCodeLine{03270\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}usemtl"{}},\ 6))\ \&\&\ IS\_SPACE((token[6])))\ \{}
\DoxyCodeLine{03271\ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{03272\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03273\ \ \ \ \ \ \ ss\ <<\ token;}
\DoxyCodeLine{03274\ \ \ \ \ \ \ std::string\ namebuf\ =\ ss.str();}
\DoxyCodeLine{03275\ }
\DoxyCodeLine{03276\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ newMaterialId\ =\ -\/1;}
\DoxyCodeLine{03277\ \ \ \ \ \ \ std::map<std::string,\ int>::const\_iterator\ it\ =}
\DoxyCodeLine{03278\ \ \ \ \ \ \ \ \ \ \ material\_map.find(namebuf);}
\DoxyCodeLine{03279\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ material\_map.end())\ \{}
\DoxyCodeLine{03280\ \ \ \ \ \ \ \ \ newMaterialId\ =\ it-\/>second;}
\DoxyCodeLine{03281\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03282\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \{\ warn!!\ material\ not\ found\ \}}}
\DoxyCodeLine{03283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn\ \&\&\ (!callback.usemtl\_cb))\ \{}
\DoxyCodeLine{03284\ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ \textcolor{stringliteral}{"{}material\ [\ "{}}\ +\ namebuf\ +\ \textcolor{stringliteral}{"{}\ ]\ not\ found\ in\ .mtl\(\backslash\)n"{}};}
\DoxyCodeLine{03285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03286\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03287\ }
\DoxyCodeLine{03288\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (newMaterialId\ !=\ material\_id)\ \{}
\DoxyCodeLine{03289\ \ \ \ \ \ \ \ \ material\_id\ =\ newMaterialId;}
\DoxyCodeLine{03290\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03291\ }
\DoxyCodeLine{03292\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.usemtl\_cb)\ \{}
\DoxyCodeLine{03293\ \ \ \ \ \ \ \ \ callback.usemtl\_cb(user\_data,\ namebuf.c\_str(),\ material\_id);}
\DoxyCodeLine{03294\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03295\ }
\DoxyCodeLine{03296\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03297\ \ \ \ \ \}}
\DoxyCodeLine{03298\ }
\DoxyCodeLine{03299\ \ \ \ \ \textcolor{comment}{//\ load\ mtl}}
\DoxyCodeLine{03300\ \ \ \ \ \textcolor{keywordflow}{if}\ ((0\ ==\ strncmp(token,\ \textcolor{stringliteral}{"{}mtllib"{}},\ 6))\ \&\&\ IS\_SPACE((token[6])))\ \{}
\DoxyCodeLine{03301\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (readMatFn)\ \{}
\DoxyCodeLine{03302\ \ \ \ \ \ \ \ \ token\ +=\ 7;}
\DoxyCodeLine{03303\ }
\DoxyCodeLine{03304\ \ \ \ \ \ \ \ \ std::vector<std::string>\ filenames;}
\DoxyCodeLine{03305\ \ \ \ \ \ \ \ \ SplitString(std::string(token),\ \textcolor{charliteral}{'\ '},\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ filenames);}
\DoxyCodeLine{03306\ }
\DoxyCodeLine{03307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (filenames.empty())\ \{}
\DoxyCodeLine{03308\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{03309\ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=}
\DoxyCodeLine{03310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Looks\ like\ empty\ filename\ for\ mtllib.\ Use\ default\ "{}}}
\DoxyCodeLine{03311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}material.\ \(\backslash\)n"{}};}
\DoxyCodeLine{03312\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03313\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03314\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{03315\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ s\ =\ 0;\ s\ <\ filenames.size();\ s++)\ \{}
\DoxyCodeLine{03316\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (material\_filenames.count(filenames[s])\ >\ 0)\ \{}
\DoxyCodeLine{03317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{03318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03319\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03320\ }
\DoxyCodeLine{03321\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ warn\_mtl;}
\DoxyCodeLine{03322\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ err\_mtl;}
\DoxyCodeLine{03323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ok\ =\ (*readMatFn)(filenames[s].c\_str(),\ \&materials,}
\DoxyCodeLine{03324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&material\_map,\ \&warn\_mtl,\ \&err\_mtl);}
\DoxyCodeLine{03325\ }
\DoxyCodeLine{03326\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn\ \&\&\ (!warn\_mtl.empty()))\ \{}
\DoxyCodeLine{03327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=\ warn\_mtl;\ \ \textcolor{comment}{//\ This\ should\ be\ warn\ message.}}
\DoxyCodeLine{03328\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03329\ }
\DoxyCodeLine{03330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ \&\&\ (!err\_mtl.empty()))\ \{}
\DoxyCodeLine{03331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*err)\ +=\ err\_mtl;}
\DoxyCodeLine{03332\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03333\ }
\DoxyCodeLine{03334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ok)\ \{}
\DoxyCodeLine{03335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{03336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ material\_filenames.insert(filenames[s]);}
\DoxyCodeLine{03337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03338\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03339\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03340\ }
\DoxyCodeLine{03341\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!found)\ \{}
\DoxyCodeLine{03342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (warn)\ \{}
\DoxyCodeLine{03343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*warn)\ +=}
\DoxyCodeLine{03344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Failed\ to\ load\ material\ file(s).\ Use\ default\ "{}}}
\DoxyCodeLine{03345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}material.\(\backslash\)n"{}};}
\DoxyCodeLine{03346\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03347\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03348\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.mtllib\_cb)\ \{}
\DoxyCodeLine{03349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback.mtllib\_cb(user\_data,\ \&materials.at(0),}
\DoxyCodeLine{03350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(materials.size()));}
\DoxyCodeLine{03351\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03352\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03353\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03354\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03355\ }
\DoxyCodeLine{03356\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03357\ \ \ \ \ \}}
\DoxyCodeLine{03358\ }
\DoxyCodeLine{03359\ \ \ \ \ \textcolor{comment}{//\ group\ name}}
\DoxyCodeLine{03360\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'g'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{03361\ \ \ \ \ \ \ names.clear();}
\DoxyCodeLine{03362\ }
\DoxyCodeLine{03363\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!IS\_NEW\_LINE(token[0]))\ \{}
\DoxyCodeLine{03364\ \ \ \ \ \ \ \ \ std::string\ str\ =\ parseString(\&token);}
\DoxyCodeLine{03365\ \ \ \ \ \ \ \ \ names.push\_back(str);}
\DoxyCodeLine{03366\ \ \ \ \ \ \ \ \ token\ +=\ strspn(token,\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)r"{}});\ \ \textcolor{comment}{//\ skip\ tag}}
\DoxyCodeLine{03367\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03368\ }
\DoxyCodeLine{03369\ \ \ \ \ \ \ assert(names.size()\ >\ 0);}
\DoxyCodeLine{03370\ }
\DoxyCodeLine{03371\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.group\_cb)\ \{}
\DoxyCodeLine{03372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (names.size()\ >\ 1)\ \{}
\DoxyCodeLine{03373\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ create\ const\ char*\ array.}}
\DoxyCodeLine{03374\ \ \ \ \ \ \ \ \ \ \ names\_out.resize(names.size()\ -\/\ 1);}
\DoxyCodeLine{03375\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ j\ =\ 0;\ j\ <\ names\_out.size();\ j++)\ \{}
\DoxyCodeLine{03376\ \ \ \ \ \ \ \ \ \ \ \ \ names\_out[j]\ =\ names[j\ +\ 1].c\_str();}
\DoxyCodeLine{03377\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03378\ \ \ \ \ \ \ \ \ \ \ callback.group\_cb(user\_data,\ \&names\_out.at(0),}
\DoxyCodeLine{03379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(names\_out.size()));}
\DoxyCodeLine{03380\ }
\DoxyCodeLine{03381\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03382\ \ \ \ \ \ \ \ \ \ \ callback.group\_cb(user\_data,\ NULL,\ 0);}
\DoxyCodeLine{03383\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03384\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03385\ }
\DoxyCodeLine{03386\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03387\ \ \ \ \ \}}
\DoxyCodeLine{03388\ }
\DoxyCodeLine{03389\ \ \ \ \ \textcolor{comment}{//\ object\ name}}
\DoxyCodeLine{03390\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'o'}\ \&\&\ IS\_SPACE((token[1])))\ \{}
\DoxyCodeLine{03391\ \ \ \ \ \ \ \textcolor{comment}{//\ @todo\ \{\ multiple\ object\ name?\ \}}}
\DoxyCodeLine{03392\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03393\ }
\DoxyCodeLine{03394\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03395\ \ \ \ \ \ \ ss\ <<\ token;}
\DoxyCodeLine{03396\ \ \ \ \ \ \ std::string\ object\_name\ =\ ss.str();}
\DoxyCodeLine{03397\ }
\DoxyCodeLine{03398\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (callback.object\_cb)\ \{}
\DoxyCodeLine{03399\ \ \ \ \ \ \ \ \ callback.object\_cb(user\_data,\ object\_name.c\_str());}
\DoxyCodeLine{03400\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03401\ }
\DoxyCodeLine{03402\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{03403\ \ \ \ \ \}}
\DoxyCodeLine{03404\ }
\DoxyCodeLine{03405\ \textcolor{preprocessor}{\#if\ 0\ \ }\textcolor{comment}{//\ @todo}}
\DoxyCodeLine{03406\ \ \ \ \ \textcolor{keywordflow}{if}\ (token[0]\ ==\ \textcolor{charliteral}{'t'}\ \&\&\ IS\_SPACE(token[1]))\ \{}
\DoxyCodeLine{03407\ \ \ \ \ \ \ tag\_t\ tag;}
\DoxyCodeLine{03408\ }
\DoxyCodeLine{03409\ \ \ \ \ \ \ token\ +=\ 2;}
\DoxyCodeLine{03410\ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03411\ \ \ \ \ \ \ ss\ <<\ token;}
\DoxyCodeLine{03412\ \ \ \ \ \ \ tag.name\ =\ ss.str();}
\DoxyCodeLine{03413\ }
\DoxyCodeLine{03414\ \ \ \ \ \ \ token\ +=\ tag.name.size()\ +\ 1;}
\DoxyCodeLine{03415\ }
\DoxyCodeLine{03416\ \ \ \ \ \ \ tag\_sizes\ ts\ =\ parseTagTriple(\&token);}
\DoxyCodeLine{03417\ }
\DoxyCodeLine{03418\ \ \ \ \ \ \ tag.intValues.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ts.num\_ints));}
\DoxyCodeLine{03419\ }
\DoxyCodeLine{03420\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ static\_cast<size\_t>(ts.num\_ints);\ ++i)\ \{}
\DoxyCodeLine{03421\ \ \ \ \ \ \ \ \ tag.intValues[i]\ =\ atoi(token);}
\DoxyCodeLine{03422\ \ \ \ \ \ \ \ \ token\ +=\ strcspn(token,\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}})\ +\ 1;}
\DoxyCodeLine{03423\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03424\ }
\DoxyCodeLine{03425\ \ \ \ \ \ \ tag.floatValues.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ts.num\_reals));}
\DoxyCodeLine{03426\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ static\_cast<size\_t>(ts.num\_reals);\ ++i)\ \{}
\DoxyCodeLine{03427\ \ \ \ \ \ \ \ \ tag.floatValues[i]\ =\ parseReal(\&token);}
\DoxyCodeLine{03428\ \ \ \ \ \ \ \ \ token\ +=\ strcspn(token,\ \textcolor{stringliteral}{"{}/\ \(\backslash\)t\(\backslash\)r"{}})\ +\ 1;}
\DoxyCodeLine{03429\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03430\ }
\DoxyCodeLine{03431\ \ \ \ \ \ \ tag.stringValues.resize(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(ts.num\_strings));}
\DoxyCodeLine{03432\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ static\_cast<size\_t>(ts.num\_strings);\ ++i)\ \{}
\DoxyCodeLine{03433\ \ \ \ \ \ \ \ \ std::stringstream\ ss;}
\DoxyCodeLine{03434\ \ \ \ \ \ \ \ \ ss\ <<\ token;}
\DoxyCodeLine{03435\ \ \ \ \ \ \ \ \ tag.stringValues[i]\ =\ ss.str();}
\DoxyCodeLine{03436\ \ \ \ \ \ \ \ \ token\ +=\ tag.stringValues[i].size()\ +\ 1;}
\DoxyCodeLine{03437\ \ \ \ \ \ \ \}}
\DoxyCodeLine{03438\ }
\DoxyCodeLine{03439\ \ \ \ \ \ \ tags.push\_back(tag);}
\DoxyCodeLine{03440\ \ \ \ \ \}}
\DoxyCodeLine{03441\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03442\ }
\DoxyCodeLine{03443\ \ \ \ \ \textcolor{comment}{//\ Ignore\ unknown\ command.}}
\DoxyCodeLine{03444\ \ \ \}}
\DoxyCodeLine{03445\ }
\DoxyCodeLine{03446\ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{03447\ \ \ \ \ (*err)\ +=\ errss.str();}
\DoxyCodeLine{03448\ \ \ \}}
\DoxyCodeLine{03449\ }
\DoxyCodeLine{03450\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{03451\ \}}
\DoxyCodeLine{03452\ }
\DoxyCodeLine{03453\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtinyobj_1_1ObjReader_a2aff0b5142ad265dc9fa276064f69700}{ObjReader::ParseFromFile}}(\textcolor{keyword}{const}\ std::string\ \&filename,}
\DoxyCodeLine{03454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ObjReaderConfig\ \&config)\ \{}
\DoxyCodeLine{03455\ \ \ std::string\ mtl\_search\_path;}
\DoxyCodeLine{03456\ }
\DoxyCodeLine{03457\ \ \ \textcolor{keywordflow}{if}\ (config.mtl\_search\_path.empty())\ \{}
\DoxyCodeLine{03458\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{03459\ \ \ \ \ \textcolor{comment}{//\ split\ at\ last\ '/'(for\ unixish\ system)\ or\ '\(\backslash\)\(\backslash\)'(for\ windows)\ to\ get}}
\DoxyCodeLine{03460\ \ \ \ \ \textcolor{comment}{//\ the\ base\ directory\ of\ .obj\ file}}
\DoxyCodeLine{03461\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{03462\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pos\ =\ filename.find\_last\_of(\textcolor{stringliteral}{"{}/\(\backslash\)\(\backslash\)"{}});}
\DoxyCodeLine{03463\ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{03464\ \ \ \ \ \ \ mtl\_search\_path\ =\ filename.substr(0,\ pos);}
\DoxyCodeLine{03465\ \ \ \ \ \}}
\DoxyCodeLine{03466\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03467\ \ \ \ \ mtl\_search\_path\ =\ config.mtl\_search\_path;}
\DoxyCodeLine{03468\ \ \ \}}
\DoxyCodeLine{03469\ }
\DoxyCodeLine{03470\ \ \ valid\_\ =\ LoadObj(\&attrib\_,\ \&shapes\_,\ \&materials\_,\ \&warning\_,\ \&error\_,}
\DoxyCodeLine{03471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename.c\_str(),\ mtl\_search\_path.c\_str(),}
\DoxyCodeLine{03472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.triangulate,\ config.vertex\_color);}
\DoxyCodeLine{03473\ }
\DoxyCodeLine{03474\ \ \ \textcolor{keywordflow}{return}\ valid\_;}
\DoxyCodeLine{03475\ \}}
\DoxyCodeLine{03476\ }
\DoxyCodeLine{03477\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classtinyobj_1_1ObjReader_a89a253a20fdf22305b068143cc58dfce}{ObjReader::ParseFromString}}(\textcolor{keyword}{const}\ std::string\ \&obj\_text,}
\DoxyCodeLine{03478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&mtl\_text,}
\DoxyCodeLine{03479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ObjReaderConfig\ \&config)\ \{}
\DoxyCodeLine{03480\ \ \ std::stringbuf\ obj\_buf(obj\_text);}
\DoxyCodeLine{03481\ \ \ std::stringbuf\ mtl\_buf(mtl\_text);}
\DoxyCodeLine{03482\ }
\DoxyCodeLine{03483\ \ \ std::istream\ obj\_ifs(\&obj\_buf);}
\DoxyCodeLine{03484\ \ \ std::istream\ mtl\_ifs(\&mtl\_buf);}
\DoxyCodeLine{03485\ }
\DoxyCodeLine{03486\ \ \ MaterialStreamReader\ mtl\_ss(mtl\_ifs);}
\DoxyCodeLine{03487\ }
\DoxyCodeLine{03488\ \ \ valid\_\ =\ LoadObj(\&attrib\_,\ \&shapes\_,\ \&materials\_,\ \&warning\_,\ \&error\_,}
\DoxyCodeLine{03489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&obj\_ifs,\ \&mtl\_ss,\ config.triangulate,\ config.vertex\_color);}
\DoxyCodeLine{03490\ }
\DoxyCodeLine{03491\ \ \ \textcolor{keywordflow}{return}\ valid\_;}
\DoxyCodeLine{03492\ \}}
\DoxyCodeLine{03493\ }
\DoxyCodeLine{03494\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{03495\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ pop}}
\DoxyCodeLine{03496\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03497\ \}\ \ \textcolor{comment}{//\ namespace\ tinyobj}}
\DoxyCodeLine{03498\ }
\DoxyCodeLine{03499\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
